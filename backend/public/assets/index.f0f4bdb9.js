import{u as R,a as I,r as D,c as r,b as s,n as g,d as h,o as n,e as d,F as H,f as z,g as f,h as a,t as k,i as x,j as A,k as S,l as O,m as $,w as V,p as K,v as W,q as L,s as G,x as j,L as J,y as Q,z as X,A as Z,T as ee,B as te,S as se,C as oe,D as le,E as ie,G as ne,H as ae,I as re,J as ce,K as de,M as ue}from"./vendor.9f231262.js";const me=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))t(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function i(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerpolicy&&(l.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?l.credentials="include":u.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(u){if(u.ep)return;u.ep=!0;const l=i(u);fetch(u.href,l)}};me();const ge={class:"min-h-screen bg-gray-200"},ve=s("div",{class:"bg-gray-800"},[s("div",{class:"container mx-auto lg:max-w-screen-lg text-lg font-semibold text-white py-4"}," \u0422\u0435\u0441\u0442\u043E\u0432\u043E\u0435 \u0437\u0430\u0434\u0430\u043D\u0438\u0435: TestWork1019181 ")],-1),he={class:"container mx-auto lg:max-w-screen-lg mt-6"},pe={class:"flex gap-x-6"},we={class:"w-2/12 flex-shrink-0 flex flex-col gap-y-4 font-medium text-gray-500"},fe={class:"w-10/12 flex-shrink-0"},xe={setup(e){const o=R(),i=I(),t=l=>o.push(l),u=l=>i.name===`${l}-list`||i.name===`${l}-create`||i.name===`${l}-edit`;return(l,c)=>{const v=D("router-view");return n(),r("div",ge,[ve,s("div",he,[s("div",pe,[s("div",we,[s("div",{class:g(["cursor-pointer",{"text-blue-500 font-semibold":u("posts")}]),onClick:c[0]||(c[0]=w=>t("/"))}," \u041F\u043E\u0441\u0442\u044B ",2),s("div",{class:g(["cursor-pointer",{"text-blue-500 font-semibold":u("categories")}]),onClick:c[1]||(c[1]=w=>t("/categories"))}," \u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438 ",2)]),s("div",fe,[h(v)])])])])}}},q="http://localhost:8080/api";var M={async save(e,o,i=""){try{const t=new FormData;for(let c in o)o[c]&&t.append(c,o[c]);i&&t.append("_method","PUT");let u=i?`/${i}`:"";const l=await fetch(`${q}${e}${u}`,{method:"post",body:t});return console.log("res: ",l),console.log("url: ",e),console.log("data: ",o),await l.json()}catch(t){console.error("err: ",t)}},async get(e){try{return(await(await fetch(q+e,{method:"get"})).json()).data}catch(o){console.error("err: ",o)}},async destroy(e){try{return await fetch(q+e,{method:"delete"})}catch(o){console.error("err: ",o)}}};const be=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"},null,-1),ye=[be],_e=s("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[s("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})],-1),ke=[_e],$e=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"},null,-1),Ve=[$e],Me=s("g",{fill:"none"},[s("path",{d:"M6 4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.5 4.5 0 0 1 13.5 20H6v-2h1V6H6V4zm3 7h3.5a2.5 2.5 0 0 0 0-5H9v5zm0 2v5h4.5a2.5 2.5 0 0 0 0-5H9z",fill:"currentColor"})],-1),Ce=[Me],He=s("g",{fill:"none"},[s("path",{d:"M13 20H7v-2h1.927l4.116-12H11V4h6v2h-1.927l-4.116 12H13v2z",fill:"currentColor"})],-1),ze=[He],Ae=s("g",{fill:"none"},[s("path",{d:"M12.25 19.26c-1.347 0-2.494-.307-3.44-.92a4.85 4.85 0 0 1-1.96-2.52l1.98-1.16c.56 1.573 1.72 2.36 3.48 2.36c.866 0 1.513-.167 1.94-.5c.44-.347.66-.793.66-1.34c0-.5-.178-.893-.532-1.18H4v-2h16v2h-2.928c.092.34.137.72.137 1.14c0 1.267-.46 2.273-1.38 3.02c-.906.733-2.1 1.1-3.58 1.1z",fill:"currentColor"}),s("path",{d:"M7.77 10.42c.1.208.224.401.37.58h4.714a53.725 53.725 0 0 0-.304-.1c-1.067-.333-1.807-.647-2.22-.94c-.4-.307-.6-.72-.6-1.24c0-.533.2-.953.6-1.26c.4-.32.933-.48 1.6-.48c1.373 0 2.353.653 2.94 1.96l1.94-1.12c-.454-.96-1.1-1.713-1.94-2.26c-.84-.547-1.82-.82-2.94-.82c-1.24 0-2.3.367-3.18 1.1c-.88.72-1.32 1.7-1.32 2.94c0 .627.113 1.173.34 1.64z",fill:"currentColor"})],-1),Le=[Ae],Be=s("g",{fill:"none"},[s("path",{d:"M9 4H7v7a5 5 0 0 0 10 0V4h-2v7a3 3 0 1 1-6 0V4z",fill:"currentColor"}),s("path",{d:"M19 20v-2H5v2h14z",fill:"currentColor"})],-1),Re=[Be],Ie=s("g",{fill:"none"},[s("path",{d:"M8.01 18.02L2 12.01L8.01 6l1.415 1.414l-4.6 4.6l4.6 4.6l-1.414 1.406H8.01zm7.979 0l-1.413-1.413l4.6-4.6l-4.6-4.6L15.99 6L22 12.01l-6.01 6.01h-.001z",fill:"currentColor"})],-1),je=[Ie],Ye=s("g",{fill:"none"},[s("path",{d:"M6 9a5 5 0 0 1 5-5h7v2h-1v14h-2V6h-2v14h-2v-6a5 5 0 0 1-5-5zm5 3V6a3 3 0 0 0 0 6z",fill:"currentColor"})],-1),Ue=[Ye],Se=s("g",{fill:"none"},[s("path",{d:"M10 4v7H4V4H2v16h2v-7h6v7h2V4h-2z",fill:"currentColor"}),s("path",{d:"M20 20V8h-1.5l-2.5.67v2.07l2-.536V20h2z",fill:"currentColor"})],-1),Te=[Se],De=s("g",{fill:"none"},[s("path",{d:"M10 4v7H4V4H2v16h2v-7h6v7h2V4h-2z",fill:"currentColor"}),s("path",{d:"M22 11.75C22 9.679 20.21 8 18 8s-4 1.679-4 3.75h2.133l.007-.144C16.218 10.707 17.02 10 18 10c1.03 0 1.867.784 1.867 1.75c0 .439-.173.841-.459 1.148L14 18.444V20h8v-2h-4.497l3.516-3.79l.158-.18A3.59 3.59 0 0 0 22 11.75z",fill:"currentColor"})],-1),Oe=[De],qe=s("g",{fill:"none"},[s("path",{d:"M10 4v7H4V4H2v16h2v-7h6v7h2V4h-2z",fill:"currentColor"}),s("path",{d:"M21.729 10l.002-2H14.5v2h4.378l-3.176 3.283l1.407 1.515c.256-.118.546-.186.854-.186c1.04 0 1.884.768 1.884 1.714c0 .947-.844 1.715-1.884 1.715c-.917 0-1.681-.597-1.849-1.386L14 17.029C14.36 18.722 15.998 20 17.963 20C20.193 20 22 18.355 22 16.326c0-1.691-1.256-3.117-2.968-3.543L21.73 10z",fill:"currentColor"})],-1),Ne=[qe],Ee=s("g",{fill:"none"},[s("path",{d:"M20 18H8v-2h12v2zM6 18H4v-2h2v2zm14-5H8v-2h12v2zM6 13H4v-2h2v2zm14-5H8.023V6H20v2zM6 8H4V6h2v2z",fill:"currentColor"})],-1),Fe=[Ee],Pe=s("g",{fill:"none"},[s("path",{d:"M6.983 19H4v-1h1.989v-.5h-.994v-1h.995V16H4v-1h2.983v4zM21 18H9.069v-2H21v2zM6.983 14H4v-.9L5.79 11H4v-1h2.983v.9L5.193 13h1.79v1zM21 13H9.069v-2H21v2zM6.486 9h-.995V6H4.5V5h1.986v4zM21 8H9.069V6H21v2z",fill:"currentColor"})],-1),Ke=[Pe],We=s("g",{fill:"none"},[s("path",{d:"M20 20H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 6v12h16V6H4zm14 10h-6v-2h6v2zM7.414 16L6 14.586l2.293-2.293L6 10l1.414-1.414l3.707 3.707L7.415 16h-.001z",fill:"currentColor"})],-1),Ge=[We],Je=s("g",{fill:"none"},[s("path",{d:"M7.627 11.379C6.06 11.379 5 10.287 5 8.669C5 7.213 6.216 6 7.863 6C9.667 6 11 7.456 11 9.68c0 5.055-3.686 7.077-6 7.32v-2.224c1.569-.283 3.333-1.86 3.412-3.6c-.079.04-.392.203-.785.203z",fill:"currentColor"}),s("path",{d:"M15.627 11.379c-1.568 0-2.627-1.092-2.627-2.71C13 7.213 14.216 6 15.863 6C17.667 6 19 7.456 19 9.68c0 5.055-3.686 7.077-6 7.32v-2.224c1.569-.283 3.333-1.86 3.412-3.6c-.079.04-.392.203-.785.203z",fill:"currentColor"})],-1),Qe=[Je],Xe=s("g",{fill:"none"},[s("path",{d:"M5 13v-2h14v2H5z",fill:"currentColor"})],-1),Ze=[Xe],et=s("g",{fill:"none"},[s("path",{d:"M18 6v6H7.83l2.58-2.59L9 8l-5 5l5 5l1.41-1.41L7.83 14H20V6h-2z",fill:"currentColor"})],-1),tt=[et],st=s("g",{fill:"none"},[s("path",{d:"M6 4h2v2.557a7 7 0 1 1-1.037 10.011l1.62-1.184A5 5 0 1 0 9.408 8H12v2H6V4z",fill:"currentColor"})],-1),ot=[st],lt=s("g",{fill:"none"},[s("path",{d:"M18.001 4h-2v2.557a7 7 0 1 0 1.037 10.011l-1.62-1.184A5 5 0 1 1 14.593 8h-2.59v2h6V4z",fill:"currentColor"})],-1),it=[lt],nt=s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1),at=[nt],p={props:["icon","class"],setup(e){return(o,i)=>(n(),r(H,null,[e.icon==="arrow-left"?(n(),r("svg",{key:0,class:g(e.class),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ye,2)):d("",!0),e.icon==="loader"?(n(),r("svg",{key:1,class:g(e.class),xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ke,2)):d("",!0),e.icon==="pencil"?(n(),r("svg",{key:2,class:g(e.class),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve,2)):d("",!0),e.icon==="bold"?(n(),r("svg",{key:3,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ce,2)):d("",!0),e.icon==="italic"?(n(),r("svg",{key:4,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ze,2)):d("",!0),e.icon==="strike"?(n(),r("svg",{key:5,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Le,2)):d("",!0),e.icon==="underline"?(n(),r("svg",{key:6,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Re,2)):d("",!0),e.icon==="code"?(n(),r("svg",{key:7,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},je,2)):d("",!0),e.icon==="parapgraph"?(n(),r("svg",{key:8,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ue,2)):d("",!0),e.icon==="h1"?(n(),r("svg",{key:9,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Te,2)):d("",!0),e.icon==="h2"?(n(),r("svg",{key:10,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Oe,2)):d("",!0),e.icon==="h3"?(n(),r("svg",{key:11,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ne,2)):d("",!0),e.icon==="list-ul"?(n(),r("svg",{key:12,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Fe,2)):d("",!0),e.icon==="list-ol"?(n(),r("svg",{key:13,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ke,2)):d("",!0),e.icon==="terminal"?(n(),r("svg",{key:14,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ge,2)):d("",!0),e.icon==="blockquote"?(n(),r("svg",{key:15,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Qe,2)):d("",!0),e.icon==="minus"?(n(),r("svg",{key:16,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Ze,2)):d("",!0),e.icon==="line-break"?(n(),r("svg",{key:17,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},tt,2)):d("",!0),e.icon==="undo"?(n(),r("svg",{key:18,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ot,2)):d("",!0),e.icon==="redo"?(n(),r("svg",{key:19,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:g(e.class),preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},it,2)):d("",!0),e.icon==="plus"?(n(),r("svg",{key:20,xmlns:"http://www.w3.org/2000/svg",class:g(e.class),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},at,2)):d("",!0)],64))}},rt={class:"py-4 px-6 bg-white rounded shadow"},ct={class:"border-b -mx-6 -mt-4 px-6 py-4 flex justify-between items-center gap-x-3"},dt={class:"font-semibold flex-grow-1 w-full"},ut={class:"-my-4 -mr-4"},mt=["disabled"],gt=A(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),vt={class:"mt-4"},ht={setup(e){const o=R(),i=I(),t=z(),u=w=>o.push(w),l=()=>o.go(-1),c=f(()=>t.state.posts.loading),v=f(()=>{if(i.name==="posts-list")return"\u0412\u0441\u0435 \u043F\u043E\u0441\u0442\u044B";if(i.name==="posts-create")return"\u041D\u043E\u0432\u044B\u0439 \u043F\u043E\u0441\u0442";if(i.name==="posts-edit")return"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u0441\u0442"});return(w,m)=>{const b=D("router-view");return n(),r("div",rt,[s("div",ct,[a(i).name!=="posts-list"?(n(),r("button",{key:0,onClick:l,class:"-ml-1"},[h(p,{icon:"arrow-left",class:"w-6 h-6 text-blue-500"})])):d("",!0),s("div",dt,k(a(v)),1),s("div",ut,[a(i).name==="posts-list"?(n(),r("button",{key:0,class:"button",onClick:m[0]||(m[0]=B=>u("/create"))}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")):d("",!0),a(i).name==="posts-edit"||a(i).name==="posts-create"?(n(),r("button",{key:1,class:"button",form:"posts_form",disabled:a(c).save},[a(c).save?(n(),x(p,{key:0,class:"w-5 h-5 animate-spin",icon:"loader"})):d("",!0),gt],8,mt)):d("",!0)])]),s("div",vt,[h(b)])])}}},pt={class:"w-full h-full flex items-center justify-center"},T={setup(e){return(o,i)=>(n(),r("div",pt,[h(p,{icon:"loader",class:"w-16 h-16 text-blue-500 animate-spin"})]))}},wt={key:1,class:"divide-y -mx-6 -my-4"},ft={key:0,style:{width:"60px"}},xt=["src"],bt={class:"w-full"},yt={class:"font-semibold"},_t={key:0,class:"text-sm text-gray-400"},kt=["onClick"],$t={setup(e){const o="http://localhost:8080",i=z(),t=R(),u=f(()=>i.state.posts.list),l=f(()=>i.state.posts.loading.get);S(()=>i.dispatch("posts/get.list"));const c=v=>t.push(v);return(v,w)=>(n(),r("div",null,[a(l)?(n(),x(T,{key:0})):d("",!0),a(l)?d("",!0):(n(),r("div",wt,[(n(!0),r(H,null,O(a(u),m=>(n(),r("div",{key:m.id,class:"flex justify-between px-6 items-center py-3 gap-x-5"},[m.thumbnail?(n(),r("div",ft,[s("img",{src:`${a(o)}${m.thumbnail.url}`,width:"60",height:"60"},null,8,xt)])):d("",!0),s("div",bt,[s("div",yt,k(m.title),1),m.category?(n(),r("div",_t,k(m.category.name),1)):d("",!0)]),s("div",null,[s("button",{class:"flex items-center justify-center",onClick:b=>c(`/${m.id}`)},[h(p,{icon:"pencil",class:"w-6 h-6 text-blue-500"})],8,kt)])]))),128))]))]))}};var Vt=(e,o)=>{const i=e.__vccOpts||e;for(const[t,u]of o)i[t]=u;return i};const Mt=["type"],Ct={props:["modelValue","type"],emits:["update:modelValue"],setup(e,{emit:o}){const i=e;let t=$(i.modelValue);V(t,l=>o("update:modelValue",l));const u=()=>i.type===void 0?"text":i.type;return V(()=>i.modelValue,l=>{t.value=l}),(l,c)=>K((n(),r("input",{type:u(),"onUpdate:modelValue":c[0]||(c[0]=v=>L(t)?t.value=v:t=v),class:"rounded-md w-full shadow-sm border-gray-300 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,8,Mt)),[[W,a(t)]])}};var Ht=Vt(Ct,[["__scopeId","data-v-21dae1b8"]]);const zt={key:0,class:"font-medium text-sm text-blue-500"},At={key:1,class:"font-medium text-sm text-blue-500 text-center"},Lt=A(" \u0411\u0443\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0444\u0430\u0439\u043B:"),Bt=s("br",null,null,-1),Rt={key:1,class:"mt-1 flex justify-center items-center"},It={props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:o}){const i=e,t=$(i.modelValue);V(()=>i.modelValue,v=>{t.value=v});const u=v=>{t.value.file=v.target.files[0],o("update:modelValue",t.value)};let l=$(!1);const c=async()=>{l.value=!0,await M.delete(`/media/${t.value.id}`),t.value.preview=null,t.value.id=null,o("update:modelValue",t.value),l.value=!1};return(v,w)=>(n(),r("div",null,[s("label",{class:"w-full h-36 border border-gray-300 rounded-md flex items-center justify-center cursor-pointer bg-cover bg-center",style:G({backgroundImage:`url(${t.value.preview})`})},[s("input",{type:"file",class:"hidden",onChange:w[0]||(w[0]=m=>u(m))},null,32),!t.value.file&&!t.value.preview?(n(),r("div",zt," \u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0444\u0430\u0439\u043B ")):d("",!0),t.value&&t.value.file?(n(),r("div",At,[Lt,Bt,A(" "+k(t.value.file.name),1)])):d("",!0)],4),t.value.id&&!a(l)?(n(),r("div",{key:0,class:"text-sm text-red-500 font-semibold mt-1 text-center cursor-pointer",onClick:c}," \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 ")):d("",!0),a(l)?(n(),r("div",Rt,[h(p,{icon:"loader",class:"animate-spin w-6 h-6 text-blue-500"})])):d("",!0)]))}},jt={class:"relative"},Yt={key:0,class:"flex items-center"},Ut={class:"block truncate"},St={class:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none text-gray-400"},Tt=["title"],Dt={class:"flex items-center"},Ot={props:["items","modelValue","size"],emits:["update:modelValue"],setup(e,{emit:o}){const i=e;let t=$(i.modelValue);$(!1);let u=f(()=>i.items.find(l=>l.value===t.value));return V(t,l=>o("update:modelValue",l)),V(()=>i.modelValue,l=>{t.value=l}),(l,c)=>(n(),x(a(J),{as:"div",modelValue:a(t),"onUpdate:modelValue":c[0]||(c[0]=v=>L(t)?t.value=v:t=v)},{default:j(()=>[s("div",jt,[h(a(Q),{class:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},{default:j(()=>[a(u)?(n(),r("span",Yt,[s("span",Ut,k(a(u).label),1)])):d("",!0),s("span",St,[h(p,{icon:"selector",class:"w-5"})])]),_:1}),h(ee,{"leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:j(()=>[h(a(X),{class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-56 rounded-md text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm p-2"},{default:j(()=>[(n(!0),r(H,null,O(e.items,v=>(n(),x(a(Z),{as:"template",key:v.value,value:v.value},{default:j(({active:w,selected:m})=>[s("li",{class:g([w?"text-blue-500 bg-blue-100":"text-gray-900","cursor-pointer select-none relative py-2 pl-3 pr-9 duration-200 rounded"]),title:v.label},[s("div",Dt,[s("span",{class:g([m?"font-semibold":"font-normal","block truncate"])},k(v.label),3)]),m?(n(),r("span",{key:0,class:g(["text-blue-600 absolute inset-y-0 right-0 flex items-center",{"pr-2":i.size==="sm","pr-4":i.size===void 0}])},[h(p,{icon:"check",class:"w-5"})],2)):d("",!0)],10,Tt)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}};const qt={key:0,class:"flex flex-col"},Nt={class:"flex gap-x-3"},Et={class:"rounded-md overflow-hidden"},Ft={class:"rounded-md overflow-hidden"},Pt={class:"rounded-md overflow-hidden"},Kt={props:["modelValue","type"],emits:["update:modelValue"],setup(e,{emit:o}){const i=e,t=te({content:i.modelValue,extensions:[se,oe.configure({resizable:!0}),le,ie,ne],onUpdate:({editor:u})=>{o("update:modelValue",u.getHTML())},editorProps:{attributes:{class:"max-w-full h-96 overflow-y-auto border border-gray-300 rounded-md w-full p-3 focus:ring-blue-500 focus:border-blue-500 focus:ring-1 focus:outline-none text-sm"}}});return V(()=>i.modelValue,u=>{t.value.getHTML()!==u&&t.value.commands.setContent(u,!1)}),(u,l)=>a(t)?(n(),r("div",qt,[s("div",Nt,[s("div",Et,[s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("bold"),"bg-blue-100 text-blue-500":!a(t).isActive("bold")}]),onClick:l[0]||(l[0]=c=>a(t).chain().focus().toggleBold().run())},[h(p,{icon:"bold",class:"w-6"})],2),s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("italic"),"bg-blue-100 text-blue-500":!a(t).isActive("italic")}]),onClick:l[1]||(l[1]=c=>a(t).chain().focus().toggleItalic().run())},[h(p,{icon:"italic",class:"w-6"})],2),s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("strike"),"bg-blue-100 text-blue-500":!a(t).isActive("strike")}]),onClick:l[2]||(l[2]=c=>a(t).chain().focus().toggleStrike().run())},[h(p,{icon:"strike",class:"w-6"})],2),s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("code"),"bg-blue-100 text-blue-500":!a(t).isActive("code")}]),onClick:l[3]||(l[3]=c=>a(t).chain().focus().toggleCode().run())},[h(p,{icon:"code",class:"w-6"})],2)]),s("div",Ft,[s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("bulletList"),"bg-blue-100 text-blue-500":!a(t).isActive("bulletList")}]),onClick:l[4]||(l[4]=c=>a(t).chain().focus().toggleBulletList().run())},[h(p,{icon:"list-ul",class:"w-6"})],2),s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("orderedList"),"bg-blue-100 text-blue-500":!a(t).isActive("orderedList")}]),onClick:l[5]||(l[5]=c=>a(t).chain().focus().toggleOrderedList().run())},[h(p,{icon:"list-ol",class:"w-6"})],2),s("button",{class:g(["p-2",{"bg-blue-500 text-white":a(t).isActive("blockquote"),"bg-blue-100 text-blue-500":!a(t).isActive("blockquote")}]),onClick:l[6]||(l[6]=c=>a(t).chain().focus().toggleBlockquote().run())},[h(p,{icon:"blockquote",class:"w-6"})],2)]),s("div",Pt,[s("button",{class:"p-2 bg-blue-100 text-blue-500",onClick:l[7]||(l[7]=c=>a(t).chain().focus().setHorizontalRule().run())},[h(p,{icon:"minus",class:"w-6"})]),s("button",{class:"p-2 bg-blue-100 text-blue-500",onClick:l[8]||(l[8]=c=>a(t).chain().focus().undo().run())},[h(p,{icon:"undo",class:"w-6"})]),s("button",{class:"p-2 bg-blue-100 text-blue-500",onClick:l[9]||(l[9]=c=>a(t).chain().focus().redo().run())},[h(p,{icon:"redo",class:"w-6"})])])]),h(a(ae),{editor:a(t)},null,8,["editor"])])):d("",!0)}},Wt={class:"text-sm font-medium text-gray-500 mb-2"},Y={props:["modelValue","label","type","items"],emits:["update:modelValue"],setup(e,{emit:o}){const i=e;let t=$(i.modelValue);return V(t,u=>{o("update:modelValue",u)}),V(()=>i.modelValue,u=>{t.value=u}),(u,l)=>(n(),r("div",null,[s("div",Wt,k(e.label),1),e.type==="input"?(n(),x(Ht,{key:0,modelValue:a(t),"onUpdate:modelValue":l[0]||(l[0]=c=>L(t)?t.value=c:t=c)},null,8,["modelValue"])):d("",!0),e.type==="image"?(n(),x(It,{key:1,modelValue:a(t),"onUpdate:modelValue":l[1]||(l[1]=c=>L(t)?t.value=c:t=c)},null,8,["modelValue"])):d("",!0),e.type==="select"?(n(),x(Ot,{key:2,items:e.items,modelValue:a(t),"onUpdate:modelValue":l[2]||(l[2]=c=>L(t)?t.value=c:t=c)},null,8,["items","modelValue"])):d("",!0),e.type==="editor"?(n(),x(Kt,{key:3,modelValue:a(t),"onUpdate:modelValue":l[3]||(l[3]=c=>L(t)?t.value=c:t=c)},null,8,["modelValue"])):d("",!0)]))}},Gt={key:1,class:"bg-red-100 text-red-500 text-sm px-3 py-2 rounded mb-3"},Jt={class:"flex gap-x-5"},Qt={class:"w-3/12 flex-shrink-0"},Xt={class:"w-9/12 flex flex-col gap-y-5"},Zt={key:0},es=A(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),E={setup(e){const o="http://localhost:8080",i=z(),t=I(),u=f(()=>i.state.posts.loading),l=f(()=>i.state.categories.loading),c=f(()=>{const y=i.state.categories.list&&i.state.categories.list.map(_=>({value:_.id,label:_.name}));return y.unshift({value:null,label:"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u0430"}),y}),v=$(null),w=f(()=>i.state.posts.item),m=$({title:"",content:"",category_id:null}),b=$({thumbnail:{file:null,preview:null,id:null}});V(w,y=>{y&&(m.value.title=y.title,m.value.content=y.content,m.value.category_id=y.category.id,y.thumbnail&&(b.value.thumbnail.preview=`${o}${y.thumbnail.url}`,b.value.thumbnail.id=y.thumbnail.id))}),S(()=>{i.dispatch("categories/get.list"),t.params.postId&&i.dispatch("posts/get.item",t.params.postId)});const B=y=>{y.preventDefault(),v.value=null,m.value.title===""?v.value="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C":i.dispatch("posts/save",{id:t.params.postId,fields:m.value,files:b.value})},P=()=>i.dispatch("posts/destroy",t.params.postId);return(y,_)=>(n(),r(H,null,[a(u).get?(n(),x(T,{key:0})):d("",!0),v.value?(n(),r("div",Gt,k(v.value),1)):d("",!0),a(u).get?d("",!0):(n(),r("form",{key:2,id:"posts_form",onSubmit:B},[s("div",Jt,[s("div",Qt,[h(Y,{type:"image",modelValue:b.value.thumbnail,"onUpdate:modelValue":_[0]||(_[0]=C=>b.value.thumbnail=C),label:"\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0430"},null,8,["modelValue"])]),s("div",Xt,[s("div",null,[h(Y,{type:"input",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",modelValue:m.value.title,"onUpdate:modelValue":_[1]||(_[1]=C=>m.value.title=C)},null,8,["modelValue"])]),s("div",null,[a(l).list?d("",!0):(n(),x(Y,{key:0,label:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",modelValue:m.value.category_id,"onUpdate:modelValue":_[2]||(_[2]=C=>m.value.category_id=C),type:"select",items:a(c)},null,8,["modelValue","items"]))]),s("div",null,[h(Y,{label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",modelValue:m.value.content,"onUpdate:modelValue":_[3]||(_[3]=C=>m.value.content=C),type:"editor"},null,8,["modelValue"])]),a(t).params.postId?(n(),r("div",Zt,[s("button",{class:"button button_red",onClick:P},[a(u).destroy?(n(),x(p,{key:0,class:"w-5 h-5 animate-spin",icon:"loader"})):d("",!0),es])])):d("",!0)])])],32))],64))}},ts={class:"py-4 px-6 bg-white rounded shadow"},ss={class:"border-b -mx-6 -mt-4 px-6 py-4 flex justify-between items-center gap-x-3"},os={class:"font-semibold flex-grow-1 w-full"},ls={class:"-my-4 -mr-4"},is=["disabled"],ns=A(" \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),as={class:"mt-4"},rs={setup(e){const o=R(),i=I(),t=z(),u=w=>o.push(w),l=()=>o.go(-1),c=f(()=>t.state.categories.loading.save),v=f(()=>{if(i.name==="categories-list")return"\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438";if(i.name==="categories-create")return"\u041D\u043E\u0432\u0430\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F";if(i.name==="categories-edit")return"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E"});return(w,m)=>{const b=D("router-view");return n(),r("div",ts,[s("div",ss,[a(i).name!=="categories-list"?(n(),r("button",{key:0,onClick:l,class:"-ml-1"},[h(p,{icon:"arrow-left",class:"w-6 h-6 text-blue-500"})])):d("",!0),s("div",os,k(a(v)),1),s("div",ls,[a(i).name==="categories-list"?(n(),r("button",{key:0,class:"button",onClick:m[0]||(m[0]=B=>u("/categories/create"))}," \u0421\u043E\u0437\u0434\u0430\u0442\u044C ")):d("",!0),a(i).name==="categories-edit"||a(i).name==="categories-create"?(n(),r("button",{key:1,class:"button",form:"categories_form",disabled:a(c)},[a(c)?(n(),x(p,{key:0,class:"w-5 h-5 animate-spin",icon:"loader"})):d("",!0),ns],8,is)):d("",!0)])]),s("div",as,[h(b)])])}}},cs={key:1,class:"divide-y -mx-6 -my-4"},ds=["onClick"],us={setup(e){const o=z(),i=R(),t=f(()=>o.state.categories.list),u=f(()=>o.state.categories.loading.get);S(()=>o.dispatch("categories/get.list"));const l=c=>i.push(c);return(c,v)=>(n(),r("div",null,[a(u)?(n(),x(T,{key:0})):d("",!0),a(u)?d("",!0):(n(),r("div",cs,[(n(!0),r(H,null,O(a(t),w=>(n(),r("div",{key:w.id,class:"flex justify-between px-6 items-center py-3"},[s("div",null,k(w.name),1),s("div",null,[s("button",{class:"flex items-center justify-center",onClick:m=>l(`/categories/${w.id}`)},[h(p,{icon:"pencil",class:"w-6 h-6 text-blue-500"})],8,ds)])]))),128))]))]))}},ms={key:1,class:"bg-red-100 text-red-500 text-sm px-3 py-2 rounded mb-3"},gs={key:0,class:"mt-6"},vs=A(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C "),F={setup(e){const o=z(),i=I(),t=$({name:""}),u=f(()=>o.state.categories.item),l=f(()=>o.state.categories.loading),c=$(null),v=m=>{m.preventDefault(),c.value=null,t.value.name===""?c.value="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C":o.dispatch("categories/save",{id:i.params.categoryId,fields:t.value})};S(()=>{i.name==="categories-edit"&&o.dispatch("categories/get.item",i.params.categoryId)}),V(u,m=>{m&&(t.value.name=m.name)});const w=()=>o.dispatch("categories/destroy",i.params.categoryId);return(m,b)=>(n(),r(H,null,[a(l).get?(n(),x(T,{key:0})):d("",!0),c.value?(n(),r("div",ms,k(c.value),1)):d("",!0),a(l).get?d("",!0):(n(),r("form",{key:2,id:"categories_form",onSubmit:v},[h(Y,{type:"input",modelValue:t.value.name,"onUpdate:modelValue":b[0]||(b[0]=B=>t.value.name=B),label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435"},null,8,["modelValue"]),a(i).params.categoryId?(n(),r("div",gs,[s("button",{class:"button button_red",onClick:w},[a(l).destroy?(n(),x(p,{key:0,class:"w-5 h-5 animate-spin",icon:"loader"})):d("",!0),vs])])):d("",!0)],32))],64))}};var U=re({history:ce(),routes:[{path:"/",component:ht,children:[{path:"",component:$t,name:"posts-list"},{path:"create",component:E,name:"posts-create"},{path:":postId",component:E,name:"posts-edit"}]},{path:"/categories",component:rs,children:[{path:"",component:us,name:"categories-list"},{path:"create",component:F,name:"categories-create"},{path:":categoryId",component:F,name:"categories-edit"}]}]}),hs={namespaced:!0,state(){return{list:[],item:null,loading:{get:!1,save:!1,destroy:!1}}},mutations:{list(e,o){e.list=o},item(e,o){e.item=o},"loading.get"(e,o){e.loading.get=o},"loading.save"(e,o){e.loading.save=o},"loading.destroy"(e,o){e.loading.destroy=o}},actions:{async"get.list"(e){e.commit("loading.get",!0);const o=await M.get("/categories");o&&e.commit("list",o),e.commit("loading.get",!1)},async"get.item"(e,o){e.commit("loading.get",!0);const i=await M.get(`/categories/${o}`);e.commit("item",i),e.commit("loading.get",!1)},async save(e,o){e.commit("loading.save",!0),await M.save("/categories",{name:o.fields.name},o.id)&&await U.push("/categories"),e.commit("loading.save",!1)},async destroy(e,o){e.commit("loading.destroy",!0),await M.destroy(`/categories/${o}`),await U.push("/categories"),e.commit("loading.destroy",!1)}}},ps={namespaced:!0,state(){return{list:[],item:null,loading:{get:!1,save:!1,destroy:!1}}},mutations:{list(e,o){e.list=o},item(e,o){e.item=o},"loading.get"(e,o){e.loading.get=o},"loading.save"(e,o){e.loading.save=o},"loading.destroy"(e,o){e.loading.destroy=o}},actions:{async"get.list"(e){e.commit("loading.get",!0);const o=await M.get("/posts");e.commit("list",o),e.commit("loading.get",!1)},async"get.item"(e,o){e.commit("loading.get",!0);const i=await M.get(`/posts/${o}`);e.commit("item",i),e.commit("loading.get",!1)},async destroy(e,o){e.commit("loading.destroy",!0),await M.destroy(`/posts/${o}`),await U.push("/"),e.commit("loading.destroy",!1)},async save(e,o){e.commit("loading.save",!0),await M.save("/posts",{title:o.fields.title,content:o.fields.content,category_id:o.fields.category_id,thumbnail:o.files.thumbnail.file},o.id)&&await U.push("/"),e.commit("loading.save",!1)}}},ws=de({modules:{categories:hs,posts:ps},state(){return{loading:{init:!1}}}});const N=ue(xe);N.use(ws);N.use(U);N.mount("#app");
