var My=Object.defineProperty,Ty=Object.defineProperties;var Ey=Object.getOwnPropertyDescriptors;var bs=Object.getOwnPropertySymbols;var Tf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable;var Af=(e,t,n)=>t in e?My(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||(t={}))Tf.call(t,n)&&Af(e,n,t[n]);if(bs)for(var n of bs(t))Ef.call(t,n)&&Af(e,n,t[n]);return e},Le=(e,t)=>Ty(e,Ey(t));var _f=(e,t)=>{var n={};for(var r in e)Tf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bs)for(var r of bs(e))t.indexOf(r)<0&&Ef.call(e,r)&&(n[r]=e[r]);return n};function sl(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const Ay="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_y=sl(Ay);function Nf(e){return!!e||e===""}function al(e){if(it(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=Zt(r)?Iy(r):al(r);if(o)for(const i in o)t[i]=o[i]}return t}else{if(Zt(e))return e;if($t(e))return e}}const Ny=/;(?![^(]*\))/g,Ry=/:(.+)/;function Iy(e){const t={};return e.split(Ny).forEach(n=>{if(n){const r=n.split(Ry);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ll(e){let t="";if(Zt(e))t=e;else if(it(e))for(let n=0;n<e.length;n++){const r=ll(e[n]);r&&(t+=r+" ")}else if($t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Dy(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Er(e[r],t[r]);return n}function Er(e,t){if(e===t)return!0;let n=Df(e),r=Df(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=it(e),r=it(t),n||r)return n&&r?Dy(e,t):!1;if(n=$t(e),r=$t(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,i=Object.keys(t).length;if(o!==i)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!Er(e[s],t[s]))return!1}}return String(e)===String(t)}function ul(e,t){return e.findIndex(n=>Er(n,t))}const zA=e=>e==null?"":it(e)||$t(e)&&(e.toString===Lf||!dt(e.toString))?JSON.stringify(e,Rf,2):String(e),Rf=(e,t)=>t&&t.__v_isRef?Rf(e,t.value):ho(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:vo(t)?{[`Set(${t.size})`]:[...t.values()]}:$t(t)&&!it(t)&&!Bf(t)?String(t):t,It={},po=[],vn=()=>{},Py=()=>!1,Ly=/^on[^a-z]/,Ss=e=>Ly.test(e),cl=e=>e.startsWith("onUpdate:"),le=Object.assign,If=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},By=Object.prototype.hasOwnProperty,Mt=(e,t)=>By.call(e,t),it=Array.isArray,ho=e=>ws(e)==="[object Map]",vo=e=>ws(e)==="[object Set]",Df=e=>e instanceof Date,dt=e=>typeof e=="function",Zt=e=>typeof e=="string",fl=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",Pf=e=>$t(e)&&dt(e.then)&&dt(e.catch),Lf=Object.prototype.toString,ws=e=>Lf.call(e),Fy=e=>ws(e).slice(8,-1),Bf=e=>ws(e)==="[object Object]",pl=e=>Zt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cs=sl(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},zy=/-(\w)/g,Mn=xs(e=>e.replace(zy,(t,n)=>n?n.toUpperCase():"")),Hy=/\B([A-Z])/g,mo=xs(e=>e.replace(Hy,"-$1").toLowerCase()),ks=xs(e=>e.charAt(0).toUpperCase()+e.slice(1)),hl=xs(e=>e?`on${ks(e)}`:""),di=(e,t)=>!Object.is(e,t),Os=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ms=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},vi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ff;const Vy=()=>Ff||(Ff=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ar;const Ts=[];class jy{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ar&&(this.parent=Ar,this.index=(Ar.scopes||(Ar.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(Ts.push(this),Ar=this)}off(){this.active&&(Ts.pop(),Ar=Ts[Ts.length-1])}stop(t){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function $y(e,t){t=t||Ar,t&&t.active&&t.effects.push(e)}const dl=e=>{const t=new Set(e);return t.w=0,t.n=0,t},zf=e=>(e.w&er)>0,Hf=e=>(e.n&er)>0,Wy=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=er},Jy=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const o=t[r];zf(o)&&!Hf(o)?o.delete(e):t[n++]=o,o.w&=~er,o.n&=~er}t.length=n}},vl=new WeakMap;let mi=0,er=1;const ml=30,gi=[];let _r;const Nr=Symbol(""),gl=Symbol("");class yl{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],$y(this,r)}run(){if(!this.active)return this.fn();if(!gi.includes(this))try{return gi.push(_r=this),qy(),er=1<<++mi,mi<=ml?Wy(this):Vf(this),this.fn()}finally{mi<=ml&&Jy(this),er=1<<--mi,Rr(),gi.pop();const t=gi.length;_r=t>0?gi[t-1]:void 0}}stop(){this.active&&(Vf(this),this.onStop&&this.onStop(),this.active=!1)}}function Vf(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let go=!0;const bl=[];function yo(){bl.push(go),go=!1}function qy(){bl.push(go),go=!0}function Rr(){const e=bl.pop();go=e===void 0?!0:e}function Ke(e,t,n){if(!jf())return;let r=vl.get(e);r||vl.set(e,r=new Map);let o=r.get(n);o||r.set(n,o=dl()),$f(o)}function jf(){return go&&_r!==void 0}function $f(e,t){let n=!1;mi<=ml?Hf(e)||(e.n|=er,n=!zf(e)):n=!e.has(_r),n&&(e.add(_r),_r.deps.push(e))}function $n(e,t,n,r,o,i){const s=vl.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(n==="length"&&it(e))s.forEach((l,u)=>{(u==="length"||u>=r)&&a.push(l)});else switch(n!==void 0&&a.push(s.get(n)),t){case"add":it(e)?pl(n)&&a.push(s.get("length")):(a.push(s.get(Nr)),ho(e)&&a.push(s.get(gl)));break;case"delete":it(e)||(a.push(s.get(Nr)),ho(e)&&a.push(s.get(gl)));break;case"set":ho(e)&&a.push(s.get(Nr));break}if(a.length===1)a[0]&&Sl(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Sl(dl(l))}}function Sl(e,t){for(const n of it(e)?e:[...e])(n!==_r||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Ky=sl("__proto__,__v_isRef,__isVue"),Wf=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(fl)),Uy=wl(),Gy=wl(!1,!0),Yy=wl(!0),Jf=Xy();function Xy(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=xt(this);for(let i=0,s=this.length;i<s;i++)Ke(r,"get",i+"");const o=r[t](...n);return o===-1||o===!1?r[t](...n.map(xt)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){yo();const r=xt(this)[t].apply(this,n);return Rr(),r}}),e}function wl(e=!1,t=!1){return function(r,o,i){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_raw"&&i===(e?t?hb:tp:t?Zf:Qf).get(r))return r;const s=it(r);if(!e&&s&&Mt(Jf,o))return Reflect.get(Jf,o,i);const a=Reflect.get(r,o,i);return(fl(o)?Wf.has(o):Ky(o))||(e||Ke(r,"get",o),t)?a:Be(a)?!s||!pl(o)?a.value:a:$t(a)?e?ep(a):Ir(a):a}}const Qy=qf(),Zy=qf(!0);function qf(e=!1){return function(n,r,o,i){let s=n[r];if(!e&&!Ol(o)&&(o=xt(o),s=xt(s),!it(n)&&Be(s)&&!Be(o)))return s.value=o,!0;const a=it(n)&&pl(r)?Number(r)<n.length:Mt(n,r),l=Reflect.set(n,r,o,i);return n===xt(i)&&(a?di(o,s)&&$n(n,"set",r,o):$n(n,"add",r,o)),l}}function tb(e,t){const n=Mt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&$n(e,"delete",t,void 0),r}function eb(e,t){const n=Reflect.has(e,t);return(!fl(t)||!Wf.has(t))&&Ke(e,"has",t),n}function nb(e){return Ke(e,"iterate",it(e)?"length":Nr),Reflect.ownKeys(e)}const Kf={get:Uy,set:Qy,deleteProperty:tb,has:eb,ownKeys:nb},rb={get:Yy,set(e,t){return!0},deleteProperty(e,t){return!0}},ob=le({},Kf,{get:Gy,set:Zy}),Cl=e=>e,Es=e=>Reflect.getPrototypeOf(e);function As(e,t,n=!1,r=!1){e=e.__v_raw;const o=xt(e),i=xt(t);t!==i&&!n&&Ke(o,"get",t),!n&&Ke(o,"get",i);const{has:s}=Es(o),a=r?Cl:n?Tl:yi;if(s.call(o,t))return a(e.get(t));if(s.call(o,i))return a(e.get(i));e!==o&&e.get(t)}function _s(e,t=!1){const n=this.__v_raw,r=xt(n),o=xt(e);return e!==o&&!t&&Ke(r,"has",e),!t&&Ke(r,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function Ns(e,t=!1){return e=e.__v_raw,!t&&Ke(xt(e),"iterate",Nr),Reflect.get(e,"size",e)}function Uf(e){e=xt(e);const t=xt(this);return Es(t).has.call(t,e)||(t.add(e),$n(t,"add",e,e)),this}function Gf(e,t){t=xt(t);const n=xt(this),{has:r,get:o}=Es(n);let i=r.call(n,e);i||(e=xt(e),i=r.call(n,e));const s=o.call(n,e);return n.set(e,t),i?di(t,s)&&$n(n,"set",e,t):$n(n,"add",e,t),this}function Yf(e){const t=xt(this),{has:n,get:r}=Es(t);let o=n.call(t,e);o||(e=xt(e),o=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return o&&$n(t,"delete",e,void 0),i}function Xf(){const e=xt(this),t=e.size!==0,n=e.clear();return t&&$n(e,"clear",void 0,void 0),n}function Rs(e,t){return function(r,o){const i=this,s=i.__v_raw,a=xt(s),l=t?Cl:e?Tl:yi;return!e&&Ke(a,"iterate",Nr),s.forEach((u,c)=>r.call(o,l(u),l(c),i))}}function Is(e,t,n){return function(...r){const o=this.__v_raw,i=xt(o),s=ho(i),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=o[e](...r),c=n?Cl:t?Tl:yi;return!t&&Ke(i,"iterate",l?gl:Nr),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function nr(e){return function(...t){return e==="delete"?!1:this}}function ib(){const e={get(i){return As(this,i)},get size(){return Ns(this)},has:_s,add:Uf,set:Gf,delete:Yf,clear:Xf,forEach:Rs(!1,!1)},t={get(i){return As(this,i,!1,!0)},get size(){return Ns(this)},has:_s,add:Uf,set:Gf,delete:Yf,clear:Xf,forEach:Rs(!1,!0)},n={get(i){return As(this,i,!0)},get size(){return Ns(this,!0)},has(i){return _s.call(this,i,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:Rs(!0,!1)},r={get(i){return As(this,i,!0,!0)},get size(){return Ns(this,!0)},has(i){return _s.call(this,i,!0)},add:nr("add"),set:nr("set"),delete:nr("delete"),clear:nr("clear"),forEach:Rs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Is(i,!1,!1),n[i]=Is(i,!0,!1),t[i]=Is(i,!1,!0),r[i]=Is(i,!0,!0)}),[e,n,t,r]}const[sb,ab,lb,ub]=ib();function xl(e,t){const n=t?e?ub:lb:e?ab:sb;return(r,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(Mt(n,o)&&o in r?n:r,o,i)}const cb={get:xl(!1,!1)},fb={get:xl(!1,!0)},pb={get:xl(!0,!1)},Qf=new WeakMap,Zf=new WeakMap,tp=new WeakMap,hb=new WeakMap;function db(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vb(e){return e.__v_skip||!Object.isExtensible(e)?0:db(Fy(e))}function Ir(e){return e&&e.__v_isReadonly?e:kl(e,!1,Kf,cb,Qf)}function mb(e){return kl(e,!1,ob,fb,Zf)}function ep(e){return kl(e,!0,rb,pb,tp)}function kl(e,t,n,r,o){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const s=vb(e);if(s===0)return e;const a=new Proxy(e,s===2?r:n);return o.set(e,a),a}function bo(e){return Ol(e)?bo(e.__v_raw):!!(e&&e.__v_isReactive)}function Ol(e){return!!(e&&e.__v_isReadonly)}function np(e){return bo(e)||Ol(e)}function xt(e){const t=e&&e.__v_raw;return t?xt(t):e}function Ml(e){return Ms(e,"__v_skip",!0),e}const yi=e=>$t(e)?Ir(e):e,Tl=e=>$t(e)?ep(e):e;function El(e){jf()&&(e=xt(e),e.dep||(e.dep=dl()),$f(e.dep))}function Al(e,t){e=xt(e),e.dep&&Sl(e.dep)}function Be(e){return Boolean(e&&e.__v_isRef===!0)}function Fe(e){return op(e,!1)}function rp(e){return op(e,!0)}function op(e,t){return Be(e)?e:new gb(e,t)}class gb{constructor(t,n){this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:xt(t),this._value=n?t:yi(t)}get value(){return El(this),this._value}set value(t){t=this._shallow?t:xt(t),di(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:yi(t),Al(this))}}function So(e){return Be(e)?e.value:e}const yb={get:(e,t,n)=>So(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Be(o)&&!Be(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function ip(e){return bo(e)?e:new Proxy(e,yb)}class bb{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>El(this),()=>Al(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function Sb(e){return new bb(e)}class wb{constructor(t,n,r){this._setter=n,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new yl(t,()=>{this._dirty||(this._dirty=!0,Al(this))}),this.__v_isReadonly=r}get value(){const t=xt(this);return El(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function te(e,t){let n,r;const o=dt(e);return o?(n=e,r=vn):(n=e.get,r=e.set),new wb(n,r,o||!r)}Promise.resolve();function Cb(e,t,...n){const r=e.vnode.props||It;let o=n;const i=t.startsWith("update:"),s=i&&t.slice(7);if(s&&s in r){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:p}=r[c]||It;p?o=n.map(h=>h.trim()):f&&(o=n.map(vi))}let a,l=r[a=hl(t)]||r[a=hl(Mn(t))];!l&&i&&(l=r[a=hl(mo(t))]),l&&sn(l,e,6,o);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,sn(u,e,6,o)}}function sp(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const i=e.emits;let s={},a=!1;if(!dt(e)){const l=u=>{const c=sp(u,t,!0);c&&(a=!0,le(s,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(r.set(e,null),null):(it(i)?i.forEach(l=>s[l]=null):le(s,i),r.set(e,s),s)}function _l(e,t){return!e||!Ss(t)?!1:(t=t.slice(2).replace(/Once$/,""),Mt(e,t[0].toLowerCase()+t.slice(1))||Mt(e,mo(t))||Mt(e,t))}let rn=null,ap=null;function Ds(e){const t=rn;return rn=e,ap=e&&e.type.__scopeId||null,t}function xb(e,t=rn,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Np(-1);const i=Ds(t),s=e(...o);return Ds(i),r._d&&Np(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function Nl(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:i,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:p,setupState:h,ctx:d,inheritAttrs:v}=e;let m,b;const y=Ds(e);try{if(n.shapeFlag&4){const g=o||r;m=_n(c.call(g,g,f,i,h,p,d)),b=l}else{const g=t;m=_n(g.length>1?g(i,{attrs:l,slots:a,emit:u}):g(i,null)),b=t.props?l:kb(l)}}catch(g){Si.length=0,Ws(g,e,1),m=Ge(An)}let C=m;if(b&&v!==!1){const g=Object.keys(b),{shapeFlag:O}=C;g.length&&O&(1|6)&&(s&&g.some(cl)&&(b=Ob(b,s)),C=Fr(C,b))}return n.dirs&&(C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),m=C,Ds(y),m}const kb=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ss(n))&&((t||(t={}))[n]=e[n]);return t},Ob=(e,t)=>{const n={};for(const r in e)(!cl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Mb(e,t,n){const{props:r,children:o,component:i}=e,{props:s,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?lp(r,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(s[p]!==r[p]&&!_l(u,p))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?lp(r,s,u):!0:!!s;return!1}function lp(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(t[i]!==e[i]&&!_l(n,i))return!0}return!1}function Tb({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Eb=e=>e.__isSuspense;function Ab(e,t){t&&t.pendingBranch?it(e)?t.effects.push(...e):t.effects.push(e):_0(e)}function wo(e,t){if(ee){let n=ee.provides;const r=ee.parent&&ee.parent.provides;r===n&&(n=ee.provides=Object.create(r)),n[e]=t}}function Ue(e,t,n=!1){const r=ee||rn;if(r){const o=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&dt(t)?t.call(r.proxy):t}}function _b(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jn(()=>{e.isMounted=!0}),Co(()=>{e.isUnmounting=!0}),e}const on=[Function,Array],Nb={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on},setup(e,{slots:t}){const n=Pp(),r=_b();let o;return()=>{const i=t.default&&pp(t.default(),!0);if(!i||!i.length)return;const s=xt(e),{mode:a}=s,l=i[0];if(r.isLeaving)return Il(l);const u=fp(l);if(!u)return Il(l);const c=Rl(u,s,r,n);Dl(u,c);const f=n.subTree,p=f&&fp(f);let h=!1;const{getTransitionKey:d}=u.type;if(d){const v=d();o===void 0?o=v:v!==o&&(o=v,h=!0)}if(p&&p.type!==An&&(!Br(u,p)||h)){const v=Rl(p,s,r,n);if(Dl(p,v),a==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,n.update()},Il(l);a==="in-out"&&u.type!==An&&(v.delayLeave=(m,b,y)=>{const C=cp(r,p);C[String(p.key)]=p,m._leaveCb=()=>{b(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return l}}},up=Nb;function cp(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Rl(e,t,n,r){const{appear:o,mode:i,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:p,onAfterLeave:h,onLeaveCancelled:d,onBeforeAppear:v,onAppear:m,onAfterAppear:b,onAppearCancelled:y}=t,C=String(e.key),g=cp(n,e),O=(E,H)=>{E&&sn(E,r,9,H)},x={mode:i,persisted:s,beforeEnter(E){let H=a;if(!n.isMounted)if(o)H=v||a;else return;E._leaveCb&&E._leaveCb(!0);const j=g[C];j&&Br(e,j)&&j.el._leaveCb&&j.el._leaveCb(),O(H,[E])},enter(E){let H=l,j=u,q=c;if(!n.isMounted)if(o)H=m||l,j=b||u,q=y||c;else return;let et=!1;const D=E._enterCb=at=>{et||(et=!0,at?O(q,[E]):O(j,[E]),x.delayedLeave&&x.delayedLeave(),E._enterCb=void 0)};H?(H(E,D),H.length<=1&&D()):D()},leave(E,H){const j=String(e.key);if(E._enterCb&&E._enterCb(!0),n.isUnmounting)return H();O(f,[E]);let q=!1;const et=E._leaveCb=D=>{q||(q=!0,H(),D?O(d,[E]):O(h,[E]),E._leaveCb=void 0,g[j]===e&&delete g[j])};g[j]=e,p?(p(E,et),p.length<=1&&et()):et()},clone(E){return Rl(E,t,n,r)}};return x}function Il(e){if(Ps(e))return e=Fr(e),e.children=null,e}function fp(e){return Ps(e)?e.children?e.children[0]:void 0:e}function Dl(e,t){e.shapeFlag&6&&e.component?Dl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function pp(e,t=!1){let n=[],r=0;for(let o=0;o<e.length;o++){const i=e[o];i.type===En?(i.patchFlag&128&&r++,n=n.concat(pp(i.children,t))):(t||i.type!==An)&&n.push(i)}if(r>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function mn(e){return dt(e)?{setup:e,name:e.name}:e}const Pl=e=>!!e.type.__asyncLoader,Ps=e=>e.type.__isKeepAlive;function Rb(e,t){hp(e,"a",t)}function Ib(e,t){hp(e,"da",t)}function hp(e,t,n=ee){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ls(t,r,n),n){let o=n.parent;for(;o&&o.parent;)Ps(o.parent.vnode)&&Db(r,t,n,o),o=o.parent}}function Db(e,t,n,r){const o=Ls(t,e,r,!0);Ll(()=>{If(r[t],o)},n)}function Ls(e,t,n=ee,r=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;yo(),xo(n);const a=sn(t,n,e,s);return zr(),Rr(),a});return r?o.unshift(i):o.push(i),i}}const Wn=e=>(t,n=ee)=>(!$s||e==="sp")&&Ls(e,t,n),Pb=Wn("bm"),Jn=Wn("m"),Lb=Wn("bu"),Bb=Wn("u"),Co=Wn("bum"),Ll=Wn("um"),Fb=Wn("sp"),zb=Wn("rtg"),Hb=Wn("rtc");function Vb(e,t=ee){Ls("ec",e,t)}let Bl=!0;function jb(e){const t=mp(e),n=e.proxy,r=e.ctx;Bl=!1,t.beforeCreate&&dp(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:p,beforeUpdate:h,updated:d,activated:v,deactivated:m,beforeDestroy:b,beforeUnmount:y,destroyed:C,unmounted:g,render:O,renderTracked:x,renderTriggered:E,errorCaptured:H,serverPrefetch:j,expose:q,inheritAttrs:et,components:D,directives:at,filters:Tt}=t;if(u&&$b(u,r,null,e.appContext.config.unwrapInjectedRef),s)for(const st in s){const lt=s[st];dt(lt)&&(r[st]=lt.bind(n))}if(o){const st=o.call(n,n);$t(st)&&(e.data=Ir(st))}if(Bl=!0,i)for(const st in i){const lt=i[st],Vt=dt(lt)?lt.bind(n,n):dt(lt.get)?lt.get.bind(n,n):vn,se=!dt(lt)&&dt(lt.set)?lt.set.bind(n):vn,ae=te({get:Vt,set:se});Object.defineProperty(r,st,{enumerable:!0,configurable:!0,get:()=>ae.value,set:Jt=>ae.value=Jt})}if(a)for(const st in a)vp(a[st],r,n,st);if(l){const st=dt(l)?l.call(n):l;Reflect.ownKeys(st).forEach(lt=>{wo(lt,st[lt])})}c&&dp(c,e,"c");function Z(st,lt){it(lt)?lt.forEach(Vt=>st(Vt.bind(n))):lt&&st(lt.bind(n))}if(Z(Pb,f),Z(Jn,p),Z(Lb,h),Z(Bb,d),Z(Rb,v),Z(Ib,m),Z(Vb,H),Z(Hb,x),Z(zb,E),Z(Co,y),Z(Ll,g),Z(Fb,j),it(q))if(q.length){const st=e.exposed||(e.exposed={});q.forEach(lt=>{Object.defineProperty(st,lt,{get:()=>n[lt],set:Vt=>n[lt]=Vt})})}else e.exposed||(e.exposed={});O&&e.render===vn&&(e.render=O),et!=null&&(e.inheritAttrs=et),D&&(e.components=D),at&&(e.directives=at)}function $b(e,t,n=vn,r=!1){it(e)&&(e=Fl(e));for(const o in e){const i=e[o];let s;$t(i)?"default"in i?s=Ue(i.from||o,i.default,!0):s=Ue(i.from||o):s=Ue(i),Be(s)&&r?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[o]=s}}function dp(e,t,n){sn(it(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function vp(e,t,n,r){const o=r.includes(".")?Kp(n,r):()=>n[r];if(Zt(e)){const i=t[e];dt(i)&&Hr(o,i)}else if(dt(e))Hr(o,e.bind(n));else if($t(e))if(it(e))e.forEach(i=>vp(i,t,n,r));else{const i=dt(e.handler)?e.handler.bind(n):t[e.handler];dt(i)&&Hr(o,i,e)}}function mp(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:s}}=e.appContext,a=i.get(t);let l;return a?l=a:!o.length&&!n&&!r?l=t:(l={},o.length&&o.forEach(u=>Bs(l,u,s,!0)),Bs(l,t,s)),i.set(t,l),l}function Bs(e,t,n,r=!1){const{mixins:o,extends:i}=t;i&&Bs(e,i,n,!0),o&&o.forEach(s=>Bs(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const a=Wb[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const Wb={data:gp,props:Dr,emits:Dr,methods:Dr,computed:Dr,beforeCreate:Me,created:Me,beforeMount:Me,mounted:Me,beforeUpdate:Me,updated:Me,beforeDestroy:Me,beforeUnmount:Me,destroyed:Me,unmounted:Me,activated:Me,deactivated:Me,errorCaptured:Me,serverPrefetch:Me,components:Dr,directives:Dr,watch:qb,provide:gp,inject:Jb};function gp(e,t){return t?e?function(){return le(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function Jb(e,t){return Dr(Fl(e),Fl(t))}function Fl(e){if(it(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Me(e,t){return e?[...new Set([].concat(e,t))]:t}function Dr(e,t){return e?le(le(Object.create(null),e),t):t}function qb(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const r in t)n[r]=Me(e[r],t[r]);return n}function Kb(e,t,n,r=!1){const o={},i={};Ms(i,Hs,1),e.propsDefaults=Object.create(null),yp(e,t,o,i);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);n?e.props=r?o:mb(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Ub(e,t,n,r){const{props:o,attrs:i,vnode:{patchFlag:s}}=e,a=xt(o),[l]=e.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];const h=t[p];if(l)if(Mt(i,p))h!==i[p]&&(i[p]=h,u=!0);else{const d=Mn(p);o[d]=zl(l,a,d,h,e,!1)}else h!==i[p]&&(i[p]=h,u=!0)}}}else{yp(e,t,o,i)&&(u=!0);let c;for(const f in a)(!t||!Mt(t,f)&&((c=mo(f))===f||!Mt(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(o[f]=zl(l,a,f,void 0,e,!0)):delete o[f]);if(i!==a)for(const f in i)(!t||!Mt(t,f))&&(delete i[f],u=!0)}u&&$n(e,"set","$attrs")}function yp(e,t,n,r){const[o,i]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(Cs(l))continue;const u=t[l];let c;o&&Mt(o,c=Mn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:_l(e.emitsOptions,l)||u!==r[l]&&(r[l]=u,s=!0)}if(i){const l=xt(n),u=a||It;for(let c=0;c<i.length;c++){const f=i[c];n[f]=zl(o,l,f,u[f],e,!Mt(u,f))}}return s}function zl(e,t,n,r,o,i){const s=e[n];if(s!=null){const a=Mt(s,"default");if(a&&r===void 0){const l=s.default;if(s.type!==Function&&dt(l)){const{propsDefaults:u}=o;n in u?r=u[n]:(xo(o),r=u[n]=l.call(null,t),zr())}else r=l}s[0]&&(i&&!a?r=!1:s[1]&&(r===""||r===mo(n))&&(r=!0))}return r}function bp(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const i=e.props,s={},a=[];let l=!1;if(!dt(e)){const c=f=>{l=!0;const[p,h]=bp(f,t,!0);le(s,p),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return r.set(e,po),po;if(it(i))for(let c=0;c<i.length;c++){const f=Mn(i[c]);Sp(f)&&(s[f]=It)}else if(i)for(const c in i){const f=Mn(c);if(Sp(f)){const p=i[c],h=s[f]=it(p)||dt(p)?{type:p}:p;if(h){const d=xp(Boolean,h.type),v=xp(String,h.type);h[0]=d>-1,h[1]=v<0||d<v,(d>-1||Mt(h,"default"))&&a.push(f)}}}const u=[s,a];return r.set(e,u),u}function Sp(e){return e[0]!=="$"}function wp(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Cp(e,t){return wp(e)===wp(t)}function xp(e,t){return it(t)?t.findIndex(n=>Cp(n,e)):dt(t)&&Cp(t,e)?0:-1}const kp=e=>e[0]==="_"||e==="$stable",Hl=e=>it(e)?e.map(_n):[_n(e)],Gb=(e,t,n)=>{const r=xb((...o)=>Hl(t(...o)),n);return r._c=!1,r},Op=(e,t,n)=>{const r=e._ctx;for(const o in e){if(kp(o))continue;const i=e[o];if(dt(i))t[o]=Gb(o,i,r);else if(i!=null){const s=Hl(i);t[o]=()=>s}}},Mp=(e,t)=>{const n=Hl(t);e.slots.default=()=>n},Yb=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=xt(t),Ms(t,"_",n)):Op(t,e.slots={})}else e.slots={},t&&Mp(e,t);Ms(e.slots,Hs,1)},Xb=(e,t,n)=>{const{vnode:r,slots:o}=e;let i=!0,s=It;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(le(o,t),!n&&a===1&&delete o._):(i=!t.$stable,Op(t,o)),s=t}else t&&(Mp(e,t),s={default:1});if(i)for(const a in o)!kp(a)&&!(a in s)&&delete o[a]};function HA(e,t){const n=rn;if(n===null)return e;const r=n.proxy,o=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,l,u=It]=t[i];dt(s)&&(s={mounted:s,updated:s}),s.deep&&Vr(a),o.push({dir:s,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function Pr(e,t,n,r){const o=e.dirs,i=t&&t.dirs;for(let s=0;s<o.length;s++){const a=o[s];i&&(a.oldValue=i[s].value);let l=a.dir[r];l&&(yo(),sn(l,n,8,[e.el,a,e,t]),Rr())}}function Tp(){return{app:null,config:{isNativeTag:Py,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qb=0;function Zb(e,t){return function(r,o=null){o!=null&&!$t(o)&&(o=null);const i=Tp(),s=new Set;let a=!1;const l=i.app={_uid:Qb++,_component:r,_props:o,_container:null,_context:i,_instance:null,version:R0,get config(){return i.config},set config(u){},use(u,...c){return s.has(u)||(u&&dt(u.install)?(s.add(u),u.install(l,...c)):dt(u)&&(s.add(u),u(l,...c))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,c){return c?(i.components[u]=c,l):i.components[u]},directive(u,c){return c?(i.directives[u]=c,l):i.directives[u]},mount(u,c,f){if(!a){const p=Ge(r,o);return p.appContext=i,c&&t?t(p,u):e(p,u,f),a=!0,l._container=u,u.__vue_app__=l,Gl(p.component)||p.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return i.provides[u]=c,l}};return l}}const Te=Ab;function t0(e){return e0(e)}function e0(e,t){const n=Vy();n.__VUE__=!0;const{insert:r,remove:o,patchProp:i,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:p,setScopeId:h=vn,cloneNode:d,insertStaticContent:v}=e,m=(S,w,k,N=null,_=null,F=null,W=!1,P=null,B=!!w.dynamicChildren)=>{if(S===w)return;S&&!Br(S,w)&&(N=U(S),Gt(S,_,F,!0),S=null),w.patchFlag===-2&&(B=!1,w.dynamicChildren=null);const{type:I,ref:X,shapeFlag:K}=w;switch(I){case Wl:b(S,w,k,N);break;case An:y(S,w,k,N);break;case Jl:S==null&&C(w,k,N,W);break;case En:at(S,w,k,N,_,F,W,P,B);break;default:K&1?x(S,w,k,N,_,F,W,P,B):K&6?Tt(S,w,k,N,_,F,W,P,B):(K&64||K&128)&&I.process(S,w,k,N,_,F,W,P,B,St)}X!=null&&_&&Vl(X,S&&S.ref,F,w||S,!w)},b=(S,w,k,N)=>{if(S==null)r(w.el=a(w.children),k,N);else{const _=w.el=S.el;w.children!==S.children&&u(_,w.children)}},y=(S,w,k,N)=>{S==null?r(w.el=l(w.children||""),k,N):w.el=S.el},C=(S,w,k,N)=>{[S.el,S.anchor]=v(S.children,w,k,N)},g=({el:S,anchor:w},k,N)=>{let _;for(;S&&S!==w;)_=p(S),r(S,k,N),S=_;r(w,k,N)},O=({el:S,anchor:w})=>{let k;for(;S&&S!==w;)k=p(S),o(S),S=k;o(w)},x=(S,w,k,N,_,F,W,P,B)=>{W=W||w.type==="svg",S==null?E(w,k,N,_,F,W,P,B):q(S,w,_,F,W,P,B)},E=(S,w,k,N,_,F,W,P)=>{let B,I;const{type:X,props:K,shapeFlag:tt,transition:ot,patchFlag:mt,dirs:At}=S;if(S.el&&d!==void 0&&mt===-1)B=S.el=d(S.el);else{if(B=S.el=s(S.type,F,K&&K.is,K),tt&8?c(B,S.children):tt&16&&j(S.children,B,null,N,_,F&&X!=="foreignObject",W,P),At&&Pr(S,null,N,"created"),K){for(const Rt in K)Rt!=="value"&&!Cs(Rt)&&i(B,Rt,null,K[Rt],F,S.children,N,_,z);"value"in K&&i(B,"value",null,K.value),(I=K.onVnodeBeforeMount)&&Tn(I,N,S)}H(B,S,S.scopeId,W,N)}At&&Pr(S,null,N,"beforeMount");const _t=(!_||_&&!_.pendingBranch)&&ot&&!ot.persisted;_t&&ot.beforeEnter(B),r(B,w,k),((I=K&&K.onVnodeMounted)||_t||At)&&Te(()=>{I&&Tn(I,N,S),_t&&ot.enter(B),At&&Pr(S,null,N,"mounted")},_)},H=(S,w,k,N,_)=>{if(k&&h(S,k),N)for(let F=0;F<N.length;F++)h(S,N[F]);if(_){let F=_.subTree;if(w===F){const W=_.vnode;H(S,W,W.scopeId,W.slotScopeIds,_.parent)}}},j=(S,w,k,N,_,F,W,P,B=0)=>{for(let I=B;I<S.length;I++){const X=S[I]=P?rr(S[I]):_n(S[I]);m(null,X,w,k,N,_,F,W,P)}},q=(S,w,k,N,_,F,W)=>{const P=w.el=S.el;let{patchFlag:B,dynamicChildren:I,dirs:X}=w;B|=S.patchFlag&16;const K=S.props||It,tt=w.props||It;let ot;(ot=tt.onVnodeBeforeUpdate)&&Tn(ot,k,w,S),X&&Pr(w,S,k,"beforeUpdate");const mt=_&&w.type!=="foreignObject";if(I?et(S.dynamicChildren,I,P,k,N,mt,F):W||Vt(S,w,P,null,k,N,mt,F,!1),B>0){if(B&16)D(P,w,K,tt,k,N,_);else if(B&2&&K.class!==tt.class&&i(P,"class",null,tt.class,_),B&4&&i(P,"style",K.style,tt.style,_),B&8){const At=w.dynamicProps;for(let _t=0;_t<At.length;_t++){const Rt=At[_t],qe=K[Rt],tr=tt[Rt];(tr!==qe||Rt==="value")&&i(P,Rt,qe,tr,_,S.children,k,N,z)}}B&1&&S.children!==w.children&&c(P,w.children)}else!W&&I==null&&D(P,w,K,tt,k,N,_);((ot=tt.onVnodeUpdated)||X)&&Te(()=>{ot&&Tn(ot,k,w,S),X&&Pr(w,S,k,"updated")},N)},et=(S,w,k,N,_,F,W)=>{for(let P=0;P<w.length;P++){const B=S[P],I=w[P],X=B.el&&(B.type===En||!Br(B,I)||B.shapeFlag&(6|64))?f(B.el):k;m(B,I,X,null,N,_,F,W,!0)}},D=(S,w,k,N,_,F,W)=>{if(k!==N){for(const P in N){if(Cs(P))continue;const B=N[P],I=k[P];B!==I&&P!=="value"&&i(S,P,I,B,W,w.children,_,F,z)}if(k!==It)for(const P in k)!Cs(P)&&!(P in N)&&i(S,P,k[P],null,W,w.children,_,F,z);"value"in N&&i(S,"value",k.value,N.value)}},at=(S,w,k,N,_,F,W,P,B)=>{const I=w.el=S?S.el:a(""),X=w.anchor=S?S.anchor:a("");let{patchFlag:K,dynamicChildren:tt,slotScopeIds:ot}=w;ot&&(P=P?P.concat(ot):ot),S==null?(r(I,k,N),r(X,k,N),j(w.children,k,X,_,F,W,P,B)):K>0&&K&64&&tt&&S.dynamicChildren?(et(S.dynamicChildren,tt,k,_,F,W,P),(w.key!=null||_&&w===_.subTree)&&jl(S,w,!0)):Vt(S,w,k,X,_,F,W,P,B)},Tt=(S,w,k,N,_,F,W,P,B)=>{w.slotScopeIds=P,S==null?w.shapeFlag&512?_.ctx.activate(w,k,N,W,B):gt(w,k,N,_,F,W,B):Z(S,w,B)},gt=(S,w,k,N,_,F,W)=>{const P=S.component=b0(S,N,_);if(Ps(S)&&(P.ctx.renderer=St),S0(P),P.asyncDep){if(_&&_.registerDep(P,st),!S.el){const B=P.subTree=Ge(An);y(null,B,w,k)}return}st(P,S,w,k,_,F,W)},Z=(S,w,k)=>{const N=w.component=S.component;if(Mb(S,w,k))if(N.asyncDep&&!N.asyncResolved){lt(N,w,k);return}else N.next=w,E0(N.update),N.update();else w.component=S.component,w.el=S.el,N.vnode=w},st=(S,w,k,N,_,F,W)=>{const P=()=>{if(S.isMounted){let{next:X,bu:K,u:tt,parent:ot,vnode:mt}=S,At=X,_t;B.allowRecurse=!1,X?(X.el=mt.el,lt(S,X,W)):X=mt,K&&Os(K),(_t=X.props&&X.props.onVnodeBeforeUpdate)&&Tn(_t,ot,X,mt),B.allowRecurse=!0;const Rt=Nl(S),qe=S.subTree;S.subTree=Rt,m(qe,Rt,f(qe.el),U(qe),S,_,F),X.el=Rt.el,At===null&&Tb(S,Rt.el),tt&&Te(tt,_),(_t=X.props&&X.props.onVnodeUpdated)&&Te(()=>Tn(_t,ot,X,mt),_)}else{let X;const{el:K,props:tt}=w,{bm:ot,m:mt,parent:At}=S,_t=Pl(w);if(B.allowRecurse=!1,ot&&Os(ot),!_t&&(X=tt&&tt.onVnodeBeforeMount)&&Tn(X,At,w),B.allowRecurse=!0,K&&ut){const Rt=()=>{S.subTree=Nl(S),ut(K,S.subTree,S,_,null)};_t?w.type.__asyncLoader().then(()=>!S.isUnmounted&&Rt()):Rt()}else{const Rt=S.subTree=Nl(S);m(null,Rt,k,N,S,_,F),w.el=Rt.el}if(mt&&Te(mt,_),!_t&&(X=tt&&tt.onVnodeMounted)){const Rt=w;Te(()=>Tn(X,At,Rt),_)}w.shapeFlag&256&&S.a&&Te(S.a,_),S.isMounted=!0,w=k=N=null}},B=new yl(P,()=>Vp(S.update),S.scope),I=S.update=B.run.bind(B);I.id=S.uid,B.allowRecurse=I.allowRecurse=!0,I()},lt=(S,w,k)=>{w.component=S;const N=S.vnode.props;S.vnode=w,S.next=null,Ub(S,w.props,N,k),Xb(S,w.children,k),yo(),Zl(void 0,S.update),Rr()},Vt=(S,w,k,N,_,F,W,P,B=!1)=>{const I=S&&S.children,X=S?S.shapeFlag:0,K=w.children,{patchFlag:tt,shapeFlag:ot}=w;if(tt>0){if(tt&128){ae(I,K,k,N,_,F,W,P,B);return}else if(tt&256){se(I,K,k,N,_,F,W,P,B);return}}ot&8?(X&16&&z(I,_,F),K!==I&&c(k,K)):X&16?ot&16?ae(I,K,k,N,_,F,W,P,B):z(I,_,F,!0):(X&8&&c(k,""),ot&16&&j(K,k,N,_,F,W,P,B))},se=(S,w,k,N,_,F,W,P,B)=>{S=S||po,w=w||po;const I=S.length,X=w.length,K=Math.min(I,X);let tt;for(tt=0;tt<K;tt++){const ot=w[tt]=B?rr(w[tt]):_n(w[tt]);m(S[tt],ot,k,null,_,F,W,P,B)}I>X?z(S,_,F,!0,!1,K):j(w,k,N,_,F,W,P,B,K)},ae=(S,w,k,N,_,F,W,P,B)=>{let I=0;const X=w.length;let K=S.length-1,tt=X-1;for(;I<=K&&I<=tt;){const ot=S[I],mt=w[I]=B?rr(w[I]):_n(w[I]);if(Br(ot,mt))m(ot,mt,k,null,_,F,W,P,B);else break;I++}for(;I<=K&&I<=tt;){const ot=S[K],mt=w[tt]=B?rr(w[tt]):_n(w[tt]);if(Br(ot,mt))m(ot,mt,k,null,_,F,W,P,B);else break;K--,tt--}if(I>K){if(I<=tt){const ot=tt+1,mt=ot<X?w[ot].el:N;for(;I<=tt;)m(null,w[I]=B?rr(w[I]):_n(w[I]),k,mt,_,F,W,P,B),I++}}else if(I>tt)for(;I<=K;)Gt(S[I],_,F,!0),I++;else{const ot=I,mt=I,At=new Map;for(I=mt;I<=tt;I++){const Q=w[I]=B?rr(w[I]):_n(w[I]);Q.key!=null&&At.set(Q.key,I)}let _t,Rt=0;const qe=tt-mt+1;let tr=!1,ms=0;const M=new Array(qe);for(I=0;I<qe;I++)M[I]=0;for(I=ot;I<=K;I++){const Q=S[I];if(Rt>=qe){Gt(Q,_,F,!0);continue}let ht;if(Q.key!=null)ht=At.get(Q.key);else for(_t=mt;_t<=tt;_t++)if(M[_t-mt]===0&&Br(Q,w[_t])){ht=_t;break}ht===void 0?Gt(Q,_,F,!0):(M[ht-mt]=I+1,ht>=ms?ms=ht:tr=!0,m(Q,w[ht],k,null,_,F,W,P,B),Rt++)}const Y=tr?n0(M):po;for(_t=Y.length-1,I=qe-1;I>=0;I--){const Q=mt+I,ht=w[Q],yt=Q+1<X?w[Q+1].el:N;M[I]===0?m(null,ht,k,yt,_,F,W,P,B):tr&&(_t<0||I!==Y[_t]?Jt(ht,k,yt,2):_t--)}}},Jt=(S,w,k,N,_=null)=>{const{el:F,type:W,transition:P,children:B,shapeFlag:I}=S;if(I&6){Jt(S.component.subTree,w,k,N);return}if(I&128){S.suspense.move(w,k,N);return}if(I&64){W.move(S,w,k,St);return}if(W===En){r(F,w,k);for(let K=0;K<B.length;K++)Jt(B[K],w,k,N);r(S.anchor,w,k);return}if(W===Jl){g(S,w,k);return}if(N!==2&&I&1&&P)if(N===0)P.beforeEnter(F),r(F,w,k),Te(()=>P.enter(F),_);else{const{leave:K,delayLeave:tt,afterLeave:ot}=P,mt=()=>r(F,w,k),At=()=>{K(F,()=>{mt(),ot&&ot()})};tt?tt(F,mt,At):At()}else r(F,w,k)},Gt=(S,w,k,N=!1,_=!1)=>{const{type:F,props:W,ref:P,children:B,dynamicChildren:I,shapeFlag:X,patchFlag:K,dirs:tt}=S;if(P!=null&&Vl(P,null,k,S,!0),X&256){w.ctx.deactivate(S);return}const ot=X&1&&tt,mt=!Pl(S);let At;if(mt&&(At=W&&W.onVnodeBeforeUnmount)&&Tn(At,w,S),X&6)J(S.component,k,N);else{if(X&128){S.suspense.unmount(k,N);return}ot&&Pr(S,null,w,"beforeUnmount"),X&64?S.type.remove(S,w,k,_,St,N):I&&(F!==En||K>0&&K&64)?z(I,w,k,!1,!0):(F===En&&K&(128|256)||!_&&X&16)&&z(B,w,k),N&&Je(S)}(mt&&(At=W&&W.onVnodeUnmounted)||ot)&&Te(()=>{At&&Tn(At,w,S),ot&&Pr(S,null,w,"unmounted")},k)},Je=S=>{const{type:w,el:k,anchor:N,transition:_}=S;if(w===En){A(k,N);return}if(w===Jl){O(S);return}const F=()=>{o(k),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(S.shapeFlag&1&&_&&!_.persisted){const{leave:W,delayLeave:P}=_,B=()=>W(k,F);P?P(S.el,F,B):B()}else F()},A=(S,w)=>{let k;for(;S!==w;)k=p(S),o(S),S=k;o(w)},J=(S,w,k)=>{const{bum:N,scope:_,update:F,subTree:W,um:P}=S;N&&Os(N),_.stop(),F&&(F.active=!1,Gt(W,S,w,k)),P&&Te(P,w),Te(()=>{S.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},z=(S,w,k,N=!1,_=!1,F=0)=>{for(let W=F;W<S.length;W++)Gt(S[W],w,k,N,_)},U=S=>S.shapeFlag&6?U(S.component.subTree):S.shapeFlag&128?S.suspense.next():p(S.anchor||S.el),Ct=(S,w,k)=>{S==null?w._vnode&&Gt(w._vnode,null,null,!0):m(w._vnode||null,S,w,null,null,null,k),Wp(),w._vnode=S},St={p:m,um:Gt,m:Jt,r:Je,mt:gt,mc:j,pc:Vt,pbc:et,n:U,o:e};let ct,ut;return t&&([ct,ut]=t(St)),{render:Ct,hydrate:ct,createApp:Zb(Ct,ct)}}function Vl(e,t,n,r,o=!1){if(it(e)){e.forEach((p,h)=>Vl(p,t&&(it(t)?t[h]:t),n,r,o));return}if(Pl(r)&&!o)return;const i=r.shapeFlag&4?Gl(r.component)||r.component.proxy:r.el,s=o?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===It?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Zt(u)?(c[u]=null,Mt(f,u)&&(f[u]=null)):Be(u)&&(u.value=null)),Zt(l)){const p=()=>{c[l]=s,Mt(f,l)&&(f[l]=s)};s?(p.id=-1,Te(p,n)):p()}else if(Be(l)){const p=()=>{l.value=s};s?(p.id=-1,Te(p,n)):p()}else dt(l)&&or(l,a,12,[s,c])}function Tn(e,t,n,r=null){sn(e,t,7,[n,r])}function jl(e,t,n=!1){const r=e.children,o=t.children;if(it(r)&&it(o))for(let i=0;i<r.length;i++){const s=r[i];let a=o[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[i]=rr(o[i]),a.el=s.el),n||jl(s,a))}}function n0(e){const t=e.slice(),n=[0];let r,o,i,s,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(o=n[n.length-1],e[o]<u){t[r]=o,n.push(r);continue}for(i=0,s=n.length-1;i<s;)a=i+s>>1,e[n[a]]<u?i=a+1:s=a;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=t[s];return n}const r0=e=>e.__isTeleport,bi=e=>e&&(e.disabled||e.disabled===""),Ep=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,$l=(e,t)=>{const n=e&&e.to;return Zt(n)?t?t(n):null:n},o0={__isTeleport:!0,process(e,t,n,r,o,i,s,a,l,u){const{mc:c,pc:f,pbc:p,o:{insert:h,querySelector:d,createText:v,createComment:m}}=u,b=bi(t.props);let{shapeFlag:y,children:C,dynamicChildren:g}=t;if(e==null){const O=t.el=v(""),x=t.anchor=v("");h(O,n,r),h(x,n,r);const E=t.target=$l(t.props,d),H=t.targetAnchor=v("");E&&(h(H,E),s=s||Ep(E));const j=(q,et)=>{y&16&&c(C,q,et,o,i,s,a,l)};b?j(n,x):E&&j(E,H)}else{t.el=e.el;const O=t.anchor=e.anchor,x=t.target=e.target,E=t.targetAnchor=e.targetAnchor,H=bi(e.props),j=H?n:x,q=H?O:E;if(s=s||Ep(x),g?(p(e.dynamicChildren,g,j,o,i,s,a),jl(e,t,!0)):l||f(e,t,j,q,o,i,s,a,!1),b)H||Fs(t,n,O,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const et=t.target=$l(t.props,d);et&&Fs(t,et,null,u,0)}else H&&Fs(t,x,E,u,1)}},remove(e,t,n,r,{um:o,o:{remove:i}},s){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:f,props:p}=e;if(f&&i(c),(s||!bi(p))&&(i(u),a&16))for(let h=0;h<l.length;h++){const d=l[h];o(d,t,n,!0,!!d.dynamicChildren)}},move:Fs,hydrate:i0};function Fs(e,t,n,{o:{insert:r},m:o},i=2){i===0&&r(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:l,children:u,props:c}=e,f=i===2;if(f&&r(s,t,n),(!f||bi(c))&&l&16)for(let p=0;p<u.length;p++)o(u[p],t,n,2);f&&r(a,t,n)}function i0(e,t,n,r,o,i,{o:{nextSibling:s,parentNode:a,querySelector:l}},u){const c=t.target=$l(t.props,l);if(c){const f=c._lpa||c.firstChild;t.shapeFlag&16&&(bi(t.props)?(t.anchor=u(s(e),t,a(e),n,r,o,i),t.targetAnchor=f):(t.anchor=s(e),t.targetAnchor=u(f,t,c,n,r,o,i)),c._lpa=t.targetAnchor&&s(t.targetAnchor))}return t.anchor&&s(t.anchor)}const s0=o0,Ap="components";function VA(e,t){return l0(Ap,e,!0,t)||e}const a0=Symbol();function l0(e,t,n=!0,r=!1){const o=rn||ee;if(o){const i=o.type;if(e===Ap){const a=k0(i);if(a&&(a===t||a===Mn(t)||a===ks(Mn(t))))return i}const s=_p(o[e]||i[e],t)||_p(o.appContext[e],t);return!s&&r?i:s}}function _p(e,t){return e&&(e[t]||e[Mn(t)]||e[ks(Mn(t))])}const En=Symbol(void 0),Wl=Symbol(void 0),An=Symbol(void 0),Jl=Symbol(void 0),Si=[];let Lr=null;function u0(e=!1){Si.push(Lr=e?null:[])}function c0(){Si.pop(),Lr=Si[Si.length-1]||null}let zs=1;function Np(e){zs+=e}function Rp(e){return e.dynamicChildren=zs>0?Lr||po:null,c0(),zs>0&&Lr&&Lr.push(e),e}function jA(e,t,n,r,o,i){return Rp(Dp(e,t,n,r,o,i,!0))}function f0(e,t,n,r,o){return Rp(Ge(e,t,n,r,o,!0))}function ql(e){return e?e.__v_isVNode===!0:!1}function Br(e,t){return e.type===t.type&&e.key===t.key}const Hs="__vInternal",Ip=({key:e})=>e!=null?e:null,Vs=({ref:e})=>e!=null?Zt(e)||Be(e)||dt(e)?{i:rn,r:e}:e:null;function Dp(e,t=null,n=null,r=0,o=null,i=e===En?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ip(t),ref:t&&Vs(t),scopeId:ap,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(Kl(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Zt(n)?8:16),zs>0&&!s&&Lr&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Lr.push(l),l}const Ge=p0;function p0(e,t=null,n=null,r=0,o=null,i=!1){if((!e||e===a0)&&(e=An),ql(e)){const a=Fr(e,t,!0);return n&&Kl(a,n),a}if(O0(e)&&(e=e.__vccOpts),t){t=h0(t);let{class:a,style:l}=t;a&&!Zt(a)&&(t.class=ll(a)),$t(l)&&(np(l)&&!it(l)&&(l=le({},l)),t.style=al(l))}const s=Zt(e)?1:Eb(e)?128:r0(e)?64:$t(e)?4:dt(e)?2:0;return Dp(e,t,n,r,o,s,i,!0)}function h0(e){return e?np(e)||Hs in e?le({},e):e:null}function Fr(e,t,n=!1){const{props:r,ref:o,patchFlag:i,children:s}=e,a=t?v0(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Ip(a),ref:t&&t.ref?n&&o?it(o)?o.concat(Vs(t)):[o,Vs(t)]:Vs(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==En?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fr(e.ssContent),ssFallback:e.ssFallback&&Fr(e.ssFallback),el:e.el,anchor:e.anchor}}function d0(e=" ",t=0){return Ge(Wl,null,e,t)}function $A(e="",t=!1){return t?(u0(),f0(An,null,e)):Ge(An,null,e)}function _n(e){return e==null||typeof e=="boolean"?Ge(An):it(e)?Ge(En,null,e.slice()):typeof e=="object"?rr(e):Ge(Wl,null,String(e))}function rr(e){return e.el===null||e.memo?e:Fr(e)}function Kl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(it(t))n=16;else if(typeof t=="object")if(r&(1|64)){const o=t.default;o&&(o._c&&(o._d=!1),Kl(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(Hs in t)?t._ctx=rn:o===3&&rn&&(rn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:rn},n=32):(t=String(t),r&64?(n=16,t=[d0(t)]):n=8);e.children=t,e.shapeFlag|=n}function v0(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=ll([t.class,r.class]));else if(o==="style")t.style=al([t.style,r.style]);else if(Ss(o)){const i=t[o],s=r[o];i!==s&&!(it(i)&&i.includes(s))&&(t[o]=i?[].concat(i,s):s)}else o!==""&&(t[o]=r[o])}return t}function WA(e,t,n,r){let o;const i=n&&n[r];if(it(e)||Zt(e)){o=new Array(e.length);for(let s=0,a=e.length;s<a;s++)o[s]=t(e[s],s,void 0,i&&i[s])}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,i&&i[s])}else if($t(e))if(e[Symbol.iterator])o=Array.from(e,(s,a)=>t(s,a,void 0,i&&i[a]));else{const s=Object.keys(e);o=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];o[a]=t(e[u],u,a,i&&i[a])}}else o=[];return n&&(n[r]=o),o}const Ul=e=>e?Lp(e)?Gl(e)||e.proxy:Ul(e.parent):null,js=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ul(e.parent),$root:e=>Ul(e.root),$emit:e=>e.emit,$options:e=>mp(e),$forceUpdate:e=>()=>Vp(e.update),$nextTick:e=>Nn.bind(e.proxy),$watch:e=>N0.bind(e)}),m0={get({_:e},t){const{ctx:n,setupState:r,data:o,props:i,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(r!==It&&Mt(r,t))return s[t]=1,r[t];if(o!==It&&Mt(o,t))return s[t]=2,o[t];if((u=e.propsOptions[0])&&Mt(u,t))return s[t]=3,i[t];if(n!==It&&Mt(n,t))return s[t]=4,n[t];Bl&&(s[t]=0)}}const c=js[t];let f,p;if(c)return t==="$attrs"&&Ke(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==It&&Mt(n,t))return s[t]=4,n[t];if(p=l.config.globalProperties,Mt(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:i}=e;if(o!==It&&Mt(o,t))o[t]=n;else if(r!==It&&Mt(r,t))r[t]=n;else if(Mt(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:i}},s){let a;return!!n[s]||e!==It&&Mt(e,s)||t!==It&&Mt(t,s)||(a=i[0])&&Mt(a,s)||Mt(r,s)||Mt(js,s)||Mt(o.config.globalProperties,s)}},g0=Tp();let y0=0;function b0(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||g0,i={uid:y0++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,update:null,scope:new jy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bp(r,o),emitsOptions:sp(r,o),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Cb.bind(null,i),e.ce&&e.ce(i),i}let ee=null;const Pp=()=>ee||rn,xo=e=>{ee=e,e.scope.on()},zr=()=>{ee&&ee.scope.off(),ee=null};function Lp(e){return e.vnode.shapeFlag&4}let $s=!1;function S0(e,t=!1){$s=t;const{props:n,children:r}=e.vnode,o=Lp(e);Kb(e,n,o,t),Yb(e,r);const i=o?w0(e,t):void 0;return $s=!1,i}function w0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ml(new Proxy(e.ctx,m0));const{setup:r}=n;if(r){const o=e.setupContext=r.length>1?x0(e):null;xo(e),yo();const i=or(r,e,0,[e.props,o]);if(Rr(),zr(),Pf(i)){if(i.then(zr,zr),t)return i.then(s=>{Bp(e,s,t)}).catch(s=>{Ws(s,e,0)});e.asyncDep=i}else Bp(e,i,t)}else zp(e,t)}function Bp(e,t,n){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=ip(t)),zp(e,n)}let Fp;function zp(e,t,n){const r=e.type;if(!e.render){if(!t&&Fp&&!r.render){const o=r.template;if(o){const{isCustomElement:i,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=le(le({isCustomElement:i,delimiters:a},s),l);r.render=Fp(o,u)}}e.render=r.render||vn}xo(e),yo(),jb(e),Rr(),zr()}function C0(e){return new Proxy(e.attrs,{get(t,n){return Ke(e,"get","$attrs"),t[n]}})}function x0(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=C0(e))},slots:e.slots,emit:e.emit,expose:t}}function Gl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ip(Ml(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in js)return js[n](e)}}))}function k0(e){return dt(e)&&e.displayName||e.name}function O0(e){return dt(e)&&"__vccOpts"in e}function or(e,t,n,r){let o;try{o=r?e(...r):e()}catch(i){Ws(i,t,n)}return o}function sn(e,t,n,r){if(dt(e)){const i=or(e,t,n,r);return i&&Pf(i)&&i.catch(s=>{Ws(s,t,n)}),i}const o=[];for(let i=0;i<e.length;i++)o.push(sn(e[i],t,n,r));return o}function Ws(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const s=t.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){or(l,null,10,[e,s,a]);return}}M0(e,n,o,r)}function M0(e,t,n,r=!0){console.error(e)}let Js=!1,Yl=!1;const Ye=[];let qn=0;const wi=[];let Ci=null,ko=0;const xi=[];let ir=null,Oo=0;const Hp=Promise.resolve();let Xl=null,Ql=null;function Nn(e){const t=Xl||Hp;return e?t.then(this?e.bind(this):e):t}function T0(e){let t=qn+1,n=Ye.length;for(;t<n;){const r=t+n>>>1;ki(Ye[r])<e?t=r+1:n=r}return t}function Vp(e){(!Ye.length||!Ye.includes(e,Js&&e.allowRecurse?qn+1:qn))&&e!==Ql&&(e.id==null?Ye.push(e):Ye.splice(T0(e.id),0,e),jp())}function jp(){!Js&&!Yl&&(Yl=!0,Xl=Hp.then(Jp))}function E0(e){const t=Ye.indexOf(e);t>qn&&Ye.splice(t,1)}function $p(e,t,n,r){it(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),jp()}function A0(e){$p(e,Ci,wi,ko)}function _0(e){$p(e,ir,xi,Oo)}function Zl(e,t=null){if(wi.length){for(Ql=t,Ci=[...new Set(wi)],wi.length=0,ko=0;ko<Ci.length;ko++)Ci[ko]();Ci=null,ko=0,Ql=null,Zl(e,t)}}function Wp(e){if(xi.length){const t=[...new Set(xi)];if(xi.length=0,ir){ir.push(...t);return}for(ir=t,ir.sort((n,r)=>ki(n)-ki(r)),Oo=0;Oo<ir.length;Oo++)ir[Oo]();ir=null,Oo=0}}const ki=e=>e.id==null?1/0:e.id;function Jp(e){Yl=!1,Js=!0,Zl(e),Ye.sort((n,r)=>ki(n)-ki(r));const t=vn;try{for(qn=0;qn<Ye.length;qn++){const n=Ye[qn];n&&n.active!==!1&&or(n,null,14)}}finally{qn=0,Ye.length=0,Wp(),Js=!1,Xl=null,(Ye.length||wi.length||xi.length)&&Jp(e)}}function qs(e,t){return tu(e,null,t)}const qp={};function Hr(e,t,n){return tu(e,t,n)}function tu(e,t,{immediate:n,deep:r,flush:o,onTrack:i,onTrigger:s}=It){const a=ee;let l,u=!1,c=!1;if(Be(e)?(l=()=>e.value,u=!!e._shallow):bo(e)?(l=()=>e,r=!0):it(e)?(c=!0,u=e.some(bo),l=()=>e.map(b=>{if(Be(b))return b.value;if(bo(b))return Vr(b);if(dt(b))return or(b,a,2)})):dt(e)?t?l=()=>or(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),sn(e,a,3,[p])}:l=vn,t&&r){const b=l;l=()=>Vr(b())}let f,p=b=>{f=m.onStop=()=>{or(b,a,4)}};if($s)return p=vn,t?n&&sn(t,a,3,[l(),c?[]:void 0,p]):l(),vn;let h=c?[]:qp;const d=()=>{if(!!m.active)if(t){const b=m.run();(r||u||(c?b.some((y,C)=>di(y,h[C])):di(b,h)))&&(f&&f(),sn(t,a,3,[b,h===qp?void 0:h,p]),h=b)}else m.run()};d.allowRecurse=!!t;let v;o==="sync"?v=d:o==="post"?v=()=>Te(d,a&&a.suspense):v=()=>{!a||a.isMounted?A0(d):d()};const m=new yl(l,v);return t?n?d():h=m.run():o==="post"?Te(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&If(a.scope.effects,m)}}function N0(e,t,n){const r=this.proxy,o=Zt(e)?e.includes(".")?Kp(r,e):()=>r[e]:e.bind(r,r);let i;dt(t)?i=t:(i=t.handler,n=t);const s=ee;xo(this);const a=tu(o,i.bind(r),n);return s?xo(s):zr(),a}function Kp(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function Vr(e,t){if(!$t(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Be(e))Vr(e.value,t);else if(it(e))for(let n=0;n<e.length;n++)Vr(e[n],t);else if(vo(e)||ho(e))e.forEach(n=>{Vr(n,t)});else if(Bf(e))for(const n in e)Vr(e[n],t);return e}function gn(e,t,n){const r=arguments.length;return r===2?$t(t)&&!it(t)?ql(t)?Ge(e,null,[t]):Ge(e,t):Ge(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ql(n)&&(n=[n]),Ge(e,t,n))}const R0="3.2.23",I0="http://www.w3.org/2000/svg",Mo=typeof document!="undefined"?document:null,Up=new Map,D0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t?Mo.createElementNS(I0,e):Mo.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Mo.createTextNode(e),createComment:e=>Mo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Mo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r){const o=n?n.previousSibling:t.lastChild;let i=Up.get(e);if(!i){const s=Mo.createElement("template");if(s.innerHTML=r?`<svg>${e}</svg>`:e,i=s.content,r){const a=i.firstChild;for(;a.firstChild;)i.appendChild(a.firstChild);i.removeChild(a)}Up.set(e,i)}return t.insertBefore(i.cloneNode(!0),n),[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function P0(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function L0(e,t,n){const r=e.style,o=Zt(n);if(n&&!o){for(const i in n)eu(r,i,n[i]);if(t&&!Zt(t))for(const i in t)n[i]==null&&eu(r,i,"")}else{const i=r.display;o?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const Gp=/\s*!important$/;function eu(e,t,n){if(it(n))n.forEach(r=>eu(e,t,r));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=B0(e,t);Gp.test(n)?e.setProperty(mo(r),n.replace(Gp,""),"important"):e[r]=n}}const Yp=["Webkit","Moz","ms"],nu={};function B0(e,t){const n=nu[t];if(n)return n;let r=Mn(t);if(r!=="filter"&&r in e)return nu[t]=r;r=ks(r);for(let o=0;o<Yp.length;o++){const i=Yp[o]+r;if(i in e)return nu[t]=i}return t}const Xp="http://www.w3.org/1999/xlink";function F0(e,t,n,r,o){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Xp,t.slice(6,t.length)):e.setAttributeNS(Xp,t,n);else{const i=_y(t);n==null||i&&!Nf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function z0(e,t,n,r,o,i,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,o,i),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n==null?"":n;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const a=typeof e[t];if(a==="boolean"){e[t]=Nf(n);return}else if(n==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let Ks=Date.now,Qp=!1;if(typeof window!="undefined"){Ks()>document.createEvent("Event").timeStamp&&(Ks=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Qp=!!(e&&Number(e[1])<=53)}let ru=0;const H0=Promise.resolve(),V0=()=>{ru=0},j0=()=>ru||(H0.then(V0),ru=Ks());function Kn(e,t,n,r){e.addEventListener(t,n,r)}function $0(e,t,n,r){e.removeEventListener(t,n,r)}function W0(e,t,n,r,o=null){const i=e._vei||(e._vei={}),s=i[t];if(r&&s)s.value=r;else{const[a,l]=J0(t);if(r){const u=i[t]=q0(r,o);Kn(e,a,u,l)}else s&&($0(e,a,s,l),i[t]=void 0)}}const Zp=/(?:Once|Passive|Capture)$/;function J0(e){let t;if(Zp.test(e)){t={};let n;for(;n=e.match(Zp);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[mo(e.slice(2)),t]}function q0(e,t){const n=r=>{const o=r.timeStamp||Ks();(Qp||o>=n.attached-1)&&sn(K0(r,n.value),t,5,[r])};return n.value=e,n.attached=j0(),n}function K0(e,t){if(it(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r(o))}else return t}const th=/^on[a-z]/,U0=(e,t,n,r,o=!1,i,s,a,l)=>{t==="class"?P0(e,r,o):t==="style"?L0(e,n,r):Ss(t)?cl(t)||W0(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):G0(e,t,r,o))?z0(e,t,r,i,s,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),F0(e,t,r,o))};function G0(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&th.test(t)&&dt(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||th.test(t)&&Zt(n)?!1:t in e}const sr="transition",Oi="animation",eh=(e,{slots:t})=>gn(up,Y0(e),t);eh.displayName="Transition";const nh={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};eh.props=le({},up.props,nh);const jr=(e,t=[])=>{it(e)?e.forEach(n=>n(...t)):e&&e(...t)},rh=e=>e?it(e)?e.some(t=>t.length>1):e.length>1:!1;function Y0(e){const t={};for(const D in e)D in nh||(t[D]=e[D]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=s,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,d=X0(o),v=d&&d[0],m=d&&d[1],{onBeforeEnter:b,onEnter:y,onEnterCancelled:C,onLeave:g,onLeaveCancelled:O,onBeforeAppear:x=b,onAppear:E=y,onAppearCancelled:H=C}=t,j=(D,at,Tt)=>{To(D,at?c:a),To(D,at?u:s),Tt&&Tt()},q=(D,at)=>{To(D,h),To(D,p),at&&at()},et=D=>(at,Tt)=>{const gt=D?E:y,Z=()=>j(at,D,Tt);jr(gt,[at,Z]),oh(()=>{To(at,D?l:i),ar(at,D?c:a),rh(gt)||ih(at,r,v,Z)})};return le(t,{onBeforeEnter(D){jr(b,[D]),ar(D,i),ar(D,s)},onBeforeAppear(D){jr(x,[D]),ar(D,l),ar(D,u)},onEnter:et(!1),onAppear:et(!0),onLeave(D,at){const Tt=()=>q(D,at);ar(D,f),tS(),ar(D,p),oh(()=>{To(D,f),ar(D,h),rh(g)||ih(D,r,m,Tt)}),jr(g,[D,Tt])},onEnterCancelled(D){j(D,!1),jr(C,[D])},onAppearCancelled(D){j(D,!0),jr(H,[D])},onLeaveCancelled(D){q(D),jr(O,[D])}})}function X0(e){if(e==null)return null;if($t(e))return[ou(e.enter),ou(e.leave)];{const t=ou(e);return[t,t]}}function ou(e){return vi(e)}function ar(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function To(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function oh(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Q0=0;function ih(e,t,n,r){const o=e._endId=++Q0,i=()=>{o===e._endId&&r()};if(n)return setTimeout(i,n);const{type:s,timeout:a,propCount:l}=Z0(e,t);if(!s)return r();const u=s+"end";let c=0;const f=()=>{e.removeEventListener(u,p),i()},p=h=>{h.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),e.addEventListener(u,p)}function Z0(e,t){const n=window.getComputedStyle(e),r=d=>(n[d]||"").split(", "),o=r(sr+"Delay"),i=r(sr+"Duration"),s=sh(o,i),a=r(Oi+"Delay"),l=r(Oi+"Duration"),u=sh(a,l);let c=null,f=0,p=0;t===sr?s>0&&(c=sr,f=s,p=i.length):t===Oi?u>0&&(c=Oi,f=u,p=l.length):(f=Math.max(s,u),c=f>0?s>u?sr:Oi:null,p=c?c===sr?i.length:l.length:0);const h=c===sr&&/\b(transform|all)(,|$)/.test(n[sr+"Property"]);return{type:c,timeout:f,propCount:p,hasTransform:h}}function sh(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>ah(n)+ah(e[r])))}function ah(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function tS(){return document.body.offsetHeight}const lr=e=>{const t=e.props["onUpdate:modelValue"];return it(t)?n=>Os(t,n):t};function eS(e){e.target.composing=!0}function lh(e){const t=e.target;t.composing&&(t.composing=!1,nS(t,"input"))}function nS(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const uh={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e._assign=lr(o);const i=r||o.props&&o.props.type==="number";Kn(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n?a=a.trim():i&&(a=vi(a)),e._assign(a)}),n&&Kn(e,"change",()=>{e.value=e.value.trim()}),t||(Kn(e,"compositionstart",eS),Kn(e,"compositionend",lh),Kn(e,"change",lh))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:o}},i){if(e._assign=lr(i),e.composing||document.activeElement===e&&(n||r&&e.value.trim()===t||(o||e.type==="number")&&vi(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},rS={deep:!0,created(e,t,n){e._assign=lr(n),Kn(e,"change",()=>{const r=e._modelValue,o=Eo(e),i=e.checked,s=e._assign;if(it(r)){const a=ul(r,o),l=a!==-1;if(i&&!l)s(r.concat(o));else if(!i&&l){const u=[...r];u.splice(a,1),s(u)}}else if(vo(r)){const a=new Set(r);i?a.add(o):a.delete(o),s(a)}else s(ph(e,i))})},mounted:ch,beforeUpdate(e,t,n){e._assign=lr(n),ch(e,t,n)}};function ch(e,{value:t,oldValue:n},r){e._modelValue=t,it(t)?e.checked=ul(t,r.props.value)>-1:vo(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=Er(t,ph(e,!0)))}const oS={created(e,{value:t},n){e.checked=Er(t,n.props.value),e._assign=lr(n),Kn(e,"change",()=>{e._assign(Eo(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=lr(r),t!==n&&(e.checked=Er(t,r.props.value))}},iS={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=vo(t);Kn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?vi(Eo(s)):Eo(s));e._assign(e.multiple?o?new Set(i):i:i[0])}),e._assign=lr(r)},mounted(e,{value:t}){fh(e,t)},beforeUpdate(e,t,n){e._assign=lr(n)},updated(e,{value:t}){fh(e,t)}};function fh(e,t){const n=e.multiple;if(!(n&&!it(t)&&!vo(t))){for(let r=0,o=e.options.length;r<o;r++){const i=e.options[r],s=Eo(i);if(n)it(t)?i.selected=ul(t,s)>-1:i.selected=t.has(s);else if(Er(Eo(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Eo(e){return"_value"in e?e._value:e.value}function ph(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const JA={created(e,t,n){Us(e,t,n,null,"created")},mounted(e,t,n){Us(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Us(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Us(e,t,n,r,"updated")}};function Us(e,t,n,r,o){let i;switch(e.tagName){case"SELECT":i=iS;break;case"TEXTAREA":i=uh;break;default:switch(n.props&&n.props.type){case"checkbox":i=rS;break;case"radio":i=oS;break;default:i=uh}}const s=i[o];s&&s(e,t,n,r)}const sS=le({patchProp:U0},D0);let hh;function aS(){return hh||(hh=t0(sS))}const qA=(...e)=>{const t=aS().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=lS(r);if(!o)return;const i=t._component;!dt(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const s=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function lS(e){return Zt(e)?document.querySelector(e):e}function uS(){return dh().__VUE_DEVTOOLS_GLOBAL_HOOK__}function dh(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const cS=typeof Proxy=="function",fS="devtools-plugin:setup",pS="plugin:settings:set";class hS{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const s in t.settings){const a=t.settings[s];r[s]=a.defaultValue}const o=`__vue-devtools-plugin-settings__${t.id}`;let i=R({},r);try{const s=localStorage.getItem(o),a=JSON.parse(s);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(s){try{localStorage.setItem(o,JSON.stringify(s))}catch{}i=s}},n.on(pS,(s,a)=>{s===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(s,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function dS(e,t){const n=dh(),r=uS(),o=cS&&e.enableEarlyProxy;if(r&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))r.emit(fS,e,t);else{const i=o?new hS(e,r):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:i}),i&&t(i.proxiedTarget)}}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const vh=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ao=e=>vh?Symbol(e):"_vr_"+e,vS=Ao("rvlm"),mh=Ao("rvd"),Gs=Ao("r"),iu=Ao("rl"),su=Ao("rvl"),_o=typeof window!="undefined";function mS(e){return e.__esModule||vh&&e[Symbol.toStringTag]==="Module"}const Dt=Object.assign;function au(e,t){const n={};for(const r in t){const o=t[r];n[r]=Array.isArray(o)?o.map(e):e(o)}return n}const Mi=()=>{},gS=/\/$/,yS=e=>e.replace(gS,"");function lu(e,t,n="/"){let r,o={},i="",s="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(r=t.slice(0,a),i=t.slice(a+1,l>-1?l:t.length),o=e(i)),l>-1&&(r=r||t.slice(0,l),s=t.slice(l,t.length)),r=CS(r!=null?r:t,n),{fullPath:r+(i&&"?")+i+s,path:r,query:o,hash:s}}function bS(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function gh(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function SS(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&No(t.matched[r],n.matched[o])&&yh(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function No(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!wS(e[n],t[n]))return!1;return!0}function wS(e,t){return Array.isArray(e)?bh(e,t):Array.isArray(t)?bh(t,e):e===t}function bh(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function CS(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let o=n.length-1,i,s;for(i=0;i<r.length;i++)if(s=r[i],!(o===1||s==="."))if(s==="..")o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var Ti;(function(e){e.pop="pop",e.push="push"})(Ti||(Ti={}));var Ei;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ei||(Ei={}));function xS(e){if(!e)if(_o){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),yS(e)}const kS=/^[^#]+#/;function OS(e,t){return e.replace(kS,"#")+t}function MS(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Ys=()=>({left:window.pageXOffset,top:window.pageYOffset});function TS(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=MS(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Sh(e,t){return(history.state?history.state.position-t:-1)+e}const uu=new Map;function ES(e,t){uu.set(e,t)}function AS(e){const t=uu.get(e);return uu.delete(e),t}let _S=()=>location.protocol+"//"+location.host;function wh(e,t){const{pathname:n,search:r,hash:o}=t,i=e.indexOf("#");if(i>-1){let a=o.includes(e.slice(i))?e.slice(i).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),gh(l,"")}return gh(n,e)+r+o}function NS(e,t,n,r){let o=[],i=[],s=null;const a=({state:p})=>{const h=wh(e,location),d=n.value,v=t.value;let m=0;if(p){if(n.value=h,t.value=p,s&&s===d){s=null;return}m=v?p.position-v.position:0}else r(h);o.forEach(b=>{b(n.value,d,{delta:m,type:Ti.pop,direction:m?m>0?Ei.forward:Ei.back:Ei.unknown})})};function l(){s=n.value}function u(p){o.push(p);const h=()=>{const d=o.indexOf(p);d>-1&&o.splice(d,1)};return i.push(h),h}function c(){const{history:p}=window;!p.state||p.replaceState(Dt({},p.state,{scroll:Ys()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function Ch(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?Ys():null}}function RS(e){const{history:t,location:n}=window,r={value:wh(e,n)},o={value:t.state};o.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:_S()+e+l;try{t[c?"replaceState":"pushState"](u,"",p),o.value=u}catch(h){console.error(h),n[c?"replace":"assign"](p)}}function s(l,u){const c=Dt({},t.state,Ch(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});i(l,c,!0),r.value=l}function a(l,u){const c=Dt({},o.value,t.state,{forward:l,scroll:Ys()});i(c.current,c,!0);const f=Dt({},Ch(r.value,l,null),{position:c.position+1},u);i(l,f,!1),r.value=l}return{location:r,state:o,push:a,replace:s}}function IS(e){e=xS(e);const t=RS(e),n=NS(e,t.state,t.location,t.replace);function r(i,s=!0){s||n.pauseListeners(),history.go(i)}const o=Dt({location:"",base:e,go:r,createHref:OS.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function KA(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),IS(e)}function DS(e){return typeof e=="string"||e&&typeof e=="object"}function xh(e){return typeof e=="string"||typeof e=="symbol"}const ur={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kh=Ao("nf");var Oh;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Oh||(Oh={}));function Ro(e,t){return Dt(new Error,{type:e,[kh]:!0},t)}function $r(e,t){return e instanceof Error&&kh in e&&(t==null||!!(e.type&t))}const Mh="[^/]+?",PS={sensitive:!1,strict:!1,start:!0,end:!0},LS=/[.+*?^${}()[\]/\\]/g;function BS(e,t){const n=Dt({},PS,t),r=[];let o=n.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(o+="/");for(let f=0;f<u.length;f++){const p=u[f];let h=40+(n.sensitive?.25:0);if(p.type===0)f||(o+="/"),o+=p.value.replace(LS,"\\$&"),h+=40;else if(p.type===1){const{value:d,repeatable:v,optional:m,regexp:b}=p;i.push({name:d,repeatable:v,optional:m});const y=b||Mh;if(y!==Mh){h+=10;try{new RegExp(`(${y})`)}catch(g){throw new Error(`Invalid custom RegExp for param "${d}" (${y}): `+g.message)}}let C=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(C=m&&u.length<2?`(?:/${C})`:"/"+C),m&&(C+="?"),o+=C,h+=20,m&&(h+=-8),v&&(h+=-20),y===".*"&&(h+=-50)}c.push(h)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const s=new RegExp(o,n.sensitive?"":"i");function a(u){const c=u.match(s),f={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",d=i[p-1];f[d.name]=h&&d.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const p of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of p)if(h.type===0)c+=h.value;else if(h.type===1){const{value:d,repeatable:v,optional:m}=h,b=d in u?u[d]:"";if(Array.isArray(b)&&!v)throw new Error(`Provided param "${d}" is an array but it is not repeatable (* or + modifiers)`);const y=Array.isArray(b)?b.join("/"):b;if(!y)if(m)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${d}"`);c+=y}}return c}return{re:s,score:r,keys:i,parse:a,stringify:l}}function FS(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function zS(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const i=FS(r[n],o[n]);if(i)return i;n++}return o.length-r.length}const HS={type:0,value:""},VS=/[a-zA-Z0-9_]/;function jS(e){if(!e)return[[]];if(e==="/")return[[HS]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,r=n;const o=[];let i;function s(){i&&o.push(i),i=[]}let a=0,l,u="",c="";function f(){!u||(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),s()):l===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:VS.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),s(),o}function $S(e,t,n){const r=BS(jS(e.path),n),o=Dt(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function WS(e,t){const n=[],r=new Map;t=Eh({strict:!1,end:!0,sensitive:!1},t);function o(c){return r.get(c)}function i(c,f,p){const h=!p,d=qS(c);d.aliasOf=p&&p.record;const v=Eh(t,c),m=[d];if("alias"in c){const C=typeof c.alias=="string"?[c.alias]:c.alias;for(const g of C)m.push(Dt({},d,{components:p?p.record.components:d.components,path:g,aliasOf:p?p.record:d}))}let b,y;for(const C of m){const{path:g}=C;if(f&&g[0]!=="/"){const O=f.record.path,x=O[O.length-1]==="/"?"":"/";C.path=f.record.path+(g&&x+g)}if(b=$S(C,f,v),p?p.alias.push(b):(y=y||b,y!==b&&y.alias.push(b),h&&c.name&&!Th(b)&&s(c.name)),"children"in d){const O=d.children;for(let x=0;x<O.length;x++)i(O[x],b,p&&p.children[x])}p=p||b,l(b)}return y?()=>{s(y)}:Mi}function s(c){if(xh(c)){const f=r.get(c);f&&(r.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(s),c.alias.forEach(s))}}function a(){return n}function l(c){let f=0;for(;f<n.length&&zS(c,n[f])>=0;)f++;n.splice(f,0,c),c.record.name&&!Th(c)&&r.set(c.record.name,c)}function u(c,f){let p,h={},d,v;if("name"in c&&c.name){if(p=r.get(c.name),!p)throw Ro(1,{location:c});v=p.record.name,h=Dt(JS(f.params,p.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),d=p.stringify(h)}else if("path"in c)d=c.path,p=n.find(y=>y.re.test(d)),p&&(h=p.parse(d),v=p.record.name);else{if(p=f.name?r.get(f.name):n.find(y=>y.re.test(f.path)),!p)throw Ro(1,{location:c,currentLocation:f});v=p.record.name,h=Dt({},f.params,c.params),d=p.stringify(h)}const m=[];let b=p;for(;b;)m.unshift(b.record),b=b.parent;return{name:v,path:d,params:h,matched:m,meta:US(m)}}return e.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:o}}function JS(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function qS(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:KS(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function KS(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Th(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function US(e){return e.reduce((t,n)=>Dt(t,n.meta),{})}function Eh(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const Ah=/#/g,GS=/&/g,YS=/\//g,XS=/=/g,QS=/\?/g,_h=/\+/g,ZS=/%5B/g,tw=/%5D/g,Nh=/%5E/g,ew=/%60/g,Rh=/%7B/g,nw=/%7C/g,Ih=/%7D/g,rw=/%20/g;function cu(e){return encodeURI(""+e).replace(nw,"|").replace(ZS,"[").replace(tw,"]")}function ow(e){return cu(e).replace(Rh,"{").replace(Ih,"}").replace(Nh,"^")}function fu(e){return cu(e).replace(_h,"%2B").replace(rw,"+").replace(Ah,"%23").replace(GS,"%26").replace(ew,"`").replace(Rh,"{").replace(Ih,"}").replace(Nh,"^")}function iw(e){return fu(e).replace(XS,"%3D")}function sw(e){return cu(e).replace(Ah,"%23").replace(QS,"%3F")}function aw(e){return e==null?"":sw(e).replace(YS,"%2F")}function Xs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function lw(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const i=r[o].replace(_h," "),s=i.indexOf("="),a=Xs(s<0?i:i.slice(0,s)),l=s<0?null:Xs(i.slice(s+1));if(a in t){let u=t[a];Array.isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function Dh(e){let t="";for(let n in e){const r=e[n];if(n=iw(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(r)?r.map(i=>i&&fu(i)):[r&&fu(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function uw(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Array.isArray(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}function Ai(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function cr(e,t,n,r,o){const i=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((s,a)=>{const l=f=>{f===!1?a(Ro(4,{from:n,to:t})):f instanceof Error?a(f):DS(f)?a(Ro(2,{from:t,to:f})):(i&&r.enterCallbacks[o]===i&&typeof f=="function"&&i.push(f),s())},u=e.call(r&&r.instances[o],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>a(f))})}function pu(e,t,n,r){const o=[];for(const i of e)for(const s in i.components){let a=i.components[s];if(!(t!=="beforeRouteEnter"&&!i.instances[s]))if(cw(a)){const u=(a.__vccOpts||a)[t];u&&o.push(cr(u,n,r,i,s))}else{let l=a();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${i.path}"`));const c=mS(u)?u.default:u;i.components[s]=c;const p=(c.__vccOpts||c)[t];return p&&cr(p,n,r,i,s)()}))}}return o}function cw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ph(e){const t=Ue(Gs),n=Ue(iu),r=te(()=>t.resolve(So(e.to))),o=te(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const p=f.findIndex(No.bind(null,c));if(p>-1)return p;const h=Lh(l[u-2]);return u>1&&Lh(c)===h&&f[f.length-1].path!==h?f.findIndex(No.bind(null,l[u-2])):p}),i=te(()=>o.value>-1&&dw(n.params,r.value.params)),s=te(()=>o.value>-1&&o.value===n.matched.length-1&&yh(n.params,r.value.params));function a(l={}){return hw(l)?t[So(e.replace)?"replace":"push"](So(e.to)).catch(Mi):Promise.resolve()}return{route:r,href:te(()=>r.value.href),isActive:i,isExactActive:s,navigate:a}}const fw=mn({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ph,setup(e,{slots:t}){const n=Ir(Ph(e)),{options:r}=Ue(Gs),o=te(()=>({[Bh(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Bh(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:gn("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),pw=fw;function hw(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function dw(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Array.isArray(o)||o.length!==r.length||r.some((i,s)=>i!==o[s]))return!1}return!0}function Lh(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Bh=(e,t,n)=>e!=null?e:t!=null?t:n,vw=mn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=Ue(su),o=te(()=>e.route||r.value),i=Ue(mh,0),s=te(()=>o.value.matched[i]);wo(mh,i+1),wo(vS,s),wo(su,o);const a=Fe();return Hr(()=>[a.value,s.value,e.name],([l,u,c],[f,p,h])=>{u&&(u.instances[c]=l,p&&p!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),l&&u&&(!p||!No(u,p)||!f)&&(u.enterCallbacks[c]||[]).forEach(d=>d(l))},{flush:"post"}),()=>{const l=o.value,u=s.value,c=u&&u.components[e.name],f=e.name;if(!c)return Fh(n.default,{Component:c,route:l});const p=u.props[e.name],h=p?p===!0?l.params:typeof p=="function"?p(l):p:null,v=gn(c,Dt({},h,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(u.instances[f]=null)},ref:a}));return Fh(n.default,{Component:v,route:l})||v}}});function Fh(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const mw=vw;function UA(e){const t=WS(e.routes,e),n=e.parseQuery||lw,r=e.stringifyQuery||Dh,o=e.history,i=Ai(),s=Ai(),a=Ai(),l=rp(ur);let u=ur;_o&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=au.bind(null,A=>""+A),f=au.bind(null,aw),p=au.bind(null,Xs);function h(A,J){let z,U;return xh(A)?(z=t.getRecordMatcher(A),U=J):U=A,t.addRoute(U,z)}function d(A){const J=t.getRecordMatcher(A);J&&t.removeRoute(J)}function v(){return t.getRoutes().map(A=>A.record)}function m(A){return!!t.getRecordMatcher(A)}function b(A,J){if(J=Dt({},J||l.value),typeof A=="string"){const ut=lu(n,A,J.path),S=t.resolve({path:ut.path},J),w=o.createHref(ut.fullPath);return Dt(ut,S,{params:p(S.params),hash:Xs(ut.hash),redirectedFrom:void 0,href:w})}let z;if("path"in A)z=Dt({},A,{path:lu(n,A.path,J.path).path});else{const ut=Dt({},A.params);for(const S in ut)ut[S]==null&&delete ut[S];z=Dt({},A,{params:f(A.params)}),J.params=f(J.params)}const U=t.resolve(z,J),Ct=A.hash||"";U.params=c(p(U.params));const St=bS(r,Dt({},A,{hash:ow(Ct),path:U.path})),ct=o.createHref(St);return Dt({fullPath:St,hash:Ct,query:r===Dh?uw(A.query):A.query||{}},U,{redirectedFrom:void 0,href:ct})}function y(A){return typeof A=="string"?lu(n,A,l.value.path):Dt({},A)}function C(A,J){if(u!==A)return Ro(8,{from:J,to:A})}function g(A){return E(A)}function O(A){return g(Dt(y(A),{replace:!0}))}function x(A){const J=A.matched[A.matched.length-1];if(J&&J.redirect){const{redirect:z}=J;let U=typeof z=="function"?z(A):z;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=y(U):{path:U},U.params={}),Dt({query:A.query,hash:A.hash,params:A.params},U)}}function E(A,J){const z=u=b(A),U=l.value,Ct=A.state,St=A.force,ct=A.replace===!0,ut=x(z);if(ut)return E(Dt(y(ut),{state:Ct,force:St,replace:ct}),J||z);const S=z;S.redirectedFrom=J;let w;return!St&&SS(r,U,z)&&(w=Ro(16,{to:S,from:U}),se(U,U,!0,!1)),(w?Promise.resolve(w):j(S,U)).catch(k=>$r(k)?k:st(k,S,U)).then(k=>{if(k){if($r(k,2))return E(Dt(y(k.to),{state:Ct,force:St,replace:ct}),J||S)}else k=et(S,U,!0,ct,Ct);return q(S,U,k),k})}function H(A,J){const z=C(A,J);return z?Promise.reject(z):Promise.resolve()}function j(A,J){let z;const[U,Ct,St]=gw(A,J);z=pu(U.reverse(),"beforeRouteLeave",A,J);for(const ut of U)ut.leaveGuards.forEach(S=>{z.push(cr(S,A,J))});const ct=H.bind(null,A,J);return z.push(ct),Io(z).then(()=>{z=[];for(const ut of i.list())z.push(cr(ut,A,J));return z.push(ct),Io(z)}).then(()=>{z=pu(Ct,"beforeRouteUpdate",A,J);for(const ut of Ct)ut.updateGuards.forEach(S=>{z.push(cr(S,A,J))});return z.push(ct),Io(z)}).then(()=>{z=[];for(const ut of A.matched)if(ut.beforeEnter&&!J.matched.includes(ut))if(Array.isArray(ut.beforeEnter))for(const S of ut.beforeEnter)z.push(cr(S,A,J));else z.push(cr(ut.beforeEnter,A,J));return z.push(ct),Io(z)}).then(()=>(A.matched.forEach(ut=>ut.enterCallbacks={}),z=pu(St,"beforeRouteEnter",A,J),z.push(ct),Io(z))).then(()=>{z=[];for(const ut of s.list())z.push(cr(ut,A,J));return z.push(ct),Io(z)}).catch(ut=>$r(ut,8)?ut:Promise.reject(ut))}function q(A,J,z){for(const U of a.list())U(A,J,z)}function et(A,J,z,U,Ct){const St=C(A,J);if(St)return St;const ct=J===ur,ut=_o?history.state:{};z&&(U||ct?o.replace(A.fullPath,Dt({scroll:ct&&ut&&ut.scroll},Ct)):o.push(A.fullPath,Ct)),l.value=A,se(A,J,z,ct),Vt()}let D;function at(){D=o.listen((A,J,z)=>{const U=b(A),Ct=x(U);if(Ct){E(Dt(Ct,{replace:!0}),U).catch(Mi);return}u=U;const St=l.value;_o&&ES(Sh(St.fullPath,z.delta),Ys()),j(U,St).catch(ct=>$r(ct,4|8)?ct:$r(ct,2)?(E(ct.to,U).then(ut=>{$r(ut,4|16)&&!z.delta&&z.type===Ti.pop&&o.go(-1,!1)}).catch(Mi),Promise.reject()):(z.delta&&o.go(-z.delta,!1),st(ct,U,St))).then(ct=>{ct=ct||et(U,St,!1),ct&&(z.delta?o.go(-z.delta,!1):z.type===Ti.pop&&$r(ct,4|16)&&o.go(-1,!1)),q(U,St,ct)}).catch(Mi)})}let Tt=Ai(),gt=Ai(),Z;function st(A,J,z){Vt(A);const U=gt.list();return U.length?U.forEach(Ct=>Ct(A,J,z)):console.error(A),Promise.reject(A)}function lt(){return Z&&l.value!==ur?Promise.resolve():new Promise((A,J)=>{Tt.add([A,J])})}function Vt(A){Z||(Z=!0,at(),Tt.list().forEach(([J,z])=>A?z(A):J()),Tt.reset())}function se(A,J,z,U){const{scrollBehavior:Ct}=e;if(!_o||!Ct)return Promise.resolve();const St=!z&&AS(Sh(A.fullPath,0))||(U||!z)&&history.state&&history.state.scroll||null;return Nn().then(()=>Ct(A,J,St)).then(ct=>ct&&TS(ct)).catch(ct=>st(ct,A,J))}const ae=A=>o.go(A);let Jt;const Gt=new Set;return{currentRoute:l,addRoute:h,removeRoute:d,hasRoute:m,getRoutes:v,resolve:b,options:e,push:g,replace:O,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:i.add,beforeResolve:s.add,afterEach:a.add,onError:gt.add,isReady:lt,install(A){const J=this;A.component("RouterLink",pw),A.component("RouterView",mw),A.config.globalProperties.$router=J,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>So(l)}),_o&&!Jt&&l.value===ur&&(Jt=!0,g(o.location).catch(Ct=>{}));const z={};for(const Ct in ur)z[Ct]=te(()=>l.value[Ct]);A.provide(Gs,J),A.provide(iu,Ir(z)),A.provide(su,l);const U=A.unmount;Gt.add(A),A.unmount=function(){Gt.delete(A),Gt.size<1&&(u=ur,D&&D(),l.value=ur,Jt=!1,Z=!1),U()}}}}function Io(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function gw(e,t){const n=[],r=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let s=0;s<i;s++){const a=t.matched[s];a&&(e.matched.find(u=>No(u,a))?r.push(a):n.push(a));const l=e.matched[s];l&&(t.matched.find(u=>No(u,l))||o.push(l))}return[n,r,o]}function GA(){return Ue(Gs)}function YA(){return Ue(iu)}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var zh="store";function XA(e){return e===void 0&&(e=null),Ue(e!==null?e:zh)}function Do(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function yw(e){return e!==null&&typeof e=="object"}function bw(e){return e&&typeof e.then=="function"}function Sw(e,t){return function(){return e(t)}}function Hh(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function Vh(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Qs(e,n,[],e._modules.root,!0),hu(e,n,t)}function hu(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,i={};Do(o,function(s,a){i[a]=Sw(s,e),Object.defineProperty(e.getters,a,{get:function(){return i[a]()},enumerable:!0})}),e._state=Ir({data:t}),e.strict&&Ow(e),r&&n&&e._withCommit(function(){r.data=null})}function Qs(e,t,n,r,o){var i=!n.length,s=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=r),!i&&!o){var a=du(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=r.state})}var u=r.context=ww(e,s,n);r.forEachMutation(function(c,f){var p=s+f;Cw(e,p,c,u)}),r.forEachAction(function(c,f){var p=c.root?f:s+f,h=c.handler||c;xw(e,p,h,u)}),r.forEachGetter(function(c,f){var p=s+f;kw(e,p,c,u)}),r.forEachChild(function(c,f){Qs(e,t,n.concat(f),c,o)})}function ww(e,t,n){var r=t==="",o={dispatch:r?e.dispatch:function(i,s,a){var l=Zs(i,s,a),u=l.payload,c=l.options,f=l.type;return(!c||!c.root)&&(f=t+f),e.dispatch(f,u)},commit:r?e.commit:function(i,s,a){var l=Zs(i,s,a),u=l.payload,c=l.options,f=l.type;(!c||!c.root)&&(f=t+f),e.commit(f,u,c)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return jh(e,t)}},state:{get:function(){return du(e.state,n)}}}),o}function jh(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach(function(o){if(o.slice(0,r)===t){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return e.getters[o]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Cw(e,t,n,r){var o=e._mutations[t]||(e._mutations[t]=[]);o.push(function(s){n.call(e,r.state,s)})}function xw(e,t,n,r){var o=e._actions[t]||(e._actions[t]=[]);o.push(function(s){var a=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},s);return bw(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function kw(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function Ow(e){Hr(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function du(e,t){return t.reduce(function(n,r){return n[r]},e)}function Zs(e,t,n){return yw(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var Mw="vuex bindings",$h="vuex:mutations",vu="vuex:actions",Po="vuex",Tw=0;function Ew(e,t){dS({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Mw]},function(n){n.addTimelineLayer({id:$h,label:"Vuex Mutations",color:Wh}),n.addTimelineLayer({id:vu,label:"Vuex Actions",color:Wh}),n.addInspector({id:Po,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===e&&r.inspectorId===Po)if(r.filter){var o=[];Uh(o,t._modules.root,r.filter,""),r.rootNodes=o}else r.rootNodes=[Kh(t._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===e&&r.inspectorId===Po){var o=r.nodeId;jh(t,o),r.state=Nw(Iw(t._modules,o),o==="root"?t.getters:t._makeLocalGettersCache,o)}}),n.on.editInspectorState(function(r){if(r.app===e&&r.inspectorId===Po){var o=r.nodeId,i=r.path;o!=="root"&&(i=o.split("/").filter(Boolean).concat(i)),t._withCommit(function(){r.set(t._state.data,i,r.state.value)})}}),t.subscribe(function(r,o){var i={};r.payload&&(i.payload=r.payload),i.state=o,n.notifyComponentUpdate(),n.sendInspectorTree(Po),n.sendInspectorState(Po),n.addTimelineEvent({layerId:$h,event:{time:Date.now(),title:r.type,data:i}})}),t.subscribeAction({before:function(r,o){var i={};r.payload&&(i.payload=r.payload),r._id=Tw++,r._time=Date.now(),i.state=o,n.addTimelineEvent({layerId:vu,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,o){var i={},s=Date.now()-r._time;i.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},r.payload&&(i.payload=r.payload),i.state=o,n.addTimelineEvent({layerId:vu,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Wh=8702998,Aw=6710886,_w=16777215,Jh={label:"namespaced",textColor:_w,backgroundColor:Aw};function qh(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Kh(e,t){return{id:t||"root",label:qh(t),tags:e.namespaced?[Jh]:[],children:Object.keys(e._children).map(function(n){return Kh(e._children[n],t+n+"/")})}}function Uh(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[Jh]:[]}),Object.keys(t._children).forEach(function(o){Uh(e,t._children[o],n,r+o+"/")})}function Nw(e,t,n){t=n==="root"?t:t[n];var r=Object.keys(t),o={state:Object.keys(e.state).map(function(s){return{key:s,editable:!0,value:e.state[s]}})};if(r.length){var i=Rw(t);o.getters=Object.keys(i).map(function(s){return{key:s.endsWith("/")?qh(s):s,editable:!1,value:mu(function(){return i[s]})}})}return o}function Rw(e){var t={};return Object.keys(e).forEach(function(n){var r=n.split("/");if(r.length>1){var o=t,i=r.pop();r.forEach(function(s){o[s]||(o[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),o=o[s]._custom.value}),o[i]=mu(function(){return e[n]})}else t[n]=mu(function(){return e[n]})}),t}function Iw(e,t){var n=t.split("/").filter(function(r){return r});return n.reduce(function(r,o,i){var s=r[o];if(!s)throw new Error('Missing module "'+o+'" for path "'+t+'".');return i===n.length-1?s:s._children},t==="root"?e:e.root._children)}function mu(e){try{return e()}catch(t){return t}}var yn=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var r=t.state;this.state=(typeof r=="function"?r():r)||{}},Gh={namespaced:{configurable:!0}};Gh.namespaced.get=function(){return!!this._rawModule.namespaced};yn.prototype.addChild=function(t,n){this._children[t]=n};yn.prototype.removeChild=function(t){delete this._children[t]};yn.prototype.getChild=function(t){return this._children[t]};yn.prototype.hasChild=function(t){return t in this._children};yn.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};yn.prototype.forEachChild=function(t){Do(this._children,t)};yn.prototype.forEachGetter=function(t){this._rawModule.getters&&Do(this._rawModule.getters,t)};yn.prototype.forEachAction=function(t){this._rawModule.actions&&Do(this._rawModule.actions,t)};yn.prototype.forEachMutation=function(t){this._rawModule.mutations&&Do(this._rawModule.mutations,t)};Object.defineProperties(yn.prototype,Gh);var Wr=function(t){this.register([],t,!1)};Wr.prototype.get=function(t){return t.reduce(function(n,r){return n.getChild(r)},this.root)};Wr.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(r,o){return n=n.getChild(o),r+(n.namespaced?o+"/":"")},"")};Wr.prototype.update=function(t){Yh([],this.root,t)};Wr.prototype.register=function(t,n,r){var o=this;r===void 0&&(r=!0);var i=new yn(n,r);if(t.length===0)this.root=i;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],i)}n.modules&&Do(n.modules,function(a,l){o.register(t.concat(l),a,r)})};Wr.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1],o=n.getChild(r);!o||!o.runtime||n.removeChild(r)};Wr.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1];return n?n.hasChild(r):!1};function Yh(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;Yh(e.concat(r),t.getChild(r),n.modules[r])}}function QA(e){return new ze(e)}var ze=function(t){var n=this;t===void 0&&(t={});var r=t.plugins;r===void 0&&(r=[]);var o=t.strict;o===void 0&&(o=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Wr(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var s=this,a=this,l=a.dispatch,u=a.commit;this.dispatch=function(p,h){return l.call(s,p,h)},this.commit=function(p,h,d){return u.call(s,p,h,d)},this.strict=o;var c=this._modules.root.state;Qs(this,c,[],this._modules.root),hu(this,c),r.forEach(function(f){return f(n)})},gu={state:{configurable:!0}};ze.prototype.install=function(t,n){t.provide(n||zh,this),t.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&Ew(t,this)};gu.state.get=function(){return this._state.data};gu.state.set=function(e){};ze.prototype.commit=function(t,n,r){var o=this,i=Zs(t,n,r),s=i.type,a=i.payload,l={type:s,payload:a},u=this._mutations[s];!u||(this._withCommit(function(){u.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(c){return c(l,o.state)}))};ze.prototype.dispatch=function(t,n){var r=this,o=Zs(t,n),i=o.type,s=o.payload,a={type:i,payload:s},l=this._actions[i];if(!!l){try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(a,r.state)})}catch{}var u=l.length>1?Promise.all(l.map(function(c){return c(s)})):l[0](s);return new Promise(function(c,f){u.then(function(p){try{r._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(a,r.state)})}catch{}c(p)},function(p){try{r._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(a,r.state,p)})}catch{}f(p)})})}};ze.prototype.subscribe=function(t,n){return Hh(t,this._subscribers,n)};ze.prototype.subscribeAction=function(t,n){var r=typeof t=="function"?{before:t}:t;return Hh(r,this._actionSubscribers,n)};ze.prototype.watch=function(t,n,r){var o=this;return Hr(function(){return t(o.state,o.getters)},n,Object.assign({},r))};ze.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};ze.prototype.registerModule=function(t,n,r){r===void 0&&(r={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),Qs(this,this.state,t,this._modules.get(t),r.preserveState),hu(this,this.state)};ze.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var r=du(n.state,t.slice(0,-1));delete r[t[t.length-1]]}),Vh(this)};ze.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};ze.prototype.hotUpdate=function(t){this._modules.update(t),Vh(this,!0)};ze.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(ze.prototype,gu);function Jr(){return Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jr.apply(this,arguments)}function Xh(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Dw(e,t){if(!!e){if(typeof e=="string")return Qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qh(e,t)}}function Qh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pw(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=Dw(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=e[Symbol.iterator](),n.next.bind(n)}function _i(e,t){if(e in t){for(var n=t[e],r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return typeof n=="function"?n.apply(void 0,o):n}var s=new Error('Tried to handle "'+e+'" but there is no handler defined. Only defined handlers are: '+Object.keys(t).map(function(a){return'"'+a+'"'}).join(", ")+".");throw Error.captureStackTrace&&Error.captureStackTrace(s,_i),s}var qr;(function(e){e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static"})(qr||(qr={}));var Lo;(function(e){e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden"})(Lo||(Lo={}));function ta(e){var t=e.visible,n=t===void 0?!0:t,r=e.features,o=r===void 0?qr.None:r,i=Xh(e,["visible","features"]);if(n||o&qr.Static&&i.props.static)return ea(i);if(o&qr.RenderStrategy){var s,a,l=((s=i.props.unmount)!=null?s:!0)?Lo.Unmount:Lo.Hidden;return _i(l,(a={},a[Lo.Unmount]=function(){return null},a[Lo.Hidden]=function(){return ea(Jr({},i,{props:Jr({},i.props,{hidden:!0,style:{display:"none"}})}))},a))}return ea(i)}function ea(e){var t=e.props,n=e.attrs,r=e.slots,o=e.slot,i=e.name,s=Zh(t,["unmount","static"]),a=s.as,l=Xh(s,["as"]),u=r.default==null?void 0:r.default(o);if(a==="template"){if(Object.keys(l).length>0||Object.keys(n).length>0){var c=u!=null?u:[],f=c[0],p=c.slice(1);if(!Lw(f)||p.length>0)throw new Error(['Passing props on "template"!',"","The current component <"+i+' /> is rendering a "template".',"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(n)).map(function(h){return"  - "+h}).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(function(h){return"  - "+h}).join(`
`)].join(`
`));return Fr(f,l)}return Array.isArray(u)&&u.length===1?u[0]:u}return gn(a,l,u)}function Zh(e,t){t===void 0&&(t=[]);for(var n=Object.assign({},e),r=Pw(t),o;!(o=r()).done;){var i=o.value;i in n&&delete n[i]}return n}function Lw(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var Qt;(function(e){e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab"})(Qt||(Qt={}));var Bw=0;function Fw(){return++Bw}function yu(){return Fw()}function zw(e,t,n){typeof window!="undefined"&&qs(function(r){window.addEventListener(e,t,n),r(function(){window.removeEventListener(e,t,n)})})}function ue(e){var t;return e==null||e.value==null?null:(t=e.value.$el)!=null?t:e.value}var td=Symbol("Context"),Ni;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(Ni||(Ni={}));function Hw(){return Ue(td,null)}function Vw(e){wo(td,e)}function ed(e,t){if(e)return e;var n=t!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function jw(e,t){var n=Fe(ed(e.value.type,e.value.as));return Jn(function(){n.value=ed(e.value.type,e.value.as)}),qs(function(){var r;n.value||!ue(t)||ue(t)instanceof HTMLButtonElement&&!((r=ue(t))==null?void 0:r.hasAttribute("type"))&&(n.value="button")}),n}function $w(e){throw new Error("Unexpected object: "+e)}var qt;(function(e){e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing"})(qt||(qt={}));function Ww(e,t){var n=t.resolveItems();if(n.length<=0)return null;var r=t.resolveActiveIndex(),o=r!=null?r:-1,i=function(){switch(e.focus){case qt.First:return n.findIndex(function(l){return!t.resolveDisabled(l)});case qt.Previous:{var s=n.slice().reverse().findIndex(function(l,u,c){return o!==-1&&c.length-u-1>=o?!1:!t.resolveDisabled(l)});return s===-1?s:n.length-1-s}case qt.Next:return n.findIndex(function(l,u){return u<=o?!1:!t.resolveDisabled(l)});case qt.Last:{var a=n.slice().reverse().findIndex(function(l){return!t.resolveDisabled(l)});return a===-1?a:n.length-1-a}case qt.Specific:return n.findIndex(function(l){return t.resolveId(l)===e.id});case qt.Nothing:return null;default:$w(e)}}();return i===-1?r:i}var Kt;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed"})(Kt||(Kt={}));function Jw(e){requestAnimationFrame(function(){return requestAnimationFrame(e)})}var nd=Symbol("ListboxContext");function Bo(e){var t=Ue(nd,null);if(t===null){var n=new Error("<"+e+" /> is missing a parent <Listbox /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(n,Bo),n}return t}var ZA=mn({name:"Listbox",emits:{"update:modelValue":function(t){return!0}},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean]}},setup:function(t,n){var r=n.slots,o=n.attrs,i=n.emit,s=Fe(Kt.Closed),a=Fe(null),l=Fe(null),u=Fe(null),c=Fe([]),f=Fe(""),p=Fe(null),h=te(function(){return t.modelValue}),d={listboxState:s,value:h,orientation:te(function(){return t.horizontal?"horizontal":"vertical"}),labelRef:a,buttonRef:l,optionsRef:u,disabled:te(function(){return t.disabled}),options:c,searchQuery:f,activeOptionIndex:p,closeListbox:function(){t.disabled||s.value!==Kt.Closed&&(s.value=Kt.Closed,p.value=null)},openListbox:function(){t.disabled||s.value!==Kt.Open&&(s.value=Kt.Open)},goToOption:function(m,b){if(!t.disabled&&s.value!==Kt.Closed){var y=Ww(m===qt.Specific?{focus:qt.Specific,id:b}:{focus:m},{resolveItems:function(){return c.value},resolveActiveIndex:function(){return p.value},resolveId:function(g){return g.id},resolveDisabled:function(g){return g.dataRef.disabled}});f.value===""&&p.value===y||(f.value="",p.value=y)}},search:function(m){if(!t.disabled&&s.value!==Kt.Closed){f.value+=m.toLowerCase();var b=c.value.findIndex(function(y){return!y.dataRef.disabled&&y.dataRef.textValue.startsWith(f.value)});b===-1||b===p.value||(p.value=b)}},clearSearch:function(){t.disabled||s.value!==Kt.Closed&&f.value!==""&&(f.value="")},registerOption:function(m,b){c.value.push({id:m,dataRef:b})},unregisterOption:function(m){var b=c.value.slice(),y=p.value!==null?b[p.value]:null,C=b.findIndex(function(g){return g.id===m});C!==-1&&b.splice(C,1),c.value=b,p.value=function(){return C===p.value||y===null?null:b.indexOf(y)}()},select:function(m){t.disabled||i("update:modelValue",m)}};return zw("mousedown",function(v){var m,b,y,C=v.target,g=document.activeElement;s.value===Kt.Open&&(((m=ue(l))==null?void 0:m.contains(C))||(((b=ue(u))==null?void 0:b.contains(C))||d.closeListbox(),!(g!==document.body&&(g==null?void 0:g.contains(C)))&&(v.defaultPrevented||(y=ue(l))==null||y.focus({preventScroll:!0}))))}),wo(nd,d),Vw(te(function(){var v;return _i(s.value,(v={},v[Kt.Open]=Ni.Open,v[Kt.Closed]=Ni.Closed,v))})),function(){var v={open:s.value===Kt.Open,disabled:t.disabled};return ta({props:Zh(t,["modelValue","onUpdate:modelValue","disabled","horizontal"]),slot:v,slots:r,attrs:o,name:"Listbox"})}}}),t_=mn({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},render:function(){var t,n,r=Bo("ListboxButton"),o={open:r.listboxState.value===Kt.Open,disabled:r.disabled.value},i={ref:"el",id:this.id,type:this.type,"aria-haspopup":!0,"aria-controls":(t=ue(r.optionsRef))==null?void 0:t.id,"aria-expanded":r.disabled.value?void 0:r.listboxState.value===Kt.Open,"aria-labelledby":r.labelRef.value?[(n=ue(r.labelRef))==null?void 0:n.id,this.id].join(" "):void 0,disabled:r.disabled.value===!0?!0:void 0,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp,onClick:this.handleClick};return ta({props:Jr({},this.$props,i),slot:o,attrs:this.$attrs,slots:this.$slots,name:"ListboxButton"})},setup:function(t,n){var r=n.attrs,o=Bo("ListboxButton"),i="headlessui-listbox-button-"+yu();function s(u){switch(u.key){case Qt.Space:case Qt.Enter:case Qt.ArrowDown:u.preventDefault(),o.openListbox(),Nn(function(){var c;(c=ue(o.optionsRef))==null||c.focus({preventScroll:!0}),o.value.value||o.goToOption(qt.First)});break;case Qt.ArrowUp:u.preventDefault(),o.openListbox(),Nn(function(){var c;(c=ue(o.optionsRef))==null||c.focus({preventScroll:!0}),o.value.value||o.goToOption(qt.Last)});break}}function a(u){switch(u.key){case Qt.Space:u.preventDefault();break}}function l(u){o.disabled.value||(o.listboxState.value===Kt.Open?(o.closeListbox(),Nn(function(){var c;return(c=ue(o.buttonRef))==null?void 0:c.focus({preventScroll:!0})})):(u.preventDefault(),o.openListbox(),Jw(function(){var c;return(c=ue(o.optionsRef))==null?void 0:c.focus({preventScroll:!0})})))}return{id:i,el:o.buttonRef,type:jw(te(function(){return{as:t.as,type:r.type}}),o.buttonRef),handleKeyDown:s,handleKeyUp:a,handleClick:l}}}),e_=mn({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},render:function(){var t,n,r,o,i=Bo("ListboxOptions"),s={open:i.listboxState.value===Kt.Open},a={"aria-activedescendant":i.activeOptionIndex.value===null||(t=i.options.value[i.activeOptionIndex.value])==null?void 0:t.id,"aria-labelledby":(n=(r=ue(i.labelRef))==null?void 0:r.id)!=null?n:(o=ue(i.buttonRef))==null?void 0:o.id,"aria-orientation":i.orientation.value,id:this.id,onKeydown:this.handleKeyDown,role:"listbox",tabIndex:0,ref:"el"},l=this.$props;return ta({props:Jr({},l,a),slot:s,attrs:this.$attrs,slots:this.$slots,features:qr.RenderStrategy|qr.Static,visible:this.visible,name:"ListboxOptions"})},setup:function(){var t=Bo("ListboxOptions"),n="headlessui-listbox-options-"+yu(),r=Fe(null);function o(a){switch(r.value&&clearTimeout(r.value),a.key){case Qt.Space:if(t.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),t.search(a.key);case Qt.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value!==null){var l=t.options.value[t.activeOptionIndex.value].dataRef;t.select(l.value)}t.closeListbox(),Nn(function(){var u;return(u=ue(t.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case _i(t.orientation.value,{vertical:Qt.ArrowDown,horizontal:Qt.ArrowRight}):return a.preventDefault(),a.stopPropagation(),t.goToOption(qt.Next);case _i(t.orientation.value,{vertical:Qt.ArrowUp,horizontal:Qt.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),t.goToOption(qt.Previous);case Qt.Home:case Qt.PageUp:return a.preventDefault(),a.stopPropagation(),t.goToOption(qt.First);case Qt.End:case Qt.PageDown:return a.preventDefault(),a.stopPropagation(),t.goToOption(qt.Last);case Qt.Escape:a.preventDefault(),a.stopPropagation(),t.closeListbox(),Nn(function(){var u;return(u=ue(t.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case Qt.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(t.search(a.key),r.value=setTimeout(function(){return t.clearSearch()},350));break}}var i=Hw(),s=te(function(){return i!==null?i.value===Ni.Open:t.listboxState.value===Kt.Open});return{id:n,el:t.optionsRef,handleKeyDown:o,visible:s}}}),n_=mn({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup:function(t,n){var r=n.slots,o=n.attrs,i=Bo("ListboxOption"),s="headlessui-listbox-option-"+yu(),a=te(function(){return i.activeOptionIndex.value!==null?i.options.value[i.activeOptionIndex.value].id===s:!1}),l=te(function(){return xt(i.value.value)===xt(t.value)}),u=Fe({disabled:t.disabled,value:t.value,textValue:""});Jn(function(){var d,v,m=(d=document.getElementById(s))==null||(v=d.textContent)==null?void 0:v.toLowerCase().trim();m!==void 0&&(u.value.textValue=m)}),Jn(function(){return i.registerOption(s,u)}),Ll(function(){return i.unregisterOption(s)}),Jn(function(){Hr([i.listboxState,l],function(){var d;i.listboxState.value===Kt.Open&&(!l.value||(i.goToOption(qt.Specific,s),(d=document.getElementById(s))==null||d.focus==null||d.focus()))},{immediate:!0})}),qs(function(){i.listboxState.value===Kt.Open&&(!a.value||Nn(function(){var d;return(d=document.getElementById(s))==null||d.scrollIntoView==null?void 0:d.scrollIntoView({block:"nearest"})}))});function c(d){if(t.disabled)return d.preventDefault();i.select(t.value),i.closeListbox(),Nn(function(){var v;return(v=ue(i.buttonRef))==null?void 0:v.focus({preventScroll:!0})})}function f(){if(t.disabled)return i.goToOption(qt.Nothing);i.goToOption(qt.Specific,s)}function p(){t.disabled||a.value||i.goToOption(qt.Specific,s)}function h(){t.disabled||!a.value||i.goToOption(qt.Nothing)}return function(){var d=t.disabled,v={active:a.value,selected:l.value,disabled:d},m={id:s,role:"option",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,"aria-selected":l.value===!0?l.value:void 0,disabled:void 0,onClick:c,onFocus:f,onPointermove:p,onMousemove:p,onPointerleave:h,onMouseleave:h};return ta({props:Jr({},t,m),slot:v,attrs:o,slots:r,name:"ListboxOption"})}}});function ge(e){this.content=e}ge.prototype={constructor:ge,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return o==-1?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new ge(i)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new ge(n)},addToStart:function(e,t){return new ge([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new ge(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(i==-1?o.length:i,0,t,n),new ge(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=ge.from(e),e.size?new ge(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=ge.from(e),e.size?new ge(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=ge.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}};ge.from=function(e){if(e instanceof ge)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new ge(t)};var rd=ge;function od(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=od(o.content,i.content,n+1);if(a!=null)return a}n+=o.nodeSize}}function id(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};var s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,c=Math.min(s.text.length,a.text.length);u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var f=id(s.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}var T=function(t,n){if(this.content=t,this.size=n||0,n==null)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize},na={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};T.prototype.nodesBetween=function(t,n,r,o,i){o===void 0&&(o=0);for(var s=0,a=0;a<n;s++){var l=this.content[s],u=a+l.nodeSize;if(u>t&&r(l,o+a,i,s)!==!1&&l.content.size){var c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,o+c)}a=u}};T.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)};T.prototype.textBetween=function(t,n,r,o){var i="",s=!0;return this.nodesBetween(t,n,function(a,l){a.isText?(i+=a.text.slice(Math.max(t,l)-l,n-l),s=!r):a.isLeaf&&o?(i+=typeof o=="function"?o(a):o,s=!r):!s&&a.isBlock&&(i+=r,s=!0)},0),i};T.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new T(o,this.size+t.size)};T.prototype.cut=function(t,n){if(n==null&&(n=this.size),t==0&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,s=0;s<n;i++){var a=this.content[i],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new T(r,o)};T.prototype.cutByIndex=function(t,n){return t==n?T.empty:t==0&&n==this.content.length?this:new T(this.content.slice(t,n))};T.prototype.replaceChild=function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new T(o,i)};T.prototype.addToStart=function(t){return new T([t].concat(this.content),this.size+t.nodeSize)};T.prototype.addToEnd=function(t){return new T(this.content.concat(t),this.size+t.nodeSize)};T.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0};na.firstChild.get=function(){return this.content.length?this.content[0]:null};na.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};na.childCount.get=function(){return this.content.length};T.prototype.child=function(t){var n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n};T.prototype.maybeChild=function(t){return this.content[t]};T.prototype.forEach=function(t){for(var n=0,r=0;n<this.content.length;n++){var o=this.content[n];t(o,r,n),r+=o.nodeSize}};T.prototype.findDiffStart=function(t,n){return n===void 0&&(n=0),od(this,t,n)};T.prototype.findDiffEnd=function(t,n,r){return n===void 0&&(n=this.size),r===void 0&&(r=t.size),id(this,t,n,r)};T.prototype.findIndex=function(t,n){if(n===void 0&&(n=-1),t==0)return ra(0,t);if(t==this.size)return ra(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var r=0,o=0;;r++){var i=this.child(r),s=o+i.nodeSize;if(s>=t)return s==t||n>0?ra(r+1,s):ra(r,o);o=s}};T.prototype.toString=function(){return"<"+this.toStringInner()+">"};T.prototype.toStringInner=function(){return this.content.join(", ")};T.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null};T.fromJSON=function(t,n){if(!n)return T.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new T(n.map(t.nodeFromJSON))};T.fromArray=function(t){if(!t.length)return T.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new T(n||t,r)};T.from=function(t){if(!t)return T.empty;if(t instanceof T)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new T([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))};Object.defineProperties(T.prototype,na);var bu={index:0,offset:0};function ra(e,t){return bu.index=e,bu.offset=t,bu}T.empty=new T([],0);function oa(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!oa(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!oa(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var bt=function(t,n){this.type=t,this.attrs=n};bt.prototype.addToSet=function(t){for(var n,r=!1,o=0;o<t.length;o++){var i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n};bt.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t};bt.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1};bt.prototype.eq=function(t){return this==t||this.type==t.type&&oa(this.attrs,t.attrs)};bt.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return t};bt.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var r=t.marks[n.type];if(!r)throw new RangeError("There is no mark type "+n.type+" in this schema");return r.create(n.attrs)};bt.sameSet=function(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0};bt.setFrom=function(t){if(!t||t.length==0)return bt.none;if(t instanceof bt)return[t];var n=t.slice();return n.sort(function(r,o){return r.type.rank-o.type.rank}),n};bt.none=[];function Rn(e){var t=Error.call(this,e);return t.__proto__=Rn.prototype,t}Rn.prototype=Object.create(Error.prototype);Rn.prototype.constructor=Rn;Rn.prototype.name="ReplaceError";var $=function(t,n,r){this.content=t,this.openStart=n,this.openEnd=r},sd={size:{configurable:!0}};sd.size.get=function(){return this.content.size-this.openStart-this.openEnd};$.prototype.insertAt=function(t,n){var r=ld(this.content,t+this.openStart,n,null);return r&&new $(r,this.openStart,this.openEnd)};$.prototype.removeBetween=function(t,n){return new $(ad(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)};$.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd};$.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"};$.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t};$.fromJSON=function(t,n){if(!n)return $.empty;var r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new $(T.fromJSON(t,n.content),r,o)};$.maxOpen=function(t,n){n===void 0&&(n=!0);for(var r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new $(t,r,o)};Object.defineProperties($.prototype,sd);function ad(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,s=e.maybeChild(o),a=e.findIndex(n),l=a.index,u=a.offset;if(i==t||s.isText){if(u!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy(ad(s.content,t-i-1,n-i-1)))}function ld(e,t,n,r){var o=e.findIndex(t),i=o.index,s=o.offset,a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=ld(a.content,t-s-1,n);return l&&e.replaceChild(i,a.copy(l))}$.empty=new $(T.empty,0,0);function qw(e,t,n){if(n.openStart>e.depth)throw new Rn("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Rn("Inconsistent open depths");return ud(e,t,n,0)}function ud(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var s=ud(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){var a=e.parent,l=a.content;return Ur(a,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{var u=Kw(n,e),c=u.start,f=u.end;return Ur(i,fd(e,c,f,t,r))}else return Ur(i,ia(e,t,r))}function cd(e,t){if(!t.type.compatibleContent(e.type))throw new Rn("Cannot join "+t.type.name+" onto "+e.type.name)}function Su(e,t,n){var r=e.node(n);return cd(r,t.node(n)),r}function Kr(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Ri(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(Kr(e.nodeAfter,r),i++));for(var a=i;a<s;a++)Kr(o.child(a),r);t&&t.depth==n&&t.textOffset&&Kr(t.nodeBefore,r)}function Ur(e,t){if(!e.type.validContent(t))throw new Rn("Invalid content for node "+e.type.name);return e.copy(t)}function fd(e,t,n,r,o){var i=e.depth>o&&Su(e,t,o+1),s=r.depth>o&&Su(n,r,o+1),a=[];return Ri(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(cd(i,s),Kr(Ur(i,fd(e,t,n,r,o+1)),a)):(i&&Kr(Ur(i,ia(e,t,o+1)),a),Ri(t,n,o,a),s&&Kr(Ur(s,ia(n,r,o+1)),a)),Ri(r,null,o,a),new T(a)}function ia(e,t,n){var r=[];if(Ri(null,e,n,r),e.depth>n){var o=Su(e,t,n+1);Kr(Ur(o,ia(e,t,n+1)),r)}return Ri(t,null,n,r),new T(r)}function Kw(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(T.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}var Ft=function(t,n,r){this.pos=t,this.path=n,this.depth=n.length/3-1,this.parentOffset=r},Fo={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Ft.prototype.resolveDepth=function(t){return t==null?this.depth:t<0?this.depth+t:t};Fo.parent.get=function(){return this.node(this.depth)};Fo.doc.get=function(){return this.node(0)};Ft.prototype.node=function(t){return this.path[this.resolveDepth(t)*3]};Ft.prototype.index=function(t){return this.path[this.resolveDepth(t)*3+1]};Ft.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)};Ft.prototype.start=function(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1};Ft.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size};Ft.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]};Ft.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize};Fo.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};Fo.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r};Fo.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)};Ft.prototype.posAtIndex=function(t,n){n=this.resolveDepth(n);for(var r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1,i=0;i<t;i++)o+=r.child(i).nodeSize;return o};Ft.prototype.marks=function(){var t=this.parent,n=this.index();if(t.content.size==0)return bt.none;if(this.textOffset)return t.child(n).marks;var r=t.maybeChild(n-1),o=t.maybeChild(n);if(!r){var i=r;r=o,o=i}for(var s=r.marks,a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s};Ft.prototype.marksAcross=function(t){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var r=n.marks,o=t.parent.maybeChild(t.index()),i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r};Ft.prototype.sharedDepth=function(t){for(var n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0};Ft.prototype.blockRange=function(t,n){if(t===void 0&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ii(this,t,r)};Ft.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset};Ft.prototype.max=function(t){return t.pos>this.pos?t:this};Ft.prototype.min=function(t){return t.pos<this.pos?t:this};Ft.prototype.toString=function(){for(var t="",n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset};Ft.resolve=function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=t;;){var a=s.content.findIndex(i),l=a.index,u=a.offset,c=i-u;if(r.push(s,l,o+u),!c||(s=s.child(l),s.isText))break;i=c-1,o+=u+1}return new Ft(n,r,i)};Ft.resolveCached=function(t,n){for(var r=0;r<wu.length;r++){var o=wu[r];if(o.pos==n&&o.doc==t)return o}var i=wu[Cu]=Ft.resolve(t,n);return Cu=(Cu+1)%Uw,i};Object.defineProperties(Ft.prototype,Fo);var wu=[],Cu=0,Uw=12,Ii=function(t,n,r){this.$from=t,this.$to=n,this.depth=r},zo={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};zo.start.get=function(){return this.$from.before(this.depth+1)};zo.end.get=function(){return this.$to.after(this.depth+1)};zo.parent.get=function(){return this.$from.node(this.depth)};zo.startIndex.get=function(){return this.$from.index(this.depth)};zo.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(Ii.prototype,zo);var Gw=Object.create(null),wt=function(t,n,r,o){this.type=t,this.attrs=n,this.content=r||T.empty,this.marks=o||bt.none},Xe={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Xe.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};Xe.childCount.get=function(){return this.content.childCount};wt.prototype.child=function(t){return this.content.child(t)};wt.prototype.maybeChild=function(t){return this.content.maybeChild(t)};wt.prototype.forEach=function(t){this.content.forEach(t)};wt.prototype.nodesBetween=function(t,n,r,o){o===void 0&&(o=0),this.content.nodesBetween(t,n,r,o,this)};wt.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)};Xe.textContent.get=function(){return this.textBetween(0,this.content.size,"")};wt.prototype.textBetween=function(t,n,r,o){return this.content.textBetween(t,n,r,o)};Xe.firstChild.get=function(){return this.content.firstChild};Xe.lastChild.get=function(){return this.content.lastChild};wt.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)};wt.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)};wt.prototype.hasMarkup=function(t,n,r){return this.type==t&&oa(this.attrs,n||t.defaultAttrs||Gw)&&bt.sameSet(this.marks,r||bt.none)};wt.prototype.copy=function(t){return t===void 0&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)};wt.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)};wt.prototype.cut=function(t,n){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))};wt.prototype.slice=function(t,n,r){if(n===void 0&&(n=this.content.size),r===void 0&&(r=!1),t==n)return $.empty;var o=this.resolve(t),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),l=o.node(s),u=l.content.cut(o.pos-a,i.pos-a);return new $(u,o.depth-s,i.depth-s)};wt.prototype.replace=function(t,n,r){return qw(this.resolve(t),this.resolve(n),r)};wt.prototype.nodeAt=function(t){for(var n=this;;){var r=n.content.findIndex(t),o=r.index,i=r.offset;if(n=n.maybeChild(o),!n)return null;if(i==t||n.isText)return n;t-=i+1}};wt.prototype.childAfter=function(t){var n=this.content.findIndex(t),r=n.index,o=n.offset;return{node:this.content.maybeChild(r),index:r,offset:o}};wt.prototype.childBefore=function(t){if(t==0)return{node:null,index:0,offset:0};var n=this.content.findIndex(t),r=n.index,o=n.offset;if(o<t)return{node:this.content.child(r),index:r,offset:o};var i=this.content.child(r-1);return{node:i,index:r-1,offset:o-i.nodeSize}};wt.prototype.resolve=function(t){return Ft.resolveCached(this,t)};wt.prototype.resolveNoCache=function(t){return Ft.resolve(this,t)};wt.prototype.rangeHasMark=function(t,n,r){var o=!1;return n>t&&this.nodesBetween(t,n,function(i){return r.isInSet(i.marks)&&(o=!0),!o}),o};Xe.isBlock.get=function(){return this.type.isBlock};Xe.isTextblock.get=function(){return this.type.isTextblock};Xe.inlineContent.get=function(){return this.type.inlineContent};Xe.isInline.get=function(){return this.type.isInline};Xe.isText.get=function(){return this.type.isText};Xe.isLeaf.get=function(){return this.type.isLeaf};Xe.isAtom.get=function(){return this.type.isAtom};wt.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),pd(this.marks,t)};wt.prototype.contentMatchAt=function(t){var n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n};wt.prototype.canReplace=function(t,n,r,o,i){r===void 0&&(r=T.empty),o===void 0&&(o=0),i===void 0&&(i=r.childCount);var s=this.contentMatchAt(t).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(var l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0};wt.prototype.canReplaceWith=function(t,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;var i=this.contentMatchAt(t).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1};wt.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)};wt.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=bt.none,n=0;n<this.marks.length;n++)t=this.marks[n].addToSet(t);if(!bt.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(r){return r.type.name}));this.content.forEach(function(r){return r.check()})};wt.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(r){return r.toJSON()})),t};wt.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}var o=T.fromJSON(t,n.content);return t.nodeType(n.type).create(n.attrs,o,r)};Object.defineProperties(wt.prototype,Xe);var Yw=function(e){function t(r,o,i,s){if(e.call(this,r,o,null,s),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):pd(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(o,i){return this.text.slice(o,i)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(o){return o==this.marks?this:new t(this.type,this.attrs,this.text,o)},t.prototype.withText=function(o){return o==this.text?this:new t(this.type,this.attrs,o,this.marks)},t.prototype.cut=function(o,i){return o===void 0&&(o=0),i===void 0&&(i=this.text.length),o==0&&i==this.text.length?this:this.withText(this.text.slice(o,i))},t.prototype.eq=function(o){return this.sameMarkup(o)&&this.text==o.text},t.prototype.toJSON=function(){var o=e.prototype.toJSON.call(this);return o.text=this.text,o},Object.defineProperties(t.prototype,n),t}(wt);function pd(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var ye=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},sa={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};ye.parse=function(t,n){var r=new aa(t,n);if(r.next==null)return ye.empty;var o=dd(r);r.next&&r.err("Unexpected trailing text");var i=r1(n1(o));return o1(i,r),i};ye.prototype.matchType=function(t){for(var n=0;n<this.next.length;n+=2)if(this.next[n]==t)return this.next[n+1];return null};ye.prototype.matchFragment=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=t.childCount);for(var o=this,i=n;o&&i<r;i++)o=o.matchType(t.child(i).type);return o};sa.inlineContent.get=function(){var e=this.next[0];return e?e.isInline:!1};sa.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}};ye.prototype.compatible=function(t){for(var n=0;n<this.next.length;n+=2)for(var r=0;r<t.next.length;r+=2)if(this.next[n]==t.next[r])return!0;return!1};ye.prototype.fillBefore=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=0);var o=[this];function i(s,a){var l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return T.from(a.map(function(h){return h.createAndFill()}));for(var u=0;u<s.next.length;u+=2){var c=s.next[u],f=s.next[u+1];if(!(c.isText||c.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);var p=i(f,a.concat(c));if(p)return p}}}return i(this,[])};ye.prototype.findWrapping=function(t){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];var r=this.computeWrapping(t);return this.wrapCache.push(t,r),r};ye.prototype.computeWrapping=function(t){for(var n=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var o=r.shift(),i=o.match;if(i.matchType(t)){for(var s=[],a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(var l=0;l<i.next.length;l+=2){var u=i.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!o.type||i.next[l+1].validEnd)&&(r.push({match:u.contentMatch,type:u,via:o}),n[u.name]=!0)}}};sa.edgeCount.get=function(){return this.next.length>>1};ye.prototype.edge=function(t){var n=t<<1;if(n>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[n],next:this.next[n+1]}};ye.prototype.toString=function(){var t=[];function n(r){t.push(r);for(var o=1;o<r.next.length;o+=2)t.indexOf(r.next[o])==-1&&n(r.next[o])}return n(this),t.map(function(r,o){for(var i=o+(r.validEnd?"*":" ")+" ",s=0;s<r.next.length;s+=2)i+=(s?", ":"")+r.next[s].name+"->"+t.indexOf(r.next[s+1]);return i}).join(`
`)};Object.defineProperties(ye.prototype,sa);ye.empty=new ye(!0);var aa=function(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()},hd={next:{configurable:!0}};hd.next.get=function(){return this.tokens[this.pos]};aa.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)};aa.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")};Object.defineProperties(aa.prototype,hd);function dd(e){var t=[];do t.push(Xw(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Xw(e){var t=[];do t.push(Qw(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Qw(e){for(var t=e1(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=Zw(e,t);else break;return t}function vd(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Zw(e,t){var n=vd(e),r=n;return e.eat(",")&&(e.next!="}"?r=vd(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function t1(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function e1(e){if(e.eat("(")){var t=dd(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{var n=t1(e,e.next).map(function(r){return e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}});return e.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function n1(e){var t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,l){var u={term:l,to:a};return t[s].push(u),u}function o(s,a){s.forEach(function(l){return l.to=a})}function i(s,a){if(s.type=="choice")return s.exprs.reduce(function(b,y){return b.concat(i(y,a))},[]);if(s.type=="seq")for(var l=0;;l++){var u=i(s.exprs[l],a);if(l==s.exprs.length-1)return u;o(u,a=n())}else if(s.type=="star"){var c=n();return r(a,c),o(i(s.expr,c),c),[r(c)]}else if(s.type=="plus"){var f=n();return o(i(s.expr,a),f),o(i(s.expr,f),f),[r(f)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){for(var p=a,h=0;h<s.min;h++){var d=n();o(i(s.expr,p),d),p=d}if(s.max==-1)o(i(s.expr,p),p);else for(var v=s.min;v<s.max;v++){var m=n();r(p,m),o(i(s.expr,p),m),p=m}return[r(p)]}else if(s.type=="name")return[r(a,null,s.value)]}}}function md(e,t){return t-e}function gd(e,t){var n=[];return r(t),n.sort(md);function r(o){var i=e[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(var s=0;s<i.length;s++){var a=i[s],l=a.term,u=a.to;!l&&n.indexOf(u)==-1&&r(u)}}}function r1(e){var t=Object.create(null);return n(gd(e,0));function n(r){var o=[];r.forEach(function(l){e[l].forEach(function(u){var c=u.term,f=u.to;if(!!c){var p=o.indexOf(c),h=p>-1&&o[p+1];gd(e,f).forEach(function(d){h||o.push(c,h=[]),h.indexOf(d)==-1&&h.push(d)})}})});for(var i=t[r.join(",")]=new ye(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(md);i.next.push(o[s],t[a.join(",")]||n(a))}return i}}function o1(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],u=o.next[a+1];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(u)==-1&&r.push(u)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yd(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function bd(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(o===void 0){var i=e[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Sd(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new wd(e[n]);return t}var Ee=function(t,n,r){this.name=t,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=Sd(r.attrs),this.defaultAttrs=yd(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"},Di={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Di.isInline.get=function(){return!this.isBlock};Di.isTextblock.get=function(){return this.isBlock&&this.inlineContent};Di.isLeaf.get=function(){return this.contentMatch==ye.empty};Di.isAtom.get=function(){return this.isLeaf||this.spec.atom};Ee.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1};Ee.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)};Ee.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:bd(this.attrs,t)};Ee.prototype.create=function(t,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wt(this,this.computeAttrs(t),T.from(n),bt.setFrom(r))};Ee.prototype.createChecked=function(t,n,r){if(n=T.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new wt(this,this.computeAttrs(t),n,bt.setFrom(r))};Ee.prototype.createAndFill=function(t,n,r){if(t=this.computeAttrs(t),n=T.from(n),n.size){var o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}var i=this.contentMatch.matchFragment(n).fillBefore(T.empty,!0);return i?new wt(this,t,n.append(i),bt.setFrom(r)):null};Ee.prototype.validContent=function(t){var n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(var r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0};Ee.prototype.allowsMarkType=function(t){return this.markSet==null||this.markSet.indexOf(t)>-1};Ee.prototype.allowsMarks=function(t){if(this.markSet==null)return!0;for(var n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0};Ee.prototype.allowedMarks=function(t){if(this.markSet==null)return t;for(var n,r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:bt.empty:t};Ee.compile=function(t,n){var r=Object.create(null);t.forEach(function(s,a){return r[s]=new Ee(s,n,a)});var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r};Object.defineProperties(Ee.prototype,Di);var wd=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Cd={isRequired:{configurable:!0}};Cd.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(wd.prototype,Cd);var fr=function(t,n,r,o){this.name=t,this.schema=r,this.spec=o,this.attrs=Sd(o.attrs),this.rank=n,this.excluded=null;var i=yd(this.attrs);this.instance=i&&new bt(this,i)};fr.prototype.create=function(t){return!t&&this.instance?this.instance:new bt(this,bd(this.attrs,t))};fr.compile=function(t,n){var r=Object.create(null),o=0;return t.forEach(function(i,s){return r[i]=new fr(i,o++,n,s)}),r};fr.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t};fr.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(t[n].type==this)return t[n]};fr.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Gr=function(t){this.spec={};for(var n in t)this.spec[n]=t[n];this.spec.nodes=rd.from(t.nodes),this.spec.marks=rd.from(t.marks),this.nodes=Ee.compile(this.spec.nodes,this),this.marks=fr.compile(this.spec.marks,this);var r=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=r[s]||(r[s]=ye.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=a=="_"?null:a?xd(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(var l in this.marks){var u=this.marks[l],c=u.spec.excludes;u.excluded=c==null?[u]:c==""?[]:xd(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};Gr.prototype.node=function(t,n,r,o){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Ee){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,o)};Gr.prototype.text=function(t,n){var r=this.nodes.text;return new Yw(r,r.defaultAttrs,t,bt.setFrom(n))};Gr.prototype.mark=function(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)};Gr.prototype.nodeFromJSON=function(t){return wt.fromJSON(this,t)};Gr.prototype.markFromJSON=function(t){return bt.fromJSON(this,t)};Gr.prototype.nodeType=function(t){var n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n};function xd(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var l=e.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var bn=function(t,n){var r=this;this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach(function(o){o.tag?r.tags.push(o):o.style&&r.styles.push(o)}),this.normalizeLists=!this.tags.some(function(o){if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;var i=t.nodes[o.node];return i.contentMatch.matchType(i)})};bn.prototype.parse=function(t,n){n===void 0&&(n={});var r=new Lt(this,n,!1);return r.addAll(t,null,n.from,n.to),r.finish()};bn.prototype.parseSlice=function(t,n){n===void 0&&(n={});var r=new Lt(this,n,!0);return r.addAll(t,null,n.from,n.to),$.maxOpen(r.finish())};bn.prototype.matchTag=function(t,n,r){for(var o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){var i=this.tags[o];if(a1(t,i.tag)&&(i.namespace===void 0||t.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){var s=i.getAttrs(t);if(s===!1)continue;i.attrs=s}return i}}};bn.prototype.matchStyle=function(t,n,r,o){for(var i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){var s=this.styles[i];if(!(s.style.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||s.style.length>t.length&&(s.style.charCodeAt(t.length)!=61||s.style.slice(t.length+1)!=n))){if(s.getAttrs){var a=s.getAttrs(n);if(a===!1)continue;s.attrs=a}return s}}};bn.schemaRules=function(t){var n=[];function r(l){for(var u=l.priority==null?50:l.priority,c=0;c<n.length;c++){var f=n[c],p=f.priority==null?50:f.priority;if(p<u)break}n.splice(c,0,l)}var o=function(l){var u=t.marks[l].spec.parseDOM;u&&u.forEach(function(c){r(c=Md(c)),c.mark=l})};for(var i in t.marks)o(i);var s=function(l){var u=t.nodes[a].spec.parseDOM;u&&u.forEach(function(c){r(c=Md(c)),c.node=a})};for(var a in t.nodes)s();return n};bn.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new bn(t,bn.schemaRules(t)))};var xu={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},i1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kd={ol:!0,ul:!0},ku=1,Ou=2,Pi=4;function Od(e){return(e?ku:0)|(e==="full"?Ou:0)}var Un=function(t,n,r,o,i,s,a){this.type=t,this.attrs=n,this.solid=i,this.match=s||(a&Pi?null:t.contentMatch),this.options=a,this.content=[],this.marks=r,this.activeMarks=bt.none,this.pendingMarks=o,this.stashMarks=[]};Un.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(T.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{var r=this.type.contentMatch,o;return(o=r.findWrapping(t.type))?(this.match=r,o):null}}return this.match.findWrapping(t.type)};Un.prototype.finish=function(t){if(!(this.options&ku)){var n=this.content[this.content.length-1],r;n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-r[0].length)))}var o=T.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(T.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o};Un.prototype.popFromStashMark=function(t){for(var n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]};Un.prototype.applyPending=function(t){for(var n=0,r=this.pendingMarks;n<r.length;n++){var o=r[n];(this.type?this.type.allowsMarkType(o.type):u1(o.type,t))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}};Un.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!xu.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var Lt=function(t,n,r){this.parser=t,this.options=n,this.isOpen=r;var o=n.topNode,i,s=Od(n.preserveWhitespace)|(r?Pi:0);o?i=new Un(o.type,o.attrs,bt.none,bt.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Un(null,null,bt.none,bt.none,!0,null,s):i=new Un(t.schema.topNodeType,null,bt.none,bt.none,!0,null,s),this.nodes=[i],this.open=0,this.find=n.findPositions,this.needsBlock=!1},Mu={top:{configurable:!0},currentPos:{configurable:!0}};Mu.top.get=function(){return this.nodes[this.open]};Lt.prototype.addDOM=function(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){var n=t.getAttribute("style"),r=n?this.readStyles(l1(n)):null,o=this.top;if(r!=null)for(var i=0;i<r.length;i++)this.addPendingMark(r[i]);if(this.addElement(t),r!=null)for(var s=0;s<r.length;s++)this.removePendingMark(r[s],o)}};Lt.prototype.addTextNode=function(t){var n=t.nodeValue,r=this.top;if(r.options&Ou||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&ku)r.options&Ou?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var o=r.content[r.content.length-1],i=t.previousSibling;(!o||i&&i.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)};Lt.prototype.addElement=function(t,n){var r=t.nodeName.toLowerCase(),o;kd.hasOwnProperty(r)&&this.parser.normalizeLists&&s1(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,n));if(i?i.ignore:i1.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var s,a=this.top,l=this.needsBlock;if(xu.hasOwnProperty(r))s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,i,i.consuming===!1?o:null)};Lt.prototype.leafFallback=function(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))};Lt.prototype.ignoreFallback=function(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))};Lt.prototype.readStyles=function(t){var n=bt.none;t:for(var r=0;r<t.length;r+=2)for(var o=null;;){var i=this.parser.matchStyle(t[r],t[r+1],this,o);if(!i)continue t;if(i.ignore)return null;if(n=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(n),i.consuming===!1)o=i;else break}return n};Lt.prototype.addElementByRule=function(t,n,r){var o=this,i,s,a,l;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(t):i=this.enter(s,n.attrs,n.preserveWhitespace)):(a=this.parser.schema.marks[n.mark],l=a.create(n.attrs),this.addPendingMark(l));var u=this.top;if(s&&s.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(function(f){return o.insertNode(f)});else{var c=n.contentElement;typeof c=="string"?c=t.querySelector(c):typeof c=="function"&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,i)}i&&(this.sync(u),this.open--),l&&this.removePendingMark(l,u)};Lt.prototype.addAll=function(t,n,r,o){for(var i=r||0,s=r?t.childNodes[r]:t.firstChild,a=o==null?null:t.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(s),n&&xu.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(n);this.findAtPoint(t,i)};Lt.prototype.findPlace=function(t){for(var n,r,o=this.open;o>=0;o--){var i=this.nodes[o],s=i.findWrapping(t);if(s&&(!n||n.length>s.length)&&(n=s,r=i,!s.length)||i.solid)break}if(!n)return!1;this.sync(r);for(var a=0;a<n.length;a++)this.enterInner(n[a],null,!1);return!0};Lt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();var r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));for(var o=r.activeMarks,i=0;i<t.marks.length;i++)(!r.type||r.type.allowsMarkType(t.marks[i].type))&&(o=t.marks[i].addToSet(o));return r.content.push(t.mark(o)),!0}return!1};Lt.prototype.enter=function(t,n,r){var o=this.findPlace(t.create(n));return o&&this.enterInner(t,n,!0,r),o};Lt.prototype.enterInner=function(t,n,r,o){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,n);var s=o==null?i.options&~Pi:Od(o);i.options&Pi&&i.content.length==0&&(s|=Pi),this.nodes.push(new Un(t,n,i.activeMarks,i.pendingMarks,r,null,s)),this.open++};Lt.prototype.closeExtra=function(t){var n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}};Lt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)};Lt.prototype.sync=function(t){for(var n=this.open;n>=0;n--)if(this.nodes[n]==t){this.open=n;return}};Mu.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e};Lt.prototype.findAtPoint=function(t,n){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)};Lt.prototype.findInside=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)};Lt.prototype.findAround=function(t,n,r){if(t!=n&&this.find){for(var o=0;o<this.find.length;o++)if(this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)){var i=n.compareDocumentPosition(this.find[o].node);i&(r?2:4)&&(this.find[o].pos=this.currentPos)}}};Lt.prototype.findInText=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))};Lt.prototype.matchesContext=function(t){var n=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var r=t.split("/"),o=this.options.context,i=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),s=-(o?o.depth+1:0)+(i?0:1),a=function(l,u){for(;l>=0;l--){var c=r[l];if(c==""){if(l==r.length-1||l==0)continue;for(;u>=s;u--)if(a(l-1,u))return!0;return!1}else{var f=u>0||u==0&&i?n.nodes[u].type:o&&u>=s?o.node(u-s).type:null;if(!f||f.name!=c&&f.groups.indexOf(c)==-1)return!1;u--}}return!0};return a(r.length-1,this.open)};Lt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var n=t.depth;n>=0;n--){var r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var o in this.parser.schema.nodes){var i=this.parser.schema.nodes[o];if(i.isTextblock&&i.defaultAttrs)return i}};Lt.prototype.addPendingMark=function(t){var n=c1(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)};Lt.prototype.removePendingMark=function(t,n){for(var r=this.open;r>=0;r--){var o=this.nodes[r],i=o.pendingMarks.lastIndexOf(t);if(i>-1)o.pendingMarks=t.removeFromSet(o.pendingMarks);else{o.activeMarks=t.removeFromSet(o.activeMarks);var s=o.popFromStashMark(t);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==n)break}};Object.defineProperties(Lt.prototype,Mu);function s1(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&kd.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function a1(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function l1(e){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];n=t.exec(e);)r.push(n[1],n[2].trim());return r}function Md(e){var t={};for(var n in e)t[n]=e[n];return t}function u1(e,t){var n=t.schema.nodes,r=function(s){var a=n[s];if(!!a.allowsMarkType(e)){var l=[],u=function(c){l.push(c);for(var f=0;f<c.edgeCount;f++){var p=c.edge(f),h=p.type,d=p.next;if(h==t||l.indexOf(d)<0&&u(d))return!0}};if(u(a.contentMatch))return{v:!0}}};for(var o in n){var i=r(o);if(i)return i.v}}function c1(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}var ce=function(t,n){this.nodes=t||{},this.marks=n||{}};ce.prototype.serializeFragment=function(t,n,r){var o=this;n===void 0&&(n={}),r||(r=Tu(n).createDocumentFragment());var i=r,s=null;return t.forEach(function(a){if(s||a.marks.length){s||(s=[]);for(var l=0,u=0;l<s.length&&u<a.marks.length;){var c=a.marks[u];if(!o.marks[c.type.name]){u++;continue}if(!c.eq(s[l])||c.type.spec.spanning===!1)break;l+=2,u++}for(;l<s.length;)i=s.pop(),s.pop();for(;u<a.marks.length;){var f=a.marks[u++],p=o.serializeMark(f,a.isInline,n);p&&(s.push(f,i),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(o.serializeNodeInner(a,n))}),r};ce.prototype.serializeNodeInner=function(t,n){n===void 0&&(n={});var r=ce.renderSpec(Tu(n),this.nodes[t.type.name](t)),o=r.dom,i=r.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");n.onContent?n.onContent(t,i,n):this.serializeFragment(t.content,n,i)}return o};ce.prototype.serializeNode=function(t,n){n===void 0&&(n={});for(var r=this.serializeNodeInner(t,n),o=t.marks.length-1;o>=0;o--){var i=this.serializeMark(t.marks[o],t.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r};ce.prototype.serializeMark=function(t,n,r){r===void 0&&(r={});var o=this.marks[t.type.name];return o&&ce.renderSpec(Tu(r),o(t,n))};ce.renderSpec=function(t,n,r){if(r===void 0&&(r=null),typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;var o=n[0],i=o.indexOf(" ");i>0&&(r=o.slice(0,i),o=o.slice(i+1));var s=null,a=r?t.createElementNS(r,o):t.createElement(o),l=n[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(var c in l)if(l[c]!=null){var f=c.indexOf(" ");f>0?a.setAttributeNS(c.slice(0,f),c.slice(f+1),l[c]):a.setAttribute(c,l[c])}}for(var p=u;p<n.length;p++){var h=n[p];if(h===0){if(p<n.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{var d=ce.renderSpec(t,h,r),v=d.dom,m=d.contentDOM;if(a.appendChild(v),m){if(s)throw new RangeError("Multiple content holes");s=m}}}return{dom:a,contentDOM:s}};ce.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ce(this.nodesFromSchema(t),this.marksFromSchema(t)))};ce.nodesFromSchema=function(t){var n=Td(t.nodes);return n.text||(n.text=function(r){return r.text}),n};ce.marksFromSchema=function(t){return Td(t.marks)};function Td(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Tu(e){return e.document||window.document}var Ed=65535,Ad=Math.pow(2,16);function f1(e,t){return e+t*Ad}function _d(e){return e&Ed}function p1(e){return(e-(e&Ed))/Ad}var Eu=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=null),this.pos=t,this.deleted=n,this.recover=r},fe=function(t,n){n===void 0&&(n=!1),this.ranges=t,this.inverted=n};fe.prototype.recover=function(t){var n=0,r=_d(t);if(!this.inverted)for(var o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+p1(t)};fe.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};fe.prototype.map=function(t,n){return n===void 0&&(n=1),this._map(t,n,!0)};fe.prototype._map=function(t,n,r){for(var o=0,i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;var u=this.ranges[a+i],c=this.ranges[a+s],f=l+u;if(t<=f){var p=u?t==l?-1:t==f?1:n:n,h=l+o+(p<0?0:c);if(r)return h;var d=t==(n<0?l:f)?null:f1(a/3,t-l);return new Eu(h,n<0?t!=l:t!=f,d)}o+=c-u}return r?t+o:new Eu(t+o)};fe.prototype.touches=function(t,n){for(var r=0,o=_d(n),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[a+i],c=l+u;if(t<=c&&a==o*3)return!0;r+=this.ranges[a+s]-u}return!1};fe.prototype.forEach=function(t){for(var n=this.inverted?2:1,r=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),u=this.ranges[o+n],c=this.ranges[o+r];t(a,a+u,l,l+c),i+=c-u}};fe.prototype.invert=function(){return new fe(this.ranges,!this.inverted)};fe.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};fe.offset=function(t){return t==0?fe.empty:new fe(t<0?[0,-t,0]:[0,0,t])};fe.empty=new fe([]);var be=function(t,n,r,o){this.maps=t||[],this.from=r||0,this.to=o==null?this.maps.length:o,this.mirror=n};be.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.maps.length),new be(this.maps,this.mirror,t,n)};be.prototype.copy=function(){return new be(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};be.prototype.appendMap=function(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)};be.prototype.appendMapping=function(t){for(var n=0,r=this.maps.length;n<t.maps.length;n++){var o=t.getMirror(n);this.appendMap(t.maps[n],o!=null&&o<n?r+o:null)}};be.prototype.getMirror=function(t){if(this.mirror){for(var n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}};be.prototype.setMirror=function(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)};be.prototype.appendMappingInverted=function(t){for(var n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){var o=t.getMirror(n);this.appendMap(t.maps[n].invert(),o!=null&&o>n?r-o-1:null)}};be.prototype.invert=function(){var t=new be;return t.appendMappingInverted(this),t};be.prototype.map=function(t,n){if(n===void 0&&(n=1),this.mirror)return this._map(t,n,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t};be.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};be.prototype._map=function(t,n,r){for(var o=!1,i=this.from;i<this.to;i++){var s=this.maps[i],a=s.mapResult(t,n);if(a.recover!=null){var l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,t=this.maps[l].recover(a.recover);continue}}a.deleted&&(o=!0),t=a.pos}return r?t:new Eu(t,o)};function Ho(e){var t=Error.call(this,e);return t.__proto__=Ho.prototype,t}Ho.prototype=Object.create(Error.prototype);Ho.prototype.constructor=Ho;Ho.prototype.name="TransformError";var Wt=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new be},Au={before:{configurable:!0},docChanged:{configurable:!0}};Au.before.get=function(){return this.docs.length?this.docs[0]:this.doc};Wt.prototype.step=function(t){var n=this.maybeStep(t);if(n.failed)throw new Ho(n.failed);return this};Wt.prototype.maybeStep=function(t){var n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n};Au.docChanged.get=function(){return this.steps.length>0};Wt.prototype.addStep=function(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n};Object.defineProperties(Wt.prototype,Au);function la(){throw new Error("Override me")}var _u=Object.create(null),Se=function(){};Se.prototype.apply=function(t){return la()};Se.prototype.getMap=function(){return fe.empty};Se.prototype.invert=function(t){return la()};Se.prototype.map=function(t){return la()};Se.prototype.merge=function(t){return null};Se.prototype.toJSON=function(){return la()};Se.fromJSON=function(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=_u[n.stepType];if(!r)throw new RangeError("No step type "+n.stepType+" defined");return r.fromJSON(t,n)};Se.jsonID=function(t,n){if(t in _u)throw new RangeError("Duplicate use of step JSON ID "+t);return _u[t]=n,n.prototype.jsonID=t,n};var Ae=function(t,n){this.doc=t,this.failed=n};Ae.ok=function(t){return new Ae(t,null)};Ae.fail=function(t){return new Ae(null,t)};Ae.fromReplace=function(t,n,r,o){try{return Ae.ok(t.replace(n,r,o))}catch(i){if(i instanceof Rn)return Ae.fail(i.message);throw i}};var Gn=function(e){function t(n,r,o,i){e.call(this),this.from=n,this.to=r,this.slice=o,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){return this.structure&&Nu(r,this.from,this.to)?Ae.fail("Structure replace would overwrite content"):Ae.fromReplace(r,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new fe([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(r){return new t(this.from,this.from+this.slice.size,r.slice(this.from,this.to))},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted?null:new t(o.pos,Math.max(o.pos,i.pos),this.slice)},t.prototype.merge=function(r){if(!(r instanceof t)||r.structure||this.structure)return null;if(this.from+this.slice.size==r.from&&!this.slice.openEnd&&!r.slice.openStart){var o=this.slice.size+r.slice.size==0?$.empty:new $(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new t(this.from,this.to+(r.to-r.from),o,this.structure)}else if(r.to==this.from&&!this.slice.openStart&&!r.slice.openEnd){var i=this.slice.size+r.slice.size==0?$.empty:new $(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new t(r.from,this.to,i,this.structure)}else return null},t.prototype.toJSON=function(){var r={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(o.from,o.to,$.fromJSON(r,o.slice),!!o.structure)},t}(Se);Se.jsonID("replace",Gn);var He=function(e){function t(n,r,o,i,s,a,l){e.call(this),this.from=n,this.to=r,this.gapFrom=o,this.gapTo=i,this.slice=s,this.insert=a,this.structure=!!l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){if(this.structure&&(Nu(r,this.from,this.gapFrom)||Nu(r,this.gapTo,this.to)))return Ae.fail("Structure gap-replace would overwrite content");var o=r.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return Ae.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,o.content);return i?Ae.fromReplace(r,this.from,this.to,i):Ae.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new fe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(r){var o=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1),s=r.map(this.gapFrom,-1),a=r.map(this.gapTo,1);return o.deleted&&i.deleted||s<o.pos||a>i.pos?null:new t(o.pos,i.pos,s,a,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var r={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number"||typeof o.gapFrom!="number"||typeof o.gapTo!="number"||typeof o.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(o.from,o.to,o.gapFrom,o.gapTo,$.fromJSON(r,o.slice),o.insert,!!o.structure)},t}(Se);Se.jsonID("replaceAround",He);function Nu(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function h1(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Vo(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var o=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!h1(o,i,s))break}}Wt.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),s=r.after(o+1),a=i,l=s,u=T.empty,c=0,f=o,p=!1;f>t;f--)p||n.index(f)>0?(p=!0,u=T.from(n.node(f).copy(u)),c++):a--;for(var h=T.empty,d=0,v=o,m=!1;v>t;v--)m||r.after(v+1)<r.end(v)?(m=!0,h=T.from(r.node(v).copy(h)),d++):l++;return this.step(new He(a,l,i,s,new $(u.append(h),c,d),u.size-c,!0))};function Ru(e,t,n,r){r===void 0&&(r=e);var o=d1(e,t),i=o&&v1(r,t);return i?o.map(Nd).concat({type:t,attrs:n}).concat(i.map(Nd)):null}function Nd(e){return{type:e,attrs:null}}function d1(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function v1(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=s.length?s[s.length-1]:t,l=a.contentMatch,u=r;l&&u<o;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}Wt.prototype.wrap=function(e,t){for(var n=T.empty,r=t.length-1;r>=0;r--)n=T.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new He(o,i,o,i,new $(n,0,0),t.length,!0))};Wt.prototype.setBlockType=function(e,t,n,r){var o=this;if(t===void 0&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,function(s,a){if(s.isTextblock&&!s.hasMarkup(n,r)&&m1(o.doc,o.mapping.slice(i).map(a),n)){o.clearIncompatible(o.mapping.slice(i).map(a,1),n);var l=o.mapping.slice(i),u=l.map(a,1),c=l.map(a+s.nodeSize,1);return o.step(new He(u,c,u+1,c-1,new $(T.from(n.create(r,null,s.marks)),0,0),1,!0)),!1}}),this};function m1(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}Wt.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new He(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new $(T.from(i),0,0),1,!0))};function Yn(e,t,n,r){n===void 0&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var u=o.node(a),c=o.index(a);if(u.type.spec.isolating)return!1;var f=u.content.cutByIndex(c,u.childCount),p=r&&r[l]||u;if(p!=u&&(f=f.replaceChild(0,p.type.create(p.attrs))),!u.canReplace(c+1,u.childCount)||!p.type.validContent(f))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}Wt.prototype.split=function(e,t,n){t===void 0&&(t=1);for(var r=this.doc.resolve(e),o=T.empty,i=T.empty,s=r.depth,a=r.depth-t,l=t-1;s>a;s--,l--){o=T.from(r.node(s).copy(o));var u=n&&n[l];i=T.from(u?u.type.create(u.attrs,i):r.node(s).copy(i))}return this.step(new Gn(e,e,new $(o.append(i),t,t),!0))};function Iu(e,t){var n=e.resolve(t),r=n.index();return g1(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function g1(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}Wt.prototype.join=function(e,t){t===void 0&&(t=1);var n=new Gn(e-t,e+t,$.empty,!0);return this.step(n)};function y1(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function Rd(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(l>0?1:0),c=r.node(a),f=!1;if(s==1)f=c.canReplace(u,u,o);else{var p=c.contentMatchAt(u).findWrapping(o.firstChild.type);f=p&&c.canReplaceWith(u,u,p[0])}if(f)return l==0?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function Du(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Du(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return T.fromArray(r)}var Pu=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var o=this,i=r.slice(this.from,this.to),s=r.resolve(this.from),a=s.node(s.sharedDepth(this.to)),l=new $(Du(i.content,function(u,c){return!u.isAtom||!c.type.allowsMarkType(o.mark.type)?u:u.mark(o.mark.addToSet(u.marks))},a),i.openStart,i.openEnd);return Ae.fromReplace(r,this.from,this.to,l)},t.prototype.invert=function(){return new Li(this.from,this.to,this.mark)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted||o.pos>=i.pos?null:new t(o.pos,i.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(o.from,o.to,r.markFromJSON(o.mark))},t}(Se);Se.jsonID("addMark",Pu);var Li=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var o=this,i=r.slice(this.from,this.to),s=new $(Du(i.content,function(a){return a.mark(o.mark.removeFromSet(a.marks))}),i.openStart,i.openEnd);return Ae.fromReplace(r,this.from,this.to,s)},t.prototype.invert=function(){return new Pu(this.from,this.to,this.mark)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted||o.pos>=i.pos?null:new t(o.pos,i.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(o.from,o.to,r.markFromJSON(o.mark))},t}(Se);Se.jsonID("removeMark",Li);Wt.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,function(l,u,c){if(!!l.isInline){var f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(u,e),h=Math.min(u+l.nodeSize,t),d=n.addToSet(f),v=0;v<f.length;v++)f[v].isInSet(d)||(s&&s.to==p&&s.mark.eq(f[v])?s.to=h:o.push(s=new Li(p,h,f[v])));a&&a.to==p?a.to=h:i.push(a=new Pu(p,h,n))}}}),o.forEach(function(l){return r.step(l)}),i.forEach(function(l){return r.step(l)}),this};Wt.prototype.removeMark=function(e,t,n){var r=this;n===void 0&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,function(s,a){if(!!s.isInline){i++;var l=null;if(n instanceof fr)for(var u=s.marks,c;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length)for(var f=Math.min(a+s.nodeSize,t),p=0;p<l.length;p++){for(var h=l[p],d=void 0,v=0;v<o.length;v++){var m=o[v];m.step==i-1&&h.eq(o[v].style)&&(d=m)}d?(d.to=f,d.step=i):o.push({style:h,from:Math.max(a,e),to:f,step:i})}}}),o.forEach(function(s){return r.step(new Li(s.from,s.to,s.style))}),this};Wt.prototype.clearIncompatible=function(e,t,n){n===void 0&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,s=0;s<r.childCount;s++){var a=r.child(s),l=i+a.nodeSize,u=n.matchType(a.type,a.attrs);if(!u)o.push(new Gn(i,l,$.empty));else{n=u;for(var c=0;c<a.marks.length;c++)t.allowsMarkType(a.marks[c].type)||this.step(new Li(i,l,a.marks[c]))}i=l}if(!n.validEnd){var f=n.fillBefore(T.empty,!0);this.replace(i,i,new $(f,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this};function b1(e,t,n,r){if(n===void 0&&(n=t),r===void 0&&(r=$.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return Id(o,i,r)?new Gn(t,n,r):new an(o,i,r).fit()}Wt.prototype.replace=function(e,t,n){t===void 0&&(t=e),n===void 0&&(n=$.empty);var r=b1(this.doc,e,t,n);return r&&this.step(r),this};Wt.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new $(T.from(n),0,0))};Wt.prototype.delete=function(e,t){return this.replace(e,t,$.empty)};Wt.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};function Id(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}var an=function(t,n,r){this.$to=n,this.$from=t,this.unplaced=r,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=T.empty;for(var s=t.depth;s>0;s--)this.placed=T.from(t.node(s).copy(this.placed))},Dd={depth:{configurable:!0}};Dd.depth.get=function(){return this.frontier.length-1};an.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var n=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(n<0?this.$to:o.doc.resolve(n));if(!i)return null;for(var s=this.placed,a=o.depth,l=i.depth;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;var u=new $(s,a,l);if(n>-1)return new He(o.pos,n,this.$to.pos,this.$to.end(),u,r);if(u.size||o.pos!=this.$to.pos)return new Gn(o.pos,i.pos,u)};an.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var n=this.unplaced.openStart;n>=0;n--){var r=void 0,o=void 0;n?(o=Lu(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;for(var i=r.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],l=a.type,u=a.match,c=void 0,f=void 0;if(t==1&&(i?u.matchType(i.type)||(f=u.fillBefore(T.from(i),!1)):l.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:s,parent:o,inject:f};if(t==2&&i&&(c=u.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:s,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}};an.prototype.openMore=function(){var t=this.unplaced,n=t.content,r=t.openStart,o=t.openEnd,i=Lu(n,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new $(n,r+1,Math.max(o,i.size+r>=n.size-o?r+1:0)),!0)};an.prototype.dropNode=function(){var t=this.unplaced,n=t.content,r=t.openStart,o=t.openEnd,i=Lu(n,r);if(i.childCount<=1&&r>0){var s=n.size-r<=r+i.size;this.unplaced=new $(Bi(n,r-1,1),r-1,s?r-1:o)}else this.unplaced=new $(Bi(n,r,1),r,o)};an.prototype.placeNodes=function(t){for(var n=t.sliceDepth,r=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>r;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var l=this.unplaced,u=o?o.content:l.content,c=l.openStart-n,f=0,p=[],h=this.frontier[r],d=h.match,v=h.type;if(i){for(var m=0;m<i.childCount;m++)p.push(i.child(m));d=d.matchFragment(i)}for(var b=u.size+n-(l.content.size-l.openEnd);f<u.childCount;){var y=u.child(f),C=d.matchType(y.type);if(!C)break;f++,(f>1||c==0||y.content.size)&&(d=C,p.push(Pd(y.mark(v.allowedMarks(y.marks)),f==1?c:0,f==u.childCount?b:-1)))}var g=f==u.childCount;g||(b=-1),this.placed=Fi(this.placed,r,T.from(p)),this.frontier[r].match=d,g&&b<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var O=0,x=u;O<b;O++){var E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=g?n==0?$.empty:new $(Bi(l.content,n-1,1),n-1,b<0?l.openEnd:n-1):new $(Bi(l.content,n,f),l.openStart,l.openEnd)};an.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Bu(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;for(var r=this.$to,o=r.depth,i=this.$to.after(o);o>1&&i==this.$to.end(--o);)++i;return i};an.prototype.findCloseLevel=function(t){t:for(var n=Math.min(this.depth,t.depth);n>=0;n--){var r=this.frontier[n],o=r.match,i=r.type,s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=Bu(t,n,i,o,s);if(!!a){for(var l=n-1;l>=0;l--){var u=this.frontier[l],c=u.match,f=u.type,p=Bu(t,l,f,c,!0);if(!p||p.childCount)continue t}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}};an.prototype.close=function(t){var n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Fi(this.placed,n.depth,n.fit)),t=n.move;for(var r=n.depth+1;r<=t.depth;r++){var o=t.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,i)}return t};an.prototype.openFrontierNode=function(t,n,r){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Fi(this.placed,this.depth,T.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})};an.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),n=t.match.fillBefore(T.empty,!0);n.childCount&&(this.placed=Fi(this.placed,this.frontier.length,n))};Object.defineProperties(an.prototype,Dd);function Bi(e,t,n){return t==0?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(Bi(e.firstChild.content,t-1,n)))}function Fi(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Fi(e.lastChild.content,t-1,n)))}function Lu(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function Pd(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,Pd(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(T.empty,!0)))),e.copy(r)}function Bu(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!S1(n,i.content,s)?a:null}function S1(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}Wt.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(Id(r,o,n))return this.step(new Gn(e,t,n));var i=Bd(r,this.doc.resolve(t));i[i.length-1]==0&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==l&&i.splice(1,0,-a)}for(var c=i.indexOf(s),f=[],p=n.openStart,h=n.content,d=0;;d++){var v=h.firstChild;if(f.push(v),d==n.openStart)break;h=v.content}p>0&&f[p-1].type.spec.defining&&r.node(c).type!=f[p-1].type?p-=1:p>=2&&f[p-1].isTextblock&&f[p-2].type.spec.defining&&r.node(c).type!=f[p-2].type&&(p-=2);for(var m=n.openStart;m>=0;m--){var b=(m+p+1)%(n.openStart+1),y=f[b];if(!!y)for(var C=0;C<i.length;C++){var g=i[(C+c)%i.length],O=!0;g<0&&(O=!1,g=-g);var x=r.node(g-1),E=r.index(g-1);if(x.canReplaceWith(E,E,y.type,y.marks))return this.replace(r.before(g),O?o.after(g):t,new $(Ld(n.content,0,n.openStart,b),b,n.openEnd))}}for(var H=this.steps.length,j=i.length-1;j>=0&&(this.replace(e,t,n),!(this.steps.length>H));j--){var q=i[j];q<0||(e=r.before(q),t=o.after(q))}return this};function Ld(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(Ld(i.content,t+1,n,r,i)))}if(t>r){var s=o.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(T.empty,!0))}return e}Wt.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=y1(this.doc,e,n.type);r!=null&&(e=t=r)}return this.replaceRange(e,t,new $(T.from(n),0,0))};Wt.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=Bd(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&s==0||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};function Bd(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}var Fu=Object.create(null),rt=function(t,n,r){this.ranges=r||[new Fd(t.min(n),t.max(n))],this.$anchor=t,this.$head=n},pr={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};pr.anchor.get=function(){return this.$anchor.pos};pr.head.get=function(){return this.$head.pos};pr.from.get=function(){return this.$from.pos};pr.to.get=function(){return this.$to.pos};pr.$from.get=function(){return this.ranges[0].$from};pr.$to.get=function(){return this.ranges[0].$to};pr.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0};rt.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)};rt.prototype.replace=function(t,n){n===void 0&&(n=$.empty);for(var r=n.content.lastChild,o=null,i=0;i<n.openEnd;i++)o=r,r=r.lastChild;for(var s=t.steps.length,a=this.ranges,l=0;l<a.length;l++){var u=a[l],c=u.$from,f=u.$to,p=t.mapping.slice(s);t.replaceRange(p.map(c.pos),p.map(f.pos),l?$.empty:n),l==0&&zd(t,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}};rt.prototype.replaceWith=function(t,n){for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],a=s.$from,l=s.$to,u=t.mapping.slice(r),c=u.map(a.pos),f=u.map(l.pos);i?t.deleteRange(c,f):(t.replaceRangeWith(c,f,n),zd(t,r,n.isInline?-1:1))}};rt.findFrom=function(t,n,r){var o=t.parent.inlineContent?new vt(t):jo(t.node(0),t.parent,t.pos,t.index(),n,r);if(o)return o;for(var i=t.depth-1;i>=0;i--){var s=n<0?jo(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):jo(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(s)return s}};rt.near=function(t,n){return n===void 0&&(n=1),this.findFrom(t,n)||this.findFrom(t,-n)||new Xn(t.node(0))};rt.atStart=function(t){return jo(t,t,0,0,1)||new Xn(t)};rt.atEnd=function(t){return jo(t,t,t.content.size,t.childCount,-1)||new Xn(t)};rt.fromJSON=function(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=Fu[n.type];if(!r)throw new RangeError("No selection type "+n.type+" defined");return r.fromJSON(t,n)};rt.jsonID=function(t,n){if(t in Fu)throw new RangeError("Duplicate use of selection JSON ID "+t);return Fu[t]=n,n.prototype.jsonID=t,n};rt.prototype.getBookmark=function(){return vt.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(rt.prototype,pr);rt.prototype.visible=!0;var Fd=function(t,n){this.$from=t,this.$to=n},vt=function(e){function t(r,o){o===void 0&&(o=r),e.call(this,r,o)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(o,i){var s=o.resolve(i.map(this.head));if(!s.parent.inlineContent)return e.near(s);var a=o.resolve(i.map(this.anchor));return new t(a.parent.inlineContent?a:s,s)},t.prototype.replace=function(o,i){if(i===void 0&&(i=$.empty),e.prototype.replace.call(this,o,i),i==$.empty){var s=this.$from.marksAcross(this.$to);s&&o.ensureMarks(s)}},t.prototype.eq=function(o){return o instanceof t&&o.anchor==this.anchor&&o.head==this.head},t.prototype.getBookmark=function(){return new zi(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(o,i){if(typeof i.anchor!="number"||typeof i.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(o.resolve(i.anchor),o.resolve(i.head))},t.create=function(o,i,s){s===void 0&&(s=i);var a=o.resolve(i);return new this(a,s==i?a:o.resolve(s))},t.between=function(o,i,s){var a=o.pos-i.pos;if((!s||a)&&(s=a>=0?1:-1),!i.parent.inlineContent){var l=e.findFrom(i,s,!0)||e.findFrom(i,-s,!0);if(l)i=l.$head;else return e.near(i,s)}return o.parent.inlineContent||(a==0?o=i:(o=(e.findFrom(o,-s,!0)||e.findFrom(o,s,!0)).$anchor,o.pos<i.pos!=a<0&&(o=i))),new t(o,i)},Object.defineProperties(t.prototype,n),t}(rt);rt.jsonID("text",vt);var zi=function(t,n){this.anchor=t,this.head=n};zi.prototype.map=function(t){return new zi(t.map(this.anchor),t.map(this.head))};zi.prototype.resolve=function(t){return vt.between(t.resolve(this.anchor),t.resolve(this.head))};var ft=function(e){function t(n){var r=n.nodeAfter,o=n.node(0).resolve(n.pos+r.nodeSize);e.call(this,n,o),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,o){var i=o.mapResult(this.anchor),s=i.deleted,a=i.pos,l=r.resolve(a);return s?e.near(l):new t(l)},t.prototype.content=function(){return new $(T.from(this.node),0,0)},t.prototype.eq=function(r){return r instanceof t&&r.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new ua(this.anchor)},t.fromJSON=function(r,o){if(typeof o.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(r.resolve(o.anchor))},t.create=function(r,o){return new this(r.resolve(o))},t.isSelectable=function(r){return!r.isText&&r.type.spec.selectable!==!1},t}(rt);ft.prototype.visible=!1;rt.jsonID("node",ft);var ua=function(t){this.anchor=t};ua.prototype.map=function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new zi(o,o):new ua(o)};ua.prototype.resolve=function(t){var n=t.resolve(this.anchor),r=n.nodeAfter;return r&&ft.isSelectable(r)?new ft(n):rt.near(n)};var Xn=function(e){function t(n){e.call(this,n.resolve(0),n.resolve(n.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(r,o){if(o===void 0&&(o=$.empty),o==$.empty){r.delete(0,r.doc.content.size);var i=e.atStart(r.doc);i.eq(r.selection)||r.setSelection(i)}else e.prototype.replace.call(this,r,o)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(r){return new t(r)},t.prototype.map=function(r){return new t(r)},t.prototype.eq=function(r){return r instanceof t},t.prototype.getBookmark=function(){return w1},t}(rt);rt.jsonID("all",Xn);var w1={map:function(){return this},resolve:function(t){return new Xn(t)}};function jo(e,t,n,r,o,i){if(t.inlineContent)return vt.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&ft.isSelectable(a))return ft.create(e,n-(o<0?a.nodeSize:0))}else{var l=jo(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function zd(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof Gn||o instanceof He){var i=e.mapping.maps[r],s;i.forEach(function(a,l,u,c){s==null&&(s=c)}),e.setSelection(rt.near(e.doc.resolve(s),n))}}}var Hd=1,ca=2,Vd=4,C1=function(e){function t(r){e.call(this,r.doc),this.time=Date.now(),this.curSelection=r.selection,this.curSelectionFor=0,this.storedMarks=r.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(o){if(o.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=o,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Hd)&~ca,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&Hd)>0},t.prototype.setStoredMarks=function(o){return this.storedMarks=o,this.updated|=ca,this},t.prototype.ensureMarks=function(o){return bt.sameSet(this.storedMarks||this.selection.$from.marks(),o)||this.setStoredMarks(o),this},t.prototype.addStoredMark=function(o){return this.ensureMarks(o.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(o){return this.ensureMarks(o.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&ca)>0},t.prototype.addStep=function(o,i){e.prototype.addStep.call(this,o,i),this.updated=this.updated&~ca,this.storedMarks=null},t.prototype.setTime=function(o){return this.time=o,this},t.prototype.replaceSelection=function(o){return this.selection.replace(this,o),this},t.prototype.replaceSelectionWith=function(o,i){var s=this.selection;return i!==!1&&(o=o.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||bt.none))),s.replaceWith(this,o),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(o,i,s){s===void 0&&(s=i);var a=this.doc.type.schema;if(i==null)return o?this.replaceSelectionWith(a.text(o),!0):this.deleteSelection();if(!o)return this.deleteRange(i,s);var l=this.storedMarks;if(!l){var u=this.doc.resolve(i);l=s==i?u.marks():u.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(i,s,a.text(o,l)),this.selection.empty||this.setSelection(rt.near(this.selection.$to)),this},t.prototype.setMeta=function(o,i){return this.meta[typeof o=="string"?o:o.key]=i,this},t.prototype.getMeta=function(o){return this.meta[typeof o=="string"?o:o.key]},n.isGeneric.get=function(){for(var r in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=Vd,this},n.scrolledIntoView.get=function(){return(this.updated&Vd)>0},Object.defineProperties(t.prototype,n),t}(Wt);function jd(e,t){return!t||!e?e:e.bind(t)}var Hi=function(t,n,r){this.name=t,this.init=jd(n.init,r),this.apply=jd(n.apply,r)},x1=[new Hi("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Hi("selection",{init:function(t,n){return t.selection||rt.atStart(n.doc)},apply:function(t){return t.selection}}),new Hi("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,n,r,o){return o.selection.$cursor?t.storedMarks:null}}),new Hi("scrollToSelection",{init:function(){return 0},apply:function(t,n){return t.scrolledIntoView?n+1:n}})],zu=function(t,n){var r=this;this.schema=t,this.fields=x1.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach(function(o){if(r.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");r.plugins.push(o),r.pluginsByKey[o.key]=o,o.spec.state&&r.fields.push(new Hi(o.key,o.spec.state,o))})},we=function(t){this.config=t},fa={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};fa.schema.get=function(){return this.config.schema};fa.plugins.get=function(){return this.config.plugins};we.prototype.apply=function(t){return this.applyTransaction(t).state};we.prototype.filterTransaction=function(t,n){n===void 0&&(n=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=n){var o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0};we.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var n=[t],r=this.applyInner(t),o=null;;){for(var i=!1,s=0;s<this.config.plugins.length;s++){var a=this.config.plugins[s];if(a.spec.appendTransaction){var l=o?o[s].n:0,u=o?o[s].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!o){o=[];for(var f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}};we.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new we(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}for(var s=0;s<Vi.length;s++)Vi[s](this,t,n);return n};fa.tr.get=function(){return new C1(this)};we.create=function(t){for(var n=new zu(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new we(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r};we.prototype.reconfigure=function(t){for(var n=new zu(this.schema,t.plugins),r=n.fields,o=new we(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(t,o)}return o};we.prototype.toJSON=function(t){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(function(s){return s.toJSON()})),t&&typeof t=="object")for(var r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n};we.fromJSON=function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new zu(t.schema,t.plugins),i=new we(o);return o.fields.forEach(function(s){if(s.name=="doc")i.doc=wt.fromJSON(t.schema,n.doc);else if(s.name=="selection")i.selection=rt.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var a in r){var l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=u.fromJSON.call(l,t,n[a],i);return}}i[s.name]=s.init(t,i)}}),i};we.addApplyListener=function(t){Vi.push(t)};we.removeApplyListener=function(t){var n=Vi.indexOf(t);n>-1&&Vi.splice(n,1)};Object.defineProperties(we.prototype,fa);var Vi=[];function $d(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):r=="handleDOMEvents"&&(o=$d(o,t,{})),n[r]=o}return n}var Ce=function(t){this.props={},t.props&&$d(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:Wd("plugin")};Ce.prototype.getState=function(t){return t[this.key]};var Hu=Object.create(null);function Wd(e){return e in Hu?e+"$"+ ++Hu[e]:(Hu[e]=0,e+"$")}var Ve=function(t){t===void 0&&(t="key"),this.key=Wd(t)};Ve.prototype.get=function(t){return t.config.pluginsByKey[this.key]};Ve.prototype.getState=function(t){return t[this.key]};function Vu(e,t){return e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Jd(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var i=Kd(o);if(!i){var s=o.blockRange(),a=s&&Vo(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}var l=i.nodeBefore;if(!l.type.spec.isolating&&nv(e,i,t))return!0;if(o.parent.content.size==0&&($o(l,"end")||ft.isSelectable(l))){if(t){var u=e.tr.deleteRange(o.before(),o.after());u.setSelection($o(l,"end")?rt.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):ft.create(u.doc,i.pos-l.nodeSize)),t(u.scrollIntoView())}return!0}return l.isAtom&&i.depth==o.depth-1?(t&&t(e.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0):!1}function $o(e,t,n){for(;e;e=t=="start"?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(n&&e.childCount!=1)return!1}return!1}function qd(e,t,n){var r=e.selection,o=r.$head,i=r.empty,s=o;if(!i)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;s=Kd(o)}var a=s&&s.nodeBefore;return!a||!ft.isSelectable(a)?!1:(t&&t(e.tr.setSelection(ft.create(e.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)}function Kd(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ud(e,t,n){var r=e.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var i=Yd(o);if(!i)return!1;var s=i.nodeAfter;if(nv(e,i,t))return!0;if(o.parent.content.size==0&&($o(s,"start")||ft.isSelectable(s))){if(t){var a=e.tr.deleteRange(o.before(),o.after());a.setSelection($o(s,"start")?rt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ft.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}return s.isAtom&&i.depth==o.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1}function Gd(e,t,n){var r=e.selection,o=r.$head,i=r.empty,s=o;if(!i)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;s=Yd(o)}var a=s&&s.nodeAfter;return!a||!ft.isSelectable(a)?!1:(t&&t(e.tr.setSelection(ft.create(e.doc,s.pos)).scrollIntoView()),!0)}function Yd(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function Xd(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),s=i&&Vo(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function Qd(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!r.parent.type.spec.code||!r.sameParent(o)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)}function ju(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Zd(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=ju(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,a))return!1;if(t){var l=r.after(),u=e.tr.replaceWith(l,l,a.createAndFill());u.setSelection(rt.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0}function tv(e,t){var n=e.selection,r=n.$from,o=n.$to;if(n instanceof Xn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=ju(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(vt.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function ev(e,t){var n=e.selection,r=n.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(Yn(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}var i=r.blockRange(),s=i&&Vo(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function k1(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof ft&&e.selection.node.isBlock)return!r.parentOffset||!Yn(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof vt||e.selection instanceof Xn)&&s.deleteSelection();var a=r.depth==0?null:ju(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=i&&a?[{type:a}]:null,u=Yn(s.doc,s.mapping.map(r.pos),1,l);if(!l&&!u&&Yn(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])&&(l=[{type:a}],u=!0),u&&(s.split(s.mapping.map(r.pos),1,l),!i&&!r.parentOffset&&r.parent.type!=a)){var c=s.mapping.map(r.before()),f=s.doc.resolve(c);r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}t(s.scrollIntoView())}return!0}function O1(e,t){var n=e.selection,r=n.$from,o=n.to,i,s=r.sharedDepth(o);return s==0?!1:(i=r.before(s),t&&t(e.tr.setSelection(ft.create(e.doc,i))),!0)}function M1(e,t){return t&&t(e.tr.setSelection(new Xn(e.doc))),!0}function T1(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(i,i+1)||!(o.isTextblock||Iu(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function nv(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i,s;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(T1(e,t,n))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(i=(s=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&s.matchType(i[0]||o.type).validEnd){if(n){for(var l=t.pos+o.nodeSize,u=T.empty,c=i.length-1;c>=0;c--)u=T.from(i[c].create(null,u));u=T.from(r.copy(u));var f=e.tr.step(new He(t.pos-1,l,t.pos,l,new $(u,1,0),i.length,!0)),p=l+2*i.length;Iu(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}var h=rt.findFrom(t,1),d=h&&h.$from.blockRange(h.$to),v=d&&Vo(d);if(v!=null&&v>=t.depth)return n&&n(e.tr.lift(d,v).scrollIntoView()),!0;if(a&&$o(o,"start",!0)&&$o(r,"end")){for(var m=r,b=[];b.push(m),!m.isTextblock;)m=m.lastChild;for(var y=o,C=1;!y.isTextblock;y=y.firstChild)C++;if(m.canReplace(m.childCount,m.childCount,y.content)){if(n){for(var g=T.empty,O=b.length-1;O>=0;O--)g=T.from(b[O].copy(g));var x=e.tr.step(new He(t.pos-b.length,t.pos+o.nodeSize,t.pos+C,t.pos+o.nodeSize-C,new $(g,b.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function rv(e,t){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),l=a&&Ru(a,e,t);return l?(r&&r(n.tr.wrap(a,l).scrollIntoView()),!0):!1}}function E1(e,t){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,function(l,u){if(a)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)a=!0;else{var c=n.doc.resolve(u),f=c.index();a=c.parent.canReplaceWith(f,f+1,e)}}),a?(r&&r(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0):!1}}function $u(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(n,r,o){for(var i=0;i<e.length;i++)if(e[i](n,r,o))return!0;return!1}}var Wu=$u(Vu,Jd,qd),ov=$u(Vu,Ud,Gd),hr={Enter:$u(Qd,tv,ev,k1),"Mod-Enter":Zd,Backspace:Wu,"Mod-Backspace":Wu,"Shift-Backspace":Wu,Delete:ov,"Mod-Delete":ov,"Mod-a":M1},A1={"Ctrl-h":hr.Backspace,"Alt-Backspace":hr["Mod-Backspace"],"Ctrl-d":hr.Delete,"Ctrl-Alt-Backspace":hr["Mod-Delete"],"Alt-Delete":hr["Mod-Delete"],"Alt-d":hr["Mod-Delete"]};for(var iv in hr)A1[iv]=hr[iv];typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform()=="darwin";function _1(e,t){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),l=!1,u=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(e)&&a.startIndex==0){if(i.index(a.depth-1)==0)return!1;var c=n.doc.resolve(a.start-2);u=new Ii(c,c,a.depth),a.endIndex<a.parent.childCount&&(a=new Ii(i,n.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var f=Ru(u,e,t,a);return f?(r&&r(N1(n.tr,a,f,l,e).scrollIntoView()),!0):!1}}function N1(e,t,n,r,o){for(var i=T.empty,s=n.length-1;s>=0;s--)i=T.from(n[s].type.create(n[s].attrs,i));e.step(new He(t.start-(r?2:0),t.end,t.start,t.end,new $(i,0,0),n.length,!0));for(var a=0,l=0;l<n.length;l++)n[l].type==o&&(a=l+1);for(var u=n.length-a,c=t.start+n.length-(r?2:0),f=t.parent,p=t.startIndex,h=t.endIndex,d=!0;p<h;p++,d=!1)!d&&Yn(e.doc,c,u)&&(e.split(c,u),c+=2*u),c+=f.child(p).nodeSize;return e}function R1(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,s=o.blockRange(i,function(a){return a.childCount&&a.firstChild.type==e});return s?n?o.node(s.depth-1).type==e?I1(t,n,e,s):D1(t,n,s):!0:!1}}function I1(e,t,n,r){var o=e.tr,i=r.end,s=r.$to.end(r.depth);return i<s&&(o.step(new He(i-1,s,i,s,new $(T.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ii(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth)),t(o.lift(r,Vo(r)).scrollIntoView()),!0}function D1(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)i-=o.child(s).nodeSize,r.delete(i-1,i+1);var l=r.doc.resolve(n.start),u=l.nodeAfter;if(r.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var c=n.startIndex==0,f=n.endIndex==o.childCount,p=l.node(-1),h=l.index(-1);if(!p.canReplace(h+(c?0:1),h+1,u.content.append(f?T.empty:T.from(o))))return!1;var d=l.pos,v=d+u.nodeSize;return r.step(new He(d-(c?1:0),v+(f?1:0),d+1,v-1,new $((c?T.empty:T.from(o.copy(T.empty))).append(f?T.empty:T.from(o.copy(T.empty))),c?0:1,f?0:1),c?0:1)),t(r.scrollIntoView()),!0}function P1(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,s=o.blockRange(i,function(v){return v.childCount&&v.firstChild.type==e});if(!s)return!1;var a=s.startIndex;if(a==0)return!1;var l=s.parent,u=l.child(a-1);if(u.type!=e)return!1;if(n){var c=u.lastChild&&u.lastChild.type==l.type,f=T.from(c?e.create():null),p=new $(T.from(e.create(null,T.from(l.type.create(null,f)))),c?3:1,0),h=s.start,d=s.end;n(t.tr.step(new He(h-(c?3:1),d,h,d,p,1,!0)).scrollIntoView())}return!0}}var L={};if(typeof navigator!="undefined"&&typeof document!="undefined"){var Ju=/Edge\/(\d+)/.exec(navigator.userAgent),sv=/MSIE \d/.test(navigator.userAgent),qu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ku=L.ie=!!(sv||qu||Ju);L.ie_version=sv?document.documentMode||6:qu?+qu[1]:Ju?+Ju[1]:null,L.gecko=!Ku&&/gecko\/(\d+)/i.test(navigator.userAgent),L.gecko_version=L.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Uu=!Ku&&/Chrome\/(\d+)/.exec(navigator.userAgent);L.chrome=!!Uu,L.chrome_version=Uu&&+Uu[1],L.safari=!Ku&&/Apple Computer/.test(navigator.vendor),L.ios=L.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),L.mac=L.ios||/Mac/.test(navigator.platform),L.android=/Android \d/.test(navigator.userAgent),L.webkit="webkitFontSmoothing"in document.documentElement.style,L.webkit_version=L.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Qe=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Gu=function(e){var t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},av=null,Qn=function(e,t,n){var r=av||(av=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},pa=function(e,t,n,r){return n&&(lv(e,t,n,r,-1)||lv(e,t,n,r,1))},L1=/^(img|br|input|textarea|hr)$/i;function lv(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:In(e))){var i=e.parentNode;if(i.nodeType!=1||F1(e)||L1.test(e.nodeName)||e.contentEditable=="false")return!1;t=Qe(e)+(o<0?0:1),e=i}else if(e.nodeType==1){if(e=e.childNodes[t+(o<0?-1:0)],e.contentEditable=="false")return!1;t=o<0?In(e):0}else return!1}}function In(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function B1(e,t,n){for(var r=t==0,o=t==In(e);r||o;){if(e==n)return!0;var i=Qe(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,o=o&&i==In(e)}}function F1(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Yu=function(e){var t=e.isCollapsed;return t&&L.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Wo(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function z1(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function dr(e,t){return typeof e=="number"?e:e[t]}function H1(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function uv(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;s;s=Gu(s))if(s.nodeType==1){var a=s==i.body||s.nodeType!=1,l=a?z1(i):H1(s),u=0,c=0;if(t.top<l.top+dr(r,"top")?c=-(l.top-t.top+dr(o,"top")):t.bottom>l.bottom-dr(r,"bottom")&&(c=t.bottom-l.bottom+dr(o,"bottom")),t.left<l.left+dr(r,"left")?u=-(l.left-t.left+dr(o,"left")):t.right>l.right-dr(r,"right")&&(u=t.right-l.right+dr(o,"right")),u||c)if(a)i.defaultView.scrollBy(u,c);else{var f=s.scrollLeft,p=s.scrollTop;c&&(s.scrollTop+=c),u&&(s.scrollLeft+=u);var h=s.scrollLeft-f,d=s.scrollTop-p;t={left:t.left-h,top:t.top-d,right:t.right-h,bottom:t.bottom-d}}if(a)break}}function V1(e){for(var t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,o,i=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(!(a==e.dom||!e.dom.contains(a))){var l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}}return{refDOM:r,refTop:o,stack:cv(e.dom)}}function cv(e){for(var t=[],n=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=n);e=Gu(e));return t}function j1(e){var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0;fv(r,o==0?0:o-n)}function fv(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Jo=null;function $1(e){if(e.setActive)return e.setActive();if(Jo)return e.focus(Jo);var t=cv(e);e.focus(Jo==null?{get preventScroll(){return Jo={preventScroll:!0},!0}}:void 0),Jo||(Jo=!1,fv(t,0))}function pv(e,t){for(var n,r=2e8,o,i=0,s=t.top,a=t.top,l=e.firstChild,u=0;l;l=l.nextSibling,u++){var c=void 0;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Qn(l).getClientRects();else continue;for(var f=0;f<c.length;f++){var p=c[f];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(h<r){n=l,r=h,o=h&&n.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,l.nodeType==1&&h&&(i=u+(t.left>=(p.left+p.right)/2?1:0));continue}}!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=u+1)}}return n&&n.nodeType==3?W1(n,o):!n||r&&n.nodeType==1?{node:e,offset:i}:pv(n,o)}function W1(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=vr(r,1);if(i.top!=i.bottom&&Xu(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function Xu(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function J1(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function q1(e,t,n){var r=pv(t,n),o=r.node,i=r.offset,s=-1;if(o.nodeType==1&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}function K1(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else if(a.right<r.left||a.bottom<r.top)o=s.posAfter;else break}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n)}function hv(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=e.childNodes[i];if(s.nodeType==1)for(var a=s.getClientRects(),l=0;l<a.length;l++){var u=a[l];if(Xu(t,u))return hv(s,t,u)}if((i=(i+1)%r)==o)break}return e}function U1(e,t){var n,r,o=e.dom.ownerDocument,i,s;if(o.caretPositionFromPoint)try{var a=o.caretPositionFromPoint(t.left,t.top);a&&(n=a,i=n.offsetNode,s=n.offset)}catch{}if(!i&&o.caretRangeFromPoint){var l=o.caretRangeFromPoint(t.left,t.top);l&&(r=l,i=r.startContainer,s=r.startOffset)}var u=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top+1),c;if(!u||!e.dom.contains(u.nodeType!=1?u.parentNode:u)){var f=e.dom.getBoundingClientRect();if(!Xu(t,f)||(u=hv(e.dom,t,f),!u))return null}if(L.safari)for(var p=u;i&&p;p=Gu(p))p.draggable&&(i=s=null);if(u=J1(u,t),i){if(L.gecko&&i.nodeType==1&&(s=Math.min(s,i.childNodes.length),s<i.childNodes.length)){var h=i.childNodes[s],d;h.nodeName=="IMG"&&(d=h.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&s++}i==e.dom&&s==i.childNodes.length-1&&i.lastChild.nodeType==1&&t.top>i.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:(s==0||i.nodeType!=1||i.childNodes[s-1].nodeName!="BR")&&(c=K1(e,i,s,t))}c==null&&(c=q1(e,u,t));var v=e.docView.nearestDesc(u,!0);return{pos:c,inside:v?v.posAtStart-v.border:-1}}function vr(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}var G1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function dv(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,s=L.webkit||L.gecko;if(o.nodeType==3)if(s&&(G1.test(o.nodeValue)||(n<0?!i:i==o.nodeValue.length))){var a=vr(Qn(o,i,i),n);if(L.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var l=vr(Qn(o,i-1,i-1),-1);if(l.top==a.top){var u=vr(Qn(o,i,i+1),-1);if(u.top!=a.top)return ji(u,u.left<l.left)}}return a}else{var c=i,f=i,p=n<0?1:-1;return n<0&&!i?(f++,p=-1):n>=0&&i==o.nodeValue.length?(c--,p=1):n<0?c--:f++,ji(vr(Qn(o,c,f),p),p<0)}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(n<0||i==In(o))){var h=o.childNodes[i-1];if(h.nodeType==1)return Qu(h.getBoundingClientRect(),!1)}if(i<In(o)){var d=o.childNodes[i];if(d.nodeType==1)return Qu(d.getBoundingClientRect(),!0)}return Qu(o.getBoundingClientRect(),n>=0)}if(i&&(n<0||i==In(o))){var v=o.childNodes[i-1],m=v.nodeType==3?Qn(v,In(v)-(s?0:1)):v.nodeType==1&&(v.nodeName!="BR"||!v.nextSibling)?v:null;if(m)return ji(vr(m,1),!1)}if(i<In(o)){for(var b=o.childNodes[i];b.pmViewDesc&&b.pmViewDesc.ignoreForCoords;)b=b.nextSibling;var y=b?b.nodeType==3?Qn(b,0,s?0:1):b.nodeType==1?b:null:null;if(y)return ji(vr(y,-1),!0)}return ji(vr(o.nodeType==3?Qn(o):o,-n),n>=0)}function ji(e,t){if(e.width==0)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Qu(e,t){if(e.height==0)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function vv(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function Y1(e,t,n){var r=t.selection,o=n=="up"?r.$from:r.$to;return vv(e,t,function(){for(var i=e.docView.domFromPos(o.pos,n=="up"?-1:1),s=i.node;;){var a=e.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.dom;break}s=a.dom.parentNode}for(var l=dv(e,o.pos,1),u=s.firstChild;u;u=u.nextSibling){var c=void 0;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Qn(u,0,u.nodeValue.length).getClientRects();else continue;for(var f=0;f<c.length;f++){var p=c[f];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}var X1=/[\u0590-\u08ac]/;function Q1(e,t,n){var r=t.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,l=e.root.getSelection();return!X1.test(o.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:a:vv(e,t,function(){var u=l.getRangeAt(0),c=l.focusNode,f=l.focusOffset,p=l.caretBidiLevel;l.modify("move",n,"character");var h=o.depth?e.docView.domAfterPos(o.before()):e.dom,d=!h.contains(l.focusNode.nodeType==1?l.focusNode:l.focusNode.parentNode)||c==l.focusNode&&f==l.focusOffset;return l.removeAllRanges(),l.addRange(u),p!=null&&(l.caretBidiLevel=p),d})}var mv=null,gv=null,yv=!1;function Z1(e,t,n){return mv==t&&gv==n?yv:(mv=t,gv=n,yv=n=="up"||n=="down"?Y1(e,t,n):Q1(e,t,n))}var Sn=0,bv=1,$i=2,mr=3,Pt=function(t,n,r,o){this.parent=t,this.children=n,this.dom=r,r.pmViewDesc=this,this.contentDOM=o,this.dirty=Sn},Dn={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};Pt.prototype.matchesWidget=function(){return!1};Pt.prototype.matchesMark=function(){return!1};Pt.prototype.matchesNode=function(){return!1};Pt.prototype.matchesHack=function(t){return!1};Pt.prototype.parseRule=function(){return null};Pt.prototype.stopEvent=function(){return!1};Dn.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e};Dn.border.get=function(){return 0};Pt.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()};Pt.prototype.posBeforeChild=function(t){for(var n=0,r=this.posAtStart;n<this.children.length;n++){var o=this.children[n];if(o==t)return r;r+=o.size}};Dn.posBefore.get=function(){return this.parent.posBeforeChild(this)};Dn.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0};Dn.posAfter.get=function(){return this.posBefore+this.size};Dn.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border};Pt.prototype.localPosFromDOM=function(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){var o,i;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{var s,a;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}var l;if(t==this.dom&&this.contentDOM)l=n>Qe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(var u=t;;u=u.parentNode){if(u==this.dom){l=!1;break}if(u.parentNode.firstChild!=u)break}if(l==null&&n==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){l=!0;break}if(c.parentNode.lastChild!=c)break}}return(l==null?r>0:l)?this.posAtEnd:this.posAtStart};Pt.prototype.nearestDesc=function(t,n){for(var r=!0,o=t;o;o=o.parentNode){var i=this.getDesc(o);if(i&&(!n||i.node))if(r&&i.nodeDOM&&!(i.nodeDOM.nodeType==1?i.nodeDOM.contains(t.nodeType==1?t:t.parentNode):i.nodeDOM==t))r=!1;else return i}};Pt.prototype.getDesc=function(t){for(var n=t.pmViewDesc,r=n;r;r=r.parent)if(r==this)return n};Pt.prototype.posFromDOM=function(t,n,r){for(var o=t;o;o=o.parentNode){var i=this.getDesc(o);if(i)return i.localPosFromDOM(t,n,r)}return-1};Pt.prototype.descAt=function(t){for(var n=0,r=0;n<this.children.length;n++){var o=this.children[n],i=r+o.size;if(r==t&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(t<i)return o.descAt(t-r-o.border);r=i}};Pt.prototype.domFromPos=function(t,n){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,o=0,i=0;r<this.children.length;r++){var s=this.children[r],a=i+s.size;if(a>t||s instanceof xv){o=t-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(var l=void 0;r&&!(l=this.children[r-1]).size&&l instanceof Sv&&l.widget.type.side>=0;r--);if(n<=0){for(var u,c=!0;u=r?this.children[r-1]:null,!(!u||u.dom.parentNode==this.contentDOM);r--,c=!1);return u&&n&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,n):{node:this.contentDOM,offset:u?Qe(u.dom)+1:0}}else{for(var f,p=!0;f=r<this.children.length?this.children[r]:null,!(!f||f.dom.parentNode==this.contentDOM);r++,p=!1);return f&&p&&!f.border&&!f.domAtom?f.domFromPos(0,n):{node:this.contentDOM,offset:f?Qe(f.dom):this.contentDOM.childNodes.length}}};Pt.prototype.parseRange=function(t,n,r){if(r===void 0&&(r=0),this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,i=-1,s=r,a=0;;a++){var l=this.children[a],u=s+l.size;if(o==-1&&t<=u){var c=s+l.border;if(t>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=s;for(var f=a;f>0;f--){var p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Qe(p.dom)+1;break}t-=p.size}o==-1&&(o=0)}if(o>-1&&(u>n||a==this.children.length-1)){n=u;for(var h=a+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Qe(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:i}};Pt.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)};Pt.prototype.domAfterPos=function(t){var n=this.domFromPos(t,0),r=n.node,o=n.offset;if(r.nodeType!=1||o==r.childNodes.length)throw new RangeError("No node after pos "+t);return r.childNodes[o]};Pt.prototype.setSelection=function(t,n,r,o){for(var i=Math.min(t,n),s=Math.max(t,n),a=0,l=0;a<this.children.length;a++){var u=this.children[a],c=l+u.size;if(i>l&&s<c)return u.setSelection(t-l-u.border,n-l-u.border,r,o);l=c}var f=this.domFromPos(t,t?-1:1),p=n==t?f:this.domFromPos(n,n?-1:1),h=r.getSelection(),d=!1;if((L.gecko||L.safari)&&t==n){var v=f.node,m=f.offset;if(v.nodeType==3){if(d=m&&v.nodeValue[m-1]==`
`,d&&m==v.nodeValue.length)for(var b=v,y=void 0;b;b=b.parentNode){if(y=b.nextSibling){y.nodeName=="BR"&&(f=p={node:y.parentNode,offset:Qe(y)+1});break}var C=b.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{var g=v.childNodes[m-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(L.gecko&&h.focusNode&&h.focusNode!=p.node&&h.focusNode.nodeType==1){var O=h.focusNode.childNodes[h.focusOffset];O&&O.contentEditable=="false"&&(o=!0)}if(!(!(o||d&&L.safari)&&pa(f.node,f.offset,h.anchorNode,h.anchorOffset)&&pa(p.node,p.offset,h.focusNode,h.focusOffset))){var x=!1;if((h.extend||t==n)&&!d){h.collapse(f.node,f.offset);try{t!=n&&h.extend(p.node,p.offset),x=!0}catch(j){if(!(j instanceof DOMException))throw j}}if(!x){if(t>n){var E=f;f=p,p=E}var H=document.createRange();H.setEnd(p.node,p.offset),H.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(H)}}};Pt.prototype.ignoreMutation=function(t){return!this.contentDOM&&t.type!="selection"};Dn.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)};Pt.prototype.markDirty=function(t,n){for(var r=0,o=0;o<this.children.length;o++){var i=this.children[o],s=r+i.size;if(r==s?t<=s&&n>=r:t<s&&n>r){var a=r+i.border,l=s-i.border;if(t>=a&&n<=l){this.dirty=t==r||n==s?$i:bv,t==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=mr:i.markDirty(t-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM?$i:mr}r=s}this.dirty=$i};Pt.prototype.markParentsDirty=function(){for(var t=1,n=this.parent;n;n=n.parent,t++){var r=t==1?$i:bv;n.dirty<r&&(n.dirty=r)}};Dn.domAtom.get=function(){return!1};Dn.ignoreForCoords.get=function(){return!1};Object.defineProperties(Pt.prototype,Dn);var gr=[],Sv=function(e){function t(r,o,i,s){var a,l=o.type.toDOM;if(typeof l=="function"&&(l=l(i,function(){if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!o.type.spec.raw){if(l.nodeType!=1){var u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable=!1,l.classList.add("ProseMirror-widget")}e.call(this,r,gr,l,null),this.widget=o,a=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(o){return this.dirty==Sn&&o.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(o){var i=this.widget.spec.stopEvent;return i?i(o):!1},t.prototype.ignoreMutation=function(o){return o.type!="selection"||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,n),t}(Pt),tC=function(e){function t(r,o,i,s){e.call(this,r,gr,o,null),this.textDOM=i,this.text=s}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(o,i){return o!=this.textDOM?this.posAtStart+(i?this.size:0):this.posAtStart+i},t.prototype.domFromPos=function(o){return{node:this.textDOM,offset:o}},t.prototype.ignoreMutation=function(o){return o.type==="characterData"&&o.target.nodeValue==o.oldValue},Object.defineProperties(t.prototype,n),t}(Pt),ha=function(e){function t(n,r,o,i){e.call(this,n,[],o,i),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(r,o,i,s){var a=s.nodeViews[o.type.name],l=a&&a(o,s,i);return(!l||!l.dom)&&(l=ce.renderSpec(document,o.type.spec.toDOM(o,i))),new t(r,o,l.dom,l.contentDOM||l.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(r){return this.dirty!=mr&&this.mark.eq(r)},t.prototype.markDirty=function(r,o){if(e.prototype.markDirty.call(this,r,o),this.dirty!=Sn){for(var i=this.parent;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=Sn}},t.prototype.slice=function(r,o,i){var s=t.create(this.parent,this.mark,!0,i),a=this.children,l=this.size;o<l&&(a=ec(a,o,l,i)),r>0&&(a=ec(a,0,r,i));for(var u=0;u<a.length;u++)a[u].parent=s;return s.children=a,s},t}(Pt),Wi=function(e){function t(r,o,i,s,a,l,u,c,f){e.call(this,r,o.isLeaf?gr:[],a,l),this.nodeDOM=u,this.node=o,this.outerDeco=i,this.innerDeco=s,l&&this.updateChildren(c,f)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(o,i,s,a,l,u){var c,f=l.nodeViews[i.type.name],p,h=f&&f(i,l,function(){if(!p)return u;if(p.parent)return p.parent.posBeforeChild(p)},s,a),d=h&&h.dom,v=h&&h.contentDOM;if(i.isText){if(!d)d=document.createTextNode(i.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||(c=ce.renderSpec(document,i.type.spec.toDOM(i)),d=c.dom,v=c.contentDOM);!v&&!i.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable=!1),i.type.spec.draggable&&(d.draggable=!0));var m=d;return d=Mv(d,s,i),h?p=new eC(o,i,s,a,d,v,m,h,l,u+1):i.isText?new Cv(o,i,s,a,d,m,l):new t(o,i,s,a,d,v,m,l,u+1)},t.prototype.parseRule=function(){var o=this;if(this.node.type.spec.reparseInView)return null;var i={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(i.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?i.contentElement=this.contentDOM:i.getContent=function(){return o.contentDOM?T.empty:o.node.content},i},t.prototype.matchesNode=function(o,i,s){return this.dirty==Sn&&o.eq(this.node)&&tc(i,this.outerDeco)&&s.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(o,i){var s=this,a=this.node.inlineContent,l=i,u=o.composing&&this.localCompositionInfo(o,i),c=u&&u.pos>-1?u:null,f=u&&u.pos<0,p=new ln(this,c&&c.node);iC(this.node,this.innerDeco,function(h,d,v){h.spec.marks?p.syncToMarks(h.spec.marks,a,o):h.type.side>=0&&!v&&p.syncToMarks(d==s.node.childCount?bt.none:s.node.child(d).marks,a,o),p.placeWidget(h,o,l)},function(h,d,v,m){p.syncToMarks(h.marks,a,o);var b;p.findNodeMatch(h,d,v,m)||f&&o.state.selection.from>l&&o.state.selection.to<l+h.nodeSize&&(b=p.findIndexWithChild(u.node))>-1&&p.updateNodeAt(h,d,v,b,o)||p.updateNextNode(h,d,v,o,m)||p.addNode(h,d,v,o,l),l+=h.nodeSize}),p.syncToMarks(gr,a,o),this.node.isTextblock&&p.addTextblockHacks(),p.destroyRest(),(p.changed||this.dirty==$i)&&(c&&this.protectLocalComposition(o,c),kv(this.contentDOM,this.children,o),L.ios&&sC(this.dom))},t.prototype.localCompositionInfo=function(o,i){var s=o.state.selection,a=s.from,l=s.to;if(!(!(o.state.selection instanceof vt)||a<i||l>i+this.node.content.size)){var u=o.root.getSelection(),c=aC(u.focusNode,u.focusOffset);if(!(!c||!this.dom.contains(c.parentNode)))if(this.node.inlineContent){var f=c.nodeValue,p=lC(this.node.content,f,a-i,l-i);return p<0?null:{node:c,pos:p,text:f}}else return{node:c,pos:-1}}},t.prototype.protectLocalComposition=function(o,i){var s=i.node,a=i.pos,l=i.text;if(!this.getDesc(s)){for(var u=s;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=null)}var c=new tC(this,u,s,l);o.compositionNodes.push(c),this.children=ec(this.children,a,a+l.length,o,c)}},t.prototype.update=function(o,i,s,a){return this.dirty==mr||!o.sameMarkup(this.node)?!1:(this.updateInner(o,i,s,a),!0)},t.prototype.updateInner=function(o,i,s,a){this.updateOuterDeco(i),this.node=o,this.innerDeco=s,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=Sn},t.prototype.updateOuterDeco=function(o){if(!tc(o,this.outerDeco)){var i=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Ov(this.dom,this.nodeDOM,Zu(this.outerDeco,this.node,i),Zu(o,this.node,i)),this.dom!=s&&(s.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=o}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(Pt);function wv(e,t,n,r,o){return Mv(r,t,e),new Wi(null,e,t,n,r,r,r,o,0)}var Cv=function(e){function t(r,o,i,s,a,l,u){e.call(this,r,o,i,s,a,null,l,u)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var o=this.nodeDOM.parentNode;o&&o!=this.dom&&!o.pmIsDeco;)o=o.parentNode;return{skip:o||!0}},t.prototype.update=function(o,i,s,a){return this.dirty==mr||this.dirty!=Sn&&!this.inParent()||!o.sameMarkup(this.node)?!1:(this.updateOuterDeco(i),(this.dirty!=Sn||o.text!=this.node.text)&&o.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=o.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=o,this.dirty=Sn,!0)},t.prototype.inParent=function(){for(var o=this.parent.contentDOM,i=this.nodeDOM;i;i=i.parentNode)if(i==o)return!0;return!1},t.prototype.domFromPos=function(o){return{node:this.nodeDOM,offset:o}},t.prototype.localPosFromDOM=function(o,i,s){return o==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):e.prototype.localPosFromDOM.call(this,o,i,s)},t.prototype.ignoreMutation=function(o){return o.type!="characterData"&&o.type!="selection"},t.prototype.slice=function(o,i,s){var a=this.node.cut(o,i),l=document.createTextNode(a.text);return new t(this.parent,a,this.outerDeco,this.innerDeco,l,l,s)},t.prototype.markDirty=function(o,i){e.prototype.markDirty.call(this,o,i),this.dom!=this.nodeDOM&&(o==0||i==this.nodeDOM.nodeValue.length)&&(this.dirty=mr)},n.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,n),t}(Wi),xv=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(o){return this.dirty==Sn&&this.dom.nodeName==o},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return this.dom.nodeName=="IMG"},Object.defineProperties(t.prototype,n),t}(Pt),eC=function(e){function t(n,r,o,i,s,a,l,u,c,f){e.call(this,n,r,o,i,s,a,l,c,f),this.spec=u}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(r,o,i,s){if(this.dirty==mr)return!1;if(this.spec.update){var a=this.spec.update(r,o,i);return a&&this.updateInner(r,o,i,s),a}else return!this.contentDOM&&!r.isLeaf?!1:e.prototype.update.call(this,r,o,i,s)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(r,o,i,s){this.spec.setSelection?this.spec.setSelection(r,o,i):e.prototype.setSelection.call(this,r,o,i,s)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(r){return this.spec.stopEvent?this.spec.stopEvent(r):!1},t.prototype.ignoreMutation=function(r){return this.spec.ignoreMutation?this.spec.ignoreMutation(r):e.prototype.ignoreMutation.call(this,r)},t}(Wi);function kv(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var s=t[i],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=Tv(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof ha){var l=r?r.previousSibling:e.lastChild;kv(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=Tv(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}function Ji(e){e&&(this.nodeName=e)}Ji.prototype=Object.create(null);var Yr=[new Ji];function Zu(e,t,n){if(e.length==0)return Yr;for(var r=n?Yr[0]:new Ji,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(!!s){s.nodeName&&o.push(r=new Ji(s.nodeName));for(var a in s){var l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new Ji(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function Ov(e,t,n,r){if(n==Yr&&r==Yr)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.tagName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Yr[0]),o=l}nC(o,a||Yr[0],s)}return o}function nC(e,t,n){for(var r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(var o in n)o!="class"&&o!="style"&&o!="nodeName"&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" ").filter(Boolean):gr,s=n.class?n.class.split(" ").filter(Boolean):gr,a=0;a<i.length;a++)s.indexOf(i[a])==-1&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)i.indexOf(s[l])==-1&&e.classList.add(s[l]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style)for(var u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,c;c=u.exec(t.style);)e.style.removeProperty(c[1]);n.style&&(e.style.cssText+=n.style)}}function Mv(e,t,n){return Ov(e,e,Yr,Zu(t,n,e.nodeType!=1))}function tc(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Tv(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ln=function(t,n){this.top=t,this.lock=n,this.index=0,this.stack=[],this.changed=!1,this.preMatch=rC(t.node.content,t)};ln.prototype.destroyBetween=function(t,n){if(t!=n){for(var r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}};ln.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)};ln.prototype.syncToMarks=function(t,n,r){for(var o=0,i=this.stack.length>>1,s=Math.min(i,t.length);o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=Sn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);for(var a=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(this.top.children[l].matchesMark(t[i])){a=l;break}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{var u=ha.create(this.top,t[i],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,i++}};ln.prototype.findNodeMatch=function(t,n,r,o){var i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))i=this.top.children.indexOf(s,this.index);else for(var a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){var u=this.top.children[a];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)};ln.prototype.updateNodeAt=function(t,n,r,o,i){var s=this.top.children[o];return s.update(t,n,r,i)?(this.destroyBetween(this.index,o),this.index=o+1,!0):!1};ln.prototype.findIndexWithChild=function(t){for(;;){var n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){var r=t.pmViewDesc;if(r){for(var o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}t=n}};ln.prototype.updateNextNode=function(t,n,r,o,i){for(var s=this.index;s<this.top.children.length;s++){var a=this.top.children[s];if(a instanceof Wi){var l=this.preMatch.matched.get(a);if(l!=null&&l!=i)return!1;var u=a.dom,c=this.lock&&(u==this.lock||u.nodeType==1&&u.contains(this.lock.parentNode))&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&a.dirty!=mr&&tc(n,a.outerDeco));if(!c&&a.update(t,n,r,o))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;break}}return!1};ln.prototype.addNode=function(t,n,r,o,i){this.top.children.splice(this.index++,0,Wi.create(this.top,t,n,r,o,i)),this.changed=!0};ln.prototype.placeWidget=function(t,n,r){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{var i=new Sv(this.top,t,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}};ln.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof ha;)t=t.children[t.children.length-1];(!t||!(t instanceof Cv)||/\n$/.test(t.node.text))&&((L.safari||L.chrome)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG"),this.addHackNode("BR"))};ln.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var n=document.createElement(t);t=="IMG"&&(n.className="ProseMirror-separator"),t=="BR"&&(n.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new xv(this.top,gr,n,null)),this.changed=!0}};function rC(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];t:for(;o>0;){for(var a=void 0;;)if(r){var l=n.children[r-1];if(l instanceof ha)n=l,r=l.children.length;else{a=l,r--;break}}else{if(n==t)break t;r=n.parent.children.indexOf(n),n=n.parent}var u=a.node;if(!!u){if(u!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function oC(e,t){return e.type.side-t.type.side}function iC(e,t,n,r){var o=t.locals(e),i=0;if(o.length==0){for(var s=0;s<e.childCount;s++){var a=e.child(s);r(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,u=[],c=null,f=0;;){if(l<o.length&&o[l].to==i){for(var p=o[l++],h=void 0;l<o.length&&o[l].to==i;)(h||(h=[p])).push(o[l++]);if(h){h.sort(oC);for(var d=0;d<h.length;d++)n(h[d],f,!!c)}else n(p,f,!!c)}var v=void 0,m=void 0;if(c)m=-1,v=c,c=null;else if(f<e.childCount)m=f,v=e.child(f++);else break;for(var b=0;b<u.length;b++)u[b].to<=i&&u.splice(b--,1);for(;l<o.length&&o[l].from<=i&&o[l].to>i;)u.push(o[l++]);var y=i+v.nodeSize;if(v.isText){var C=y;l<o.length&&o[l].from<C&&(C=o[l].from);for(var g=0;g<u.length;g++)u[g].to<C&&(C=u[g].to);C<y&&(c=v.cut(C-i),v=v.cut(0,C-i),y=C,m=-1)}var O=u.length?v.isInline&&!v.isLeaf?u.filter(function(x){return!x.inline}):u.slice():gr;r(v,O,t.forChild(i,v),m),i=y}}function sC(e){if(e.nodeName=="UL"||e.nodeName=="OL"){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function aC(e,t){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0){if(e.childNodes.length>t&&e.childNodes[t].nodeType==3)return e.childNodes[t];e=e.childNodes[t-1],t=In(e)}else if(e.nodeType==1&&t<e.childNodes.length)e=e.childNodes[t],t=0;else return null}}function lC(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,!!s.isText){for(var l=s.text;o<e.childCount;){var u=e.child(o++);if(i+=u.nodeSize,!u.isText)break;l+=u.text}if(i>=n){var c=l.lastIndexOf(t,r-a);if(c>=0&&c+t.length+a>=n)return a+c}}}return-1}function ec(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var l=e[s],u=a,c=a+=l.size;u>=n||c<=t?i.push(l):(u<t&&i.push(l.slice(0,t-u,r)),o&&(i.push(o),o=null),c>n&&i.push(l.slice(n-u,l.size,r)))}return i}function Ev(e,t){var n=e.root.getSelection(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var a=r.resolve(s),l,u;if(Yu(n)){for(l=a;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&ft.isSelectable(o.node)&&o.parent&&!(o.node.isInline&&B1(n.focusNode,n.focusOffset,o.dom))){var c=o.posBefore;u=new ft(s==c?a:r.resolve(c))}}else{var f=e.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;l=r.resolve(f)}if(!u){var p=t=="pointer"||e.state.selection.head<a.pos&&!i?1:-1;u=rc(e,l,a,p)}return u}function Av(e){return e.editable?e.hasFocus():oc(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function yr(e,t){var n=e.state.selection;if(Iv(e,n),!!Av(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault){e.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}if(e.domObserver.disconnectSelection(),e.cursorWrapper)cC(e);else{var r=n.anchor,o=n.head,i,s;_v&&!(n instanceof vt)&&(n.$from.parent.inlineContent||(i=Nv(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Nv(e,n.to))),e.docView.setSelection(r,o,e.root,t),_v&&(i&&Rv(i),s&&Rv(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&uC(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var _v=L.safari||L.chrome&&L.chrome_version<63;function Nv(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(L.safari&&i&&i.contentEditable=="false")return nc(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return nc(i);if(s)return nc(s)}}function nc(e){return e.contentEditable="true",L.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Rv(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function uC(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){(n.anchorNode!=r||n.anchorOffset!=o)&&(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout(function(){(!Av(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function cC(e){var t=e.root.getSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setEnd(r.parentNode,Qe(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&L.ie&&L.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Iv(e,t){if(t instanceof ft){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Dv(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Dv(e)}function Dv(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function rc(e,t,n,r){return e.someProp("createSelectionBetween",function(o){return o(e,t,n)})||vt.between(t,n,r)}function fC(e){return e.editable&&e.root.activeElement!=e.dom?!1:oc(e)}function oc(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function pC(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.root.getSelection();return pa(t.node,t.offset,n.anchorNode,n.anchorOffset)}function ic(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&rt.findFrom(s,t)}function Xr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Pv(e,t,n){var r=e.state.selection;if(r instanceof vt){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=ic(e.state,t);return o&&o instanceof ft?Xr(e,o):!1}else if(!(L.mac&&n.indexOf("m")>-1)){var i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;var l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=e.docView.descAt(l))&&!a.contentDOM?ft.isSelectable(s)?Xr(e,new ft(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):L.webkit?Xr(e,new vt(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else{if(r instanceof ft&&r.node.isInline)return Xr(e,new vt(t>0?r.$to:r.$from));var u=ic(e.state,t);return u?Xr(e,u):!1}}function da(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function qi(e){var t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function sc(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(!!n){var o,i,s=!1;for(L.gecko&&n.nodeType==1&&r<da(n)&&qi(n.childNodes[r])&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;var a=n.childNodes[r-1];if(qi(a))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}else{if(Lv(n))break;for(var l=n.previousSibling;l&&qi(l);)o=n.parentNode,i=Qe(l),l=l.previousSibling;if(l)n=l,r=da(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}s?lc(e,t,n,r):o&&lc(e,t,o,i)}}function ac(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(!!n){for(var o=da(n),i,s;;)if(r<o){if(n.nodeType!=1)break;var a=n.childNodes[r];if(qi(a))i=n,s=++r;else break}else{if(Lv(n))break;for(var l=n.nextSibling;l&&qi(l);)i=l.parentNode,s=Qe(l)+1,l=l.nextSibling;if(l)n=l,r=0,o=da(n);else{if(n=n.parentNode,n==e.dom)break;r=o=0}}i&&lc(e,t,i,s)}}function Lv(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function lc(e,t,n,r){if(Yu(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.domObserver.setCurSelection();var i=e.state;setTimeout(function(){e.state==i&&yr(e)},50)}function Bv(e,t,n){var r=e.state.selection;if(r instanceof vt&&!r.empty||n.indexOf("s")>-1||L.mac&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=ic(e.state,t);if(s&&s instanceof ft)return Xr(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,l=r instanceof Xn?rt.near(a,t):rt.findFrom(a,t);return l?Xr(e,l):!1}return!1}function Fv(e,t){if(!(e.state.selection instanceof vt))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),e.dispatch(a),!0}return!1}function zv(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function hC(e){if(!(!L.safari||e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n&&n.nodeType==1&&r==0&&n.firstChild&&n.firstChild.contentEditable=="false"){var o=n.firstChild;zv(e,o,!0),setTimeout(function(){return zv(e,o,!1)},20)}}}function dC(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function vC(e,t){var n=t.keyCode,r=dC(t);return n==8||L.mac&&n==72&&r=="c"?Fv(e,-1)||sc(e):n==46||L.mac&&n==68&&r=="c"?Fv(e,1)||ac(e):n==13||n==27?!0:n==37?Pv(e,-1,r)||sc(e):n==39?Pv(e,1,r)||ac(e):n==38?Bv(e,-1,r)||sc(e):n==40?hC(e)||Bv(e,1,r)||ac(e):r==(L.mac?"m":"c")&&(n==66||n==73||n==89||n==90)}function mC(e,t,n){var r=e.docView.parseRange(t,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,l=r.to,u=e.root.getSelection(),c=null,f=u.anchorNode;if(f&&e.dom.contains(f.nodeType==1?f:f.parentNode)&&(c=[{node:f,offset:u.anchorOffset}],Yu(u)||c.push({node:u.focusNode,offset:u.focusOffset})),L.chrome&&e.lastKeyCode===8)for(var p=s;p>i;p--){var h=o.childNodes[p-1],d=h.pmViewDesc;if(h.nodeName=="BR"&&!d){s=p;break}if(!d||d.size)break}var v=e.state.doc,m=e.someProp("domParser")||bn.fromSchema(e.state.schema),b=v.resolve(a),y=null,C=m.parse(o,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.spec.code?"full":!0,editableContent:!0,findPositions:c,ruleFromNode:gC,context:b});if(c&&c[0].pos!=null){var g=c[0].pos,O=c[1]&&c[1].pos;O==null&&(O=g),y={anchor:g+a,head:O+a}}return{doc:C,sel:y,from:a,to:l}}function gC(e){var t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(L.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||L.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function yC(e,t,n,r,o){if(t<0){var i=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=Ev(e,i);if(s&&!e.state.selection.eq(s)){var a=e.state.tr.setSelection(s);i=="pointer"?a.setMeta("pointer",!0):i=="key"&&a.scrollIntoView(),e.dispatch(a)}return}var l=e.state.doc.resolve(t),u=l.sharedDepth(n);t=l.before(u+1),n=e.state.doc.resolve(n).after(u+1);var c=e.state.selection,f=mC(e,t,n);if(L.chrome&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from){var p=e.cursorWrapper.deco.type.toDOM.nextSibling,h=p&&p.nodeValue?p.nodeValue.length:1;f.sel={anchor:f.sel.anchor+h,head:f.sel.anchor+h}}var d=e.state.doc,v=d.slice(f.from,f.to),m,b;e.lastKeyCode===8&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,b="end"):(m=e.state.selection.from,b="start"),e.lastKeyCode=null;var y=wC(v.content,f.doc.content,f.from,m,b);if(!y)if(r&&c instanceof vt&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))y={start:c.from,endA:c.to,endB:c.to};else if((L.ios&&e.lastIOSEnter>Date.now()-225||L.android)&&o.some(function(Z){return Z.nodeName=="DIV"||Z.nodeName=="P"})&&e.someProp("handleKeyDown",function(Z){return Z(e,Wo(13,"Enter"))})){e.lastIOSEnter=0;return}else{if(f.sel){var C=Hv(e,e.state.doc,f.sel);C&&!C.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(C))}return}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof vt&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),L.ie&&L.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>f.from&&f.doc.textBetween(y.start-f.from-1,y.start-f.from+1)==" \xA0"&&(y.start--,y.endA--,y.endB--);var g=f.doc.resolveNoCache(y.start-f.from),O=f.doc.resolveNoCache(y.endB-f.from),x=g.sameParent(O)&&g.parent.inlineContent,E;if((L.ios&&e.lastIOSEnter>Date.now()-225&&(!x||o.some(function(Z){return Z.nodeName=="DIV"||Z.nodeName=="P"}))||!x&&g.pos<f.doc.content.size&&(E=rt.findFrom(f.doc.resolve(g.pos+1),1,!0))&&E.head==O.pos)&&e.someProp("handleKeyDown",function(Z){return Z(e,Wo(13,"Enter"))})){e.lastIOSEnter=0;return}if(e.state.selection.anchor>y.start&&SC(d,y.start,y.endA,g,O)&&e.someProp("handleKeyDown",function(Z){return Z(e,Wo(8,"Backspace"))})){L.android&&L.chrome&&e.domObserver.suppressSelectionUpdates();return}L.chrome&&L.android&&y.toB==y.from&&(e.lastAndroidDelete=Date.now()),L.android&&!x&&g.start()!=O.start()&&O.parentOffset==0&&g.depth==O.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==y.endA&&(y.endB-=2,O=f.doc.resolveNoCache(y.endB-f.from),setTimeout(function(){e.someProp("handleKeyDown",function(Z){return Z(e,Wo(13,"Enter"))})},20));var H=y.start,j=y.endA,q,et,D,at;if(x){if(g.pos==O.pos)L.ie&&L.ie_version<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return yr(e)},20)),q=e.state.tr.delete(H,j),et=d.resolve(y.start).marksAcross(d.resolve(y.endA));else if(y.endA==y.endB&&(at=d.resolve(y.start))&&(D=bC(g.parent.content.cut(g.parentOffset,O.parentOffset),at.parent.content.cut(at.parentOffset,y.endA-at.start()))))q=e.state.tr,D.type=="add"?q.addMark(H,j,D.mark):q.removeMark(H,j,D.mark);else if(g.parent.child(g.index()).isText&&g.index()==O.index()-(O.textOffset?0:1)){var Tt=g.parent.textBetween(g.parentOffset,O.parentOffset);if(e.someProp("handleTextInput",function(Z){return Z(e,H,j,Tt)}))return;q=e.state.tr.insertText(Tt,H,j)}}if(q||(q=e.state.tr.replace(H,j,f.doc.slice(y.start-f.from,y.endB-f.from))),f.sel){var gt=Hv(e,q.doc,f.sel);gt&&!(L.chrome&&L.android&&e.composing&&gt.empty&&(y.start!=y.endB||e.lastAndroidDelete<Date.now()-100)&&(gt.head==H||gt.head==q.mapping.map(j)-1)||L.ie&&gt.empty&&gt.head==H)&&q.setSelection(gt)}et&&q.ensureMarks(et),e.dispatch(q.scrollIntoView())}function Hv(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:rc(e,t.resolve(n.anchor),t.resolve(n.head))}function bC(e,t){for(var n=e.firstChild.marks,r=t.firstChild.marks,o=n,i=r,s,a,l,u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(var c=0;c<n.length;c++)i=n[c].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=function(h){return h.mark(a.addToSet(h.marks))};else if(o.length==0&&i.length==1)a=i[0],s="remove",l=function(h){return h.mark(a.removeFromSet(h.marks))};else return null;for(var f=[],p=0;p<t.childCount;p++)f.push(l(t.child(p)));if(T.from(f).eq(e))return{mark:a,type:s}}function SC(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||uc(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(uc(i,!0,!0));return!s.parent.isTextblock||s.pos>n||uc(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function uc(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function wC(e,t,n,r,o){var i=e.findDiffStart(t,n);if(i==null)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if(o=="end"){var u=Math.max(0,i-Math.min(a,l));r-=a+u-i}if(a<i&&e.size<t.size){var c=r<=i&&r>=a?i-r:0;i-=c,l=i+(l-a),a=i}else if(l<i){var f=r<=i&&r>=l?i-r:0;i-=f,a=i+(a-l),l=i}return{start:i,endA:a,endB:l}}function Vv(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;var s=r.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),r=s.content}var a=e.someProp("clipboardSerializer")||ce.fromSchema(e.state.schema),l=Gv(),u=l.createElement("div");u.appendChild(a.serializeFragment(r,{document:l}));for(var c=u.firstChild,f;c&&c.nodeType==1&&(f=Kv[c.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var h=l.createElement(f[p]);u.firstChild;)h.appendChild(u.firstChild);u.appendChild(h),f[p]!="tbody"&&(o++,i++)}c=u.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n));var d=e.someProp("clipboardTextSerializer",function(v){return v(t)})||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:d}}function jv(e,t,n,r,o){var i,s=o.parent.type.spec.code,a;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",function(O){t=O(t,s||r)}),s)return t?new $(T.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):$.empty;var u=e.someProp("clipboardTextParser",function(O){return O(t,o,r)});if(u)a=u;else{var c=o.marks(),f=e.state,p=f.schema,h=ce.fromSchema(p);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(O){var x=i.appendChild(document.createElement("p"));O&&x.appendChild(h.serializeNode(p.text(O,c)))})}}else e.someProp("transformPastedHTML",function(O){n=O(n)}),i=kC(n),L.webkit&&OC(i);var d=i&&i.querySelector("[data-pm-slice]"),v=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var m=e.someProp("clipboardParser")||e.someProp("domParser")||bn.fromSchema(e.state.schema);a=m.parseSlice(i,{preserveWhitespace:!!(l||v),context:o,ruleFromNode:function(x){if(x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!CC.test(x.parentNode.nodeName))return{ignore:!0}}})}if(v)a=MC(qv(a,+v[1],+v[2]),v[3]);else if(a=$.maxOpen(xC(a.content,o),!0),a.openStart||a.openEnd){for(var b=0,y=0,C=a.content.firstChild;b<a.openStart&&!C.type.spec.isolating;b++,C=C.firstChild);for(var g=a.content.lastChild;y<a.openEnd&&!g.type.spec.isolating;y++,g=g.lastChild);a=qv(a,b,y)}return e.someProp("transformPasted",function(O){a=O(a)}),a}var CC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xC(e,t){if(e.childCount<2)return e;for(var n=function(i){var s=t.node(i),a=s.contentMatchAt(t.index(i)),l=void 0,u=[];if(e.forEach(function(c){if(!!u){var f=a.findWrapping(c.type),p;if(!f)return u=null;if(p=u.length&&l.length&&Wv(f,l,c,u[u.length-1],0))u[u.length-1]=p;else{u.length&&(u[u.length-1]=Jv(u[u.length-1],l.length));var h=$v(c,f);u.push(h),a=a.matchType(h.type,h.attrs),l=f}}}),u)return{v:T.from(u)}},r=t.depth;r>=0;r--){var o=n(r);if(o)return o.v}return e}function $v(e,t,n){n===void 0&&(n=0);for(var r=t.length-1;r>=n;r--)e=t[r].create(null,T.from(e));return e}function Wv(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=Wv(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var s=r.contentMatchAt(r.childCount);if(s.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(T.from($v(n,e,o+1))))}}function Jv(e,t){if(t==0)return e;var n=e.content.replaceChild(e.childCount-1,Jv(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(T.empty,!0);return e.copy(n.append(r))}function cc(e,t,n,r,o,i){var s=t<0?e.firstChild:e.lastChild,a=s.content;return o<r-1&&(a=cc(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,e.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(T.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function qv(e,t,n){return t<e.openStart&&(e=new $(cc(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new $(cc(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Kv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Uv=null;function Gv(){return Uv||(Uv=document.implementation.createHTMLDocument("title"))}function kC(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n=Gv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),o;if((o=r&&Kv[r[1].toLowerCase()])&&(e=o.map(function(s){return"<"+s+">"}).join("")+e+o.map(function(s){return"</"+s+">"}).reverse().join("")),n.innerHTML=e,o)for(var i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function OC(e){for(var t=e.querySelectorAll(L.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function MC(e,t){if(!e.size)return e;var n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}for(var o=e.content,i=e.openStart,s=e.openEnd,a=r.length-2;a>=0;a-=2){var l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=T.from(l.create(r[a+1],o)),i++,s++}return new $(o,i,s)}var TC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fc=L.ie&&L.ie_version<=11,pc=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};pc.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset};pc.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Ze=function(t,n){var r=this;this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(o){for(var i=0;i<o.length;i++)r.queue.push(o[i]);L.ie&&L.ie_version<=11&&o.some(function(s){return s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length})?r.flushSoon():r.flush()}),this.currentSelection=new pc,fc&&(this.onCharData=function(o){r.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ze.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))};Ze.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())};Ze.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,TC),fc&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()};Ze.prototype.stop=function(){var t=this;if(this.observer){var n=this.observer.takeRecords();if(n.length){for(var r=0;r<n.length;r++)this.queue.push(n[r]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}fc&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()};Ze.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)};Ze.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)};Ze.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)};Ze.prototype.onSelectionChange=function(){if(!!fC(this.view)){if(this.suppressingSelectionUpdates)return yr(this.view);if(L.ie&&L.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&pa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}};Ze.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())};Ze.prototype.ignoreSelectionChange=function(t){if(t.rangeCount==0)return!0;var n=t.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0};Ze.prototype.flush=function(){if(!(!this.view.docView||this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var n=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&oc(this.view)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,a=[];if(this.view.editable)for(var l=0;l<t.length;l++){var u=this.registerMutation(t[l],a);u&&(o=o<0?u.from:Math.min(u.from,o),i=i<0?u.to:Math.max(u.to,i),u.typeOver&&(s=!0))}if(L.gecko&&a.length>1){var c=a.filter(function(h){return h.nodeName=="BR"});if(c.length==2){var f=c[0],p=c[1];f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}}(o>-1||r)&&(o>-1&&(this.view.docView.markDirty(o,i),EC(this.view)),this.handleDOMChange(o,i,s,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(n)||yr(this.view),this.currentSelection.set(n))}};Ze.prototype.registerMutation=function(t,n){if(n.indexOf(t.target)>-1)return null;var r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(var o=0;o<t.addedNodes.length;o++)n.push(t.addedNodes[o]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};var i=t.previousSibling,s=t.nextSibling;if(L.ie&&L.ie_version<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var l=t.addedNodes[a],u=l.previousSibling,c=l.nextSibling;(!u||Array.prototype.indexOf.call(t.addedNodes,u)<0)&&(i=u),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(s=c)}var f=i&&i.parentNode==t.target?Qe(i)+1:0,p=r.localPosFromDOM(t.target,f,-1),h=s&&s.parentNode==t.target?Qe(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,h,1);return{from:p,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Yv=!1;function EC(e){Yv||(Yv=!0,getComputedStyle(e.dom).whiteSpace=="normal"&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var je={},_e={};function AC(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ze(e,function(r,o,i,s){return yC(e,r,o,i,s)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(r){var o=je[r];e.dom.addEventListener(r,e.eventHandlers[r]=function(i){NC(e,i)&&!dc(e,i)&&(e.editable||!(i.type in _e))&&o(e,i)})};for(var n in je)t(n);L.safari&&e.dom.addEventListener("input",function(){return null}),hc(e)}function Qr(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function _C(e){e.domObserver.stop();for(var t in e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}function hc(e){e.someProp("handleDOMEvents",function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(r){return dc(e,r)})})}function dc(e,t){return e.someProp("handleDOMEvents",function(n){var r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function NC(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function RC(e,t){!dc(e,t)&&je[t.type]&&(e.editable||!(t.type in _e))&&je[t.type](e,t)}_e.keydown=function(e,t){if(e.shiftKey=t.keyCode==16||t.shiftKey,!Qv(e,t))if(t.keyCode!=229&&e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),L.ios&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n=Date.now();e.lastIOSEnter=n,e.lastIOSEnterFallbackTimeout=setTimeout(function(){e.lastIOSEnter==n&&(e.someProp("handleKeyDown",function(r){return r(e,Wo(13,"Enter"))}),e.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",function(r){return r(e,t)})||vC(e,t)?t.preventDefault():Qr(e,"key")};_e.keyup=function(e,t){t.keyCode==16&&(e.shiftKey=!1)};_e.keypress=function(e,t){if(!(Qv(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||L.mac&&t.metaKey)){if(e.someProp("handleKeyPress",function(o){return o(e,t)})){t.preventDefault();return}var n=e.state.selection;if(!(n instanceof vt)||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(o){return o(e,n.$from.pos,n.$to.pos,r)})||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};function va(e){return{left:e.clientX,top:e.clientY}}function IC(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function vc(e,t,n,r,o){if(r==-1)return!1;for(var i=e.state.doc.resolve(r),s=function(u){if(e.someProp(t,function(c){return u>i.depth?c(e,n,i.nodeAfter,i.before(u),o,!0):c(e,n,i.node(u),i.before(u),o,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function qo(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function DC(e,t){if(t==-1)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&ft.isSelectable(r)?(qo(e,new ft(n),"pointer"),!0):!1}function PC(e,t){if(t==-1)return!1;var n=e.state.selection,r,o;n instanceof ft&&(r=n.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(ft.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(qo(e,ft.create(e.state.doc,o),"pointer"),!0):!1}function LC(e,t,n,r,o){return vc(e,"handleClickOn",t,n,r)||e.someProp("handleClick",function(i){return i(e,t,r)})||(o?PC(e,n):DC(e,n))}function BC(e,t,n,r){return vc(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",function(o){return o(e,t,r)})}function FC(e,t,n,r){return vc(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",function(o){return o(e,t,r)})||zC(e,n,r)}function zC(e,t,n){if(n.button!=0)return!1;var r=e.state.doc;if(t==-1)return r.inlineContent?(qo(e,vt.create(r,0,r.content.size),"pointer"),!0):!1;for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)qo(e,vt.create(r,a+1,a+1+s.content.size),"pointer");else if(ft.isSelectable(s))qo(e,ft.create(r,a),"pointer");else continue;return!0}}function mc(e){return ga(e)}var Xv=L.mac?"metaKey":"ctrlKey";je.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=mc(e),r=Date.now(),o="singleClick";r-e.lastClick.time<500&&IC(t,e.lastClick)&&!t[Xv]&&(e.lastClick.type=="singleClick"?o="doubleClick":e.lastClick.type=="doubleClick"&&(o="tripleClick")),e.lastClick={time:r,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(va(t));!i||(o=="singleClick"?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new ma(e,i,t,n)):(o=="doubleClick"?BC:FC)(e,i.pos,i.inside,t)?t.preventDefault():Qr(e,"pointer"))};var ma=function(t,n,r,o){var i=this;this.view=t,this.startDoc=t.state.doc,this.pos=n,this.event=r,this.flushed=o,this.selectNode=r[Xv],this.allowDefault=r.shiftKey,this.delayedSelectionSync=!1;var s,a;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{var l=t.state.doc.resolve(n.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:r.target,c=u?t.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;var f=t.state,p=f.selection;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||p instanceof ft&&p.from<=a&&p.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&L.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){i.view.mouseDown==i&&i.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qr(t,"pointer")};ma.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return yr(t.view)}),this.view.mouseDown=null};ma.prototype.up=function(t){if(this.done(),!!this.view.dom.contains(t.target.nodeType==3?t.target.parentNode:t.target)){var n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(va(t))),this.allowDefault||!n?Qr(this.view,"pointer"):LC(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||L.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||L.chrome&&!(this.view.state.selection instanceof vt)&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(qo(this.view,rt.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):Qr(this.view,"pointer")}};ma.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Qr(this.view,"pointer"),t.buttons==0&&this.done()};je.touchdown=function(e){mc(e),Qr(e,"pointer")};je.contextmenu=function(e){return mc(e)};function Qv(e,t){return e.composing?!0:L.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500?(e.compositionEndedAt=-2e8,!0):!1}var HC=L.android?5e3:-1;_e.compositionstart=_e.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(function(a){return a.type.spec.inclusive===!1})))e.markCursor=e.state.storedMarks||n.marks(),ga(e,!0),e.markCursor=null;else if(ga(e),L.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){r.collapse(s,s.nodeValue.length);break}else o=s,i=-1}e.composing=!0}Zv(e,HC)};_e.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Zv(e,20))};function Zv(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return ga(e)},t))}function tm(e){for(e.composing&&(e.composing=!1,e.compositionEndedAt=VC());e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function VC(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function ga(e,t){if(e.domObserver.forceFlush(),tm(e),t||e.docView.dirty){var n=Ev(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}function jC(e,t){if(!!e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}}var Ko=L.ie&&L.ie_version<15||L.ios&&L.webkit_version<604;je.copy=_e.cut=function(e,t){var n=e.state.selection,r=t.type=="cut";if(!n.empty){var o=Ko?null:t.clipboardData,i=n.content(),s=Vv(e,i),a=s.dom,l=s.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):jC(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function $C(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function WC(e,t){if(!!e.dom.parentNode){var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gc(e,r.value,null,t):gc(e,r.textContent,r.innerHTML,t)},50)}}function gc(e,t,n,r){var o=jv(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",function(a){return a(e,r,o||$.empty)}))return!0;if(!o)return!1;var i=$C(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}_e.paste=function(e,t){var n=Ko?null:t.clipboardData;n&&gc(e,n.getData("text/plain"),n.getData("text/html"),t)?t.preventDefault():WC(e,t)};var JC=function(t,n){this.slice=t,this.move=n},em=L.mac?"altKey":"ctrlKey";je.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),!!t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords(va(t));if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof ft?r.to-1:r.to))){if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(ft.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){var i=e.docView.nearestDesc(t.target,!0);i&&i.node.type.spec.draggable&&i!=e.docView&&e.dispatch(e.state.tr.setSelection(ft.create(e.state.doc,i.posBefore)))}}var s=e.state.selection.content(),a=Vv(e,s),l=a.dom,u=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Ko?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ko||t.dataTransfer.setData("text/plain",u),e.dragging=new JC(s,!t[em])}};je.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)};_e.dragover=_e.dragenter=function(e,t){return t.preventDefault()};_e.drop=function(e,t){var n=e.dragging;if(e.dragging=null,!!t.dataTransfer){var r=e.posAtCoords(va(t));if(!!r){var o=e.state.doc.resolve(r.pos);if(!!o){var i=n&&n.slice;i?e.someProp("transformPasted",function(d){i=d(i)}):i=jv(e,t.dataTransfer.getData(Ko?"Text":"text/plain"),Ko?null:t.dataTransfer.getData("text/html"),!1,o);var s=n&&!t[em];if(e.someProp("handleDrop",function(d){return d(e,t,i||$.empty,s)})){t.preventDefault();return}if(!!i){t.preventDefault();var a=i?Rd(e.state.doc,o.pos,i):o.pos;a==null&&(a=o.pos);var l=e.state.tr;s&&l.deleteSelection();var u=l.mapping.map(a),c=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=l.doc;if(c?l.replaceRangeWith(u,u,i.content.firstChild):l.replaceRange(u,u,i),!l.doc.eq(f)){var p=l.doc.resolve(u);if(c&&ft.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new ft(p));else{var h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach(function(d,v,m,b){return h=b}),l.setSelection(rc(e,p,l.doc.resolve(h)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}};je.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&yr(e)},20))};je.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)};je.beforeinput=function(e,t){if(L.chrome&&L.android&&t.inputType=="deleteContentBackward"){var n=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(i){return i(e,Wo(8,"Backspace"))}))){var r=e.state.selection,o=r.$cursor;o&&o.pos>0&&e.dispatch(e.state.tr.delete(o.pos-1,o.pos).scrollIntoView())}},50)}};for(var nm in _e)je[nm]=_e[nm];function Ki(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Uo=function(t,n){this.spec=n||Zr,this.side=this.spec.side||0,this.toDOM=t};Uo.prototype.map=function(t,n,r,o){var i=t.mapResult(n.from+o,this.side<0?-1:1),s=i.pos,a=i.deleted;return a?null:new Yt(s-r,s-r,this)};Uo.prototype.valid=function(){return!0};Uo.prototype.eq=function(t){return this==t||t instanceof Uo&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ki(this.spec,t.spec))};Uo.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var wn=function(t,n){this.spec=n||Zr,this.attrs=t};wn.prototype.map=function(t,n,r,o){var i=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Yt(i,s,this)};wn.prototype.valid=function(t,n){return n.from<n.to};wn.prototype.eq=function(t){return this==t||t instanceof wn&&Ki(this.attrs,t.attrs)&&Ki(this.spec,t.spec)};wn.is=function(t){return t.type instanceof wn};var Ui=function(t,n){this.spec=n||Zr,this.attrs=t};Ui.prototype.map=function(t,n,r,o){var i=t.mapResult(n.from+o,1);if(i.deleted)return null;var s=t.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Yt(i.pos-r,s.pos-r,this)};Ui.prototype.valid=function(t,n){var r=t.content.findIndex(n.from),o=r.index,i=r.offset,s;return i==n.from&&!(s=t.child(o)).isText&&i+s.nodeSize==n.to};Ui.prototype.eq=function(t){return this==t||t instanceof Ui&&Ki(this.attrs,t.attrs)&&Ki(this.spec,t.spec)};var Yt=function(t,n,r){this.from=t,this.to=n,this.type=r},yc={spec:{configurable:!0},inline:{configurable:!0}};Yt.prototype.copy=function(t,n){return new Yt(t,n,this.type)};Yt.prototype.eq=function(t,n){return n===void 0&&(n=0),this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to};Yt.prototype.map=function(t,n,r){return this.type.map(t,this,n,r)};Yt.widget=function(t,n,r){return new Yt(t,t,new Uo(n,r))};Yt.inline=function(t,n,r,o){return new Yt(t,n,new wn(r,o))};Yt.node=function(t,n,r,o){return new Yt(t,n,new Ui(r,o))};yc.spec.get=function(){return this.type.spec};yc.inline.get=function(){return this.type instanceof wn};Object.defineProperties(Yt.prototype,yc);var ya=[],Zr={},Et=function(t,n){this.local=t&&t.length?t:ya,this.children=n&&n.length?n:ya};Et.create=function(t,n){return n.length?ba(n,t,0,Zr):pe};Et.prototype.find=function(t,n,r){var o=[];return this.findInner(t==null?0:t,n==null?1e9:n,o,0,r),o};Et.prototype.findInner=function(t,n,r,o,i){for(var s=0;s<this.local.length;s++){var a=this.local[s];a.from<=n&&a.to>=t&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(var l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>t){var u=this.children[l]+1;this.children[l+2].findInner(t-u,n-u,r,o+u,i)}};Et.prototype.map=function(t,n,r){return this==pe||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Zr)};Et.prototype.mapInner=function(t,n,r,o,i){for(var s,a=0;a<this.local.length;a++){var l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?qC(this.children,s,t,n,r,o,i):s?new Et(s.sort(to)):pe};Et.prototype.add=function(t,n){return n.length?this==pe?Et.create(t,n):this.addInner(t,n,0):this};Et.prototype.addInner=function(t,n,r){var o=this,i,s=0;t.forEach(function(u,c){var f=c+r,p;if(!!(p=om(n,u,f))){for(i||(i=o.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,p,f+1):i.splice(s,0,c,c+u.nodeSize,ba(p,u,f+1,Zr)),s+=3}});for(var a=rm(s?im(n):n,-r),l=0;l<a.length;l++)a[l].type.valid(t,a[l])||a.splice(l--,1);return new Et(a.length?this.local.concat(a).sort(to):this.local,i||this.children)};Et.prototype.remove=function(t){return t.length==0||this==pe?this:this.removeInner(t,0)};Et.prototype.removeInner=function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s=void 0,a=r[i]+n,l=r[i+1]+n,u=0,c=void 0;u<t.length;u++)(c=t[u])&&c.from>a&&c.to<l&&(t[u]=null,(s||(s=[])).push(c));if(!!s){r==this.children&&(r=this.children.slice());var f=r[i+2].removeInner(s,a+1);f!=pe?r[i+2]=f:(r.splice(i,3),i-=3)}}if(o.length){for(var p=0,h=void 0;p<t.length;p++)if(h=t[p])for(var d=0;d<o.length;d++)o[d].eq(h,n)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Et(o,r):pe};Et.prototype.forChild=function(t,n){if(this==pe)return this;if(n.isLeaf)return Et.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var s=t+1,a=s+n.content.size,l=0;l<this.local.length;l++){var u=this.local[l];if(u.from<a&&u.to>s&&u.type instanceof wn){var c=Math.max(s,u.from)-s,f=Math.min(a,u.to)-s;c<f&&(o||(o=[])).push(u.copy(c,f))}}if(o){var p=new Et(o.sort(to));return r?new un([p,r]):p}return r||pe};Et.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Et)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0};Et.prototype.locals=function(t){return bc(this.localsInner(t))};Et.prototype.localsInner=function(t){if(this==pe)return ya;if(t.inlineContent||!this.local.some(wn.is))return this.local;for(var n=[],r=0;r<this.local.length;r++)this.local[r].type instanceof wn||n.push(this.local[r]);return n};var pe=new Et;Et.empty=pe;Et.removeOverlap=bc;var un=function(t){this.members=t};un.prototype.map=function(t,n){var r=this.members.map(function(o){return o.map(t,n,Zr)});return un.from(r)};un.prototype.forChild=function(t,n){if(n.isLeaf)return Et.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=pe&&(i instanceof un?r=r.concat(i.members):r.push(i))}return un.from(r)};un.prototype.eq=function(t){if(!(t instanceof un)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0};un.prototype.locals=function(t){for(var n,r=!0,o=0;o<this.members.length;o++){var i=this.members[o].localsInner(t);if(!!i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(var s=0;s<i.length;s++)n.push(i[s])}}return n?bc(r?n:n.sort(to)):ya};un.from=function(t){switch(t.length){case 0:return pe;case 1:return t[0];default:return new un(t)}};function qC(e,t,n,r,o,i,s){for(var a=e.slice(),l=function(et,D,at,Tt){for(var gt=0;gt<a.length;gt+=3){var Z=a[gt+1],st=void 0;Z==-1||et>Z+i||(D>=a[gt]+i?a[gt+1]=-1:at>=o&&(st=Tt-at-(D-et))&&(a[gt]+=st,a[gt+1]+=st))}},u=0;u<n.maps.length;u++)n.maps[u].forEach(l);for(var c=!1,f=0;f<a.length;f+=3)if(a[f+1]==-1){var p=n.map(e[f]+i),h=p-o;if(h<0||h>=r.content.size){c=!0;continue}var d=n.map(e[f+1]+i,-1),v=d-o,m=r.content.findIndex(h),b=m.index,y=m.offset,C=r.maybeChild(b);if(C&&y==h&&y+C.nodeSize==v){var g=a[f+2].mapInner(n,C,p+1,e[f]+i+1,s);g!=pe?(a[f]=h,a[f+1]=v,a[f+2]=g):(a[f+1]=-2,c=!0)}else c=!0}if(c){var O=KC(a,e,t||[],n,o,i,s),x=ba(O,r,0,s);t=x.local;for(var E=0;E<a.length;E+=3)a[E+1]<0&&(a.splice(E,3),E-=3);for(var H=0,j=0;H<x.children.length;H+=3){for(var q=x.children[H];j<a.length&&a[j]<q;)j+=3;a.splice(j,0,x.children[H],x.children[H+1],x.children[H+2])}}return new Et(t&&t.sort(to),a)}function rm(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Yt(o.from+t,o.to+t,o.type))}return n}function KC(e,t,n,r,o,i,s){function a(u,c){for(var f=0;f<u.local.length;f++){var p=u.local[f].map(r,o,c);p?n.push(p):s.onRemove&&s.onRemove(u.local[f].spec)}for(var h=0;h<u.children.length;h+=3)a(u.children[h+2],u.children[h]+c+1)}for(var l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+i+1);return n}function om(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function im(e){for(var t=[],n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function ba(e,t,n,r){var o=[],i=!1;t.forEach(function(l,u){var c=om(e,l,u+n);if(c){i=!0;var f=ba(c,l,n+u+1,r);f!=pe&&o.push(u,u+l.nodeSize,f)}});for(var s=rm(i?im(e):e,-n).sort(to),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Et(s,o):pe}function to(e,t){return e.from-t.from||e.to-t.to}function bc(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),sm(t,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),sm(t,o,r.copy(i.from,r.to)));break}}}return t}function sm(e,t,n){for(;t<e.length&&to(n,e[t])>0;)t++;e.splice(t,0,n)}function Sc(e){var t=[];return e.someProp("decorations",function(n){var r=n(e.state);r&&r!=pe&&t.push(r)}),e.cursorWrapper&&t.push(Et.create(e.state.doc,[e.cursorWrapper.deco])),un.from(t)}var Xt=function(t,n){this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fm),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=um(this),this.markCursor=null,this.cursorWrapper=null,lm(this),this.nodeViews=cm(this),this.docView=wv(this.state.doc,am(this),Sc(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,AC(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Sa={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};Sa.props.get=function(){if(this._props.state!=this.state){var e=this._props;this._props={};for(var t in e)this._props[t]=e[t];this._props.state=this.state}return this._props};Xt.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&hc(this),this._props=t,t.plugins&&(t.plugins.forEach(fm),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)};Xt.prototype.setProps=function(t){var n={};for(var r in this._props)n[r]=this._props[r];n.state=this.state;for(var o in t)n[o]=t[o];this.update(n)};Xt.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)};Xt.prototype.updateStateInner=function(t,n){var r=this,o=this.state,i=!1,s=!1;if(t.storedMarks&&this.composing&&(tm(this),s=!0),this.state=t,n){var a=cm(this);GC(a,this.nodeViews)&&(this.nodeViews=a,i=!0),hc(this)}this.editable=um(this),lm(this);var l=Sc(this),u=am(this),c=n?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(t.doc,u,l);(f||!t.selection.eq(o.selection))&&(s=!0);var p=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&V1(this);if(s){this.domObserver.stop();var h=f&&(L.ie||L.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&UC(o.selection,t.selection);if(f){var d=L.chrome?this.trackWrites=this.root.getSelection().focusNode:null;(i||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=wv(t.doc,u,l,this.dom,this)),d&&!this.trackWrites&&(h=!0)}h||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&pC(this))?yr(this,h):(Iv(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),c=="reset")this.dom.scrollTop=0;else if(c=="to selection"){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(m){return m(r)})||(t.selection instanceof ft?uv(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v):uv(this,this.coordsAtPos(t.selection.head,1),v))}else p&&j1(p)};Xt.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()};Xt.prototype.updatePluginViews=function(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var i=this.state.plugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(var s=0;s<this.pluginViews.length;s++){var a=this.pluginViews[s];a.update&&a.update(this,t)}};Xt.prototype.someProp=function(t,n){var r=this._props&&this._props[t],o;if(r!=null&&(o=n?n(r):r))return o;for(var i=0;i<this.directPlugins.length;i++){var s=this.directPlugins[i].props[t];if(s!=null&&(o=n?n(s):s))return o}var a=this.state.plugins;if(a)for(var l=0;l<a.length;l++){var u=a[l].props[t];if(u!=null&&(o=n?n(u):u))return o}};Xt.prototype.hasFocus=function(){return this.root.activeElement==this.dom};Xt.prototype.focus=function(){this.domObserver.stop(),this.editable&&$1(this.dom),yr(this),this.domObserver.start()};Sa.root.get=function(){var e=this._root;if(e==null){for(var t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t}return e||document};Xt.prototype.posAtCoords=function(t){return U1(this,t)};Xt.prototype.coordsAtPos=function(t,n){return n===void 0&&(n=1),dv(this,t,n)};Xt.prototype.domAtPos=function(t,n){return n===void 0&&(n=0),this.docView.domFromPos(t,n)};Xt.prototype.nodeDOM=function(t){var n=this.docView.descAt(t);return n?n.nodeDOM:null};Xt.prototype.posAtDOM=function(t,n,r){r===void 0&&(r=-1);var o=this.docView.posFromDOM(t,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o};Xt.prototype.endOfTextblock=function(t,n){return Z1(this,n||this.state,t)};Xt.prototype.destroy=function(){!this.docView||(_C(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Sc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)};Sa.isDestroyed.get=function(){return this.docView==null};Xt.prototype.dispatchEvent=function(t){return RC(this,t)};Xt.prototype.dispatch=function(t){var n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))};Object.defineProperties(Xt.prototype,Sa);function am(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",function(n){if(typeof n=="function"&&(n=n(e.state)),n)for(var r in n)r=="class"&&(t.class+=" "+n[r]),r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),[Yt.node(0,e.state.doc.content.size,t)]}function lm(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Yt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function um(e){return!e.someProp("editable",function(t){return t(e.state)===!1})}function UC(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function cm(e){var t={};return e.someProp("nodeViews",function(n){for(var r in n)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=n[r])}),t}function GC(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r}function fm(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var br={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},wa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},pm=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent),YC=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor),XC=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent),hm=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),QC=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ZC=pm&&(hm||+pm[1]<57)||XC&&hm;for(var he=0;he<10;he++)br[48+he]=br[96+he]=String(he);for(var he=1;he<=24;he++)br[he+111]="F"+he;for(var he=65;he<=90;he++)br[he]=String.fromCharCode(he+32),wa[he]=String.fromCharCode(he);for(var wc in br)wa.hasOwnProperty(wc)||(wa[wc]=br[wc]);function tx(e){var t=ZC&&(e.ctrlKey||e.altKey||e.metaKey)||(YC||QC)&&e.shiftKey&&e.key&&e.key.length==1,n=!t&&e.key||(e.shiftKey?wa:br)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var ex=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function nx(e){var t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");for(var r,o,i,s,a=0;a<t.length-1;a++){var l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))ex?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function rx(e){var t=Object.create(null);for(var n in e)t[nx(n)]=e[n];return t}function Cc(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n!==!1&&t.shiftKey&&(e="Shift-"+e),e}function ox(e){return new Ce({props:{handleKeyDown:xc(e)}})}function xc(e){var t=rx(e);return function(n,r){var o=tx(r),i=o.length==1&&o!=" ",s,a=t[Cc(o,r,!i)];if(a&&a(n.state,n.dispatch,n))return!0;if(i&&(r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=br[r.keyCode])&&s!=o){var l=t[Cc(s,r,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(i&&r.shiftKey){var u=t[Cc(o,r,!0)];if(u&&u(n.state,n.dispatch,n))return!0}return!1}}function ix(e){return Object.prototype.toString.call(e).slice(8,-1)}function kc(e){return ix(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Ca(e,t){const n=R({},e);return kc(e)&&kc(t)&&Object.keys(t).forEach(r=>{kc(t[r])?r in e?n[r]=Ca(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function dm(e){return typeof e=="function"}function pt(e,t=void 0,...n){return dm(e)?t?e.bind(t)(...n):e(...n):e}function G(e,t,n){return e.config[t]===void 0&&e.parent?G(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind(Le(R({},n),{parent:e.parent?G(e.parent,t,n):null})):e.config[t]}class Ne{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=R(R({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(G(this,"addOptions",{name:this.name}))),this.storage=pt(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ne(t)}configure(t={}){const n=this.extend();return n.options=Ca(this.options,t),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Ne(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=t.defaultOptions?t.defaultOptions:n.parent.options,t.addOptions&&(n.options=pt(G(n,"addOptions",{name:n.name}))),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}}function vm(e,t,n){const{from:r,to:o}=t,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="",l=!0;return e.nodesBetween(r,o,(u,c,f,p)=>{var h;const d=s==null?void 0:s[u.type.name];d?(u.isBlock&&!l&&(a+=i,l=!0),a+=d({node:u,pos:c,parent:f,index:p})):u.isText?(a+=(h=u==null?void 0:u.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c),l=!1):u.isBlock&&!l&&(a+=i,l=!0)}),a}function mm(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const sx=Ne.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Ce({key:new Ve("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{from:i,to:s}=o,a=mm(n);return vm(r,{from:i,to:s},{textSerializers:a})}}})]}}),ax=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{e.isDestroyed||t.dom.blur()}),!0);var lx=Object.freeze({__proto__:null,blur:ax});const ux=(e=!1)=>({commands:t})=>t.setContent("",e);var cx=Object.freeze({__proto__:null,clearContent:ux});const fx=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:o}=r;return o.forEach(i=>{e.doc.nodesBetween(i.$from.pos,i.$to.pos,(s,a)=>{if(s.type.isText)return;const l=t.doc.resolve(t.mapping.map(a)),u=t.doc.resolve(t.mapping.map(a+s.nodeSize)),c=l.blockRange(u);if(!c)return;const f=Vo(c);if(s.type.isTextblock&&n){const{defaultType:p}=l.parent.contentMatchAt(l.index());t.setNodeMarkup(c.start,p)}(f||f===0)&&n&&t.lift(c,f)})}),!0};var px=Object.freeze({__proto__:null,clearNodes:fx});const hx=e=>t=>e(t);var dx=Object.freeze({__proto__:null,command:hx});const vx=()=>({state:e,dispatch:t})=>tv(e,t);var mx=Object.freeze({__proto__:null,createParagraphNear:vx});function ne(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}const gx=e=>({tr:t,state:n,dispatch:r})=>{const o=ne(e,n.schema),i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),u=i.after(s);t.delete(l,u).scrollIntoView()}return!0}return!1};var yx=Object.freeze({__proto__:null,deleteNode:gx});const bx=e=>({tr:t,dispatch:n})=>{const{from:r,to:o}=e;return n&&t.delete(r,o),!0};var Sx=Object.freeze({__proto__:null,deleteRange:bx});const wx=()=>({state:e,dispatch:t})=>Vu(e,t);var Cx=Object.freeze({__proto__:null,deleteSelection:wx});const xx=()=>({commands:e})=>e.keyboardShortcut("Enter");var kx=Object.freeze({__proto__:null,enter:xx});const Ox=()=>({state:e,dispatch:t})=>Zd(e,t);var Mx=Object.freeze({__proto__:null,exitCode:Ox});function Sr(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function Oc(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function xa(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(o=>n.strict?t[o]===e[o]:Oc(t[o])?t[o].test(e[o]):t[o]===e[o]):!0}function Mc(e,t,n={}){return e.find(r=>r.type===t&&xa(r.attrs,n))}function Tx(e,t,n={}){return!!Mc(e,t,n)}function gm(e,t,n={}){if(!e||!t)return;const r=e.parent.childAfter(e.parentOffset);if(!r.node)return;const o=Mc(r.node.marks,t,n);if(!o)return;let i=e.index(),s=e.start()+r.offset,a=i+1,l=s+r.node.nodeSize;for(Mc(r.node.marks,t,n);i>0&&o.isInSet(e.parent.child(i-1).marks);)i-=1,s-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&Tx(e.parent.child(a).marks,t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}const Ex=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const i=Sr(e,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:c}=a;if(o){const f=gm(l,i,t);if(f&&f.from<=u&&f.to>=c){const p=vt.create(s,f.from,f.to);n.setSelection(p)}}return!0};var Ax=Object.freeze({__proto__:null,extendMarkRange:Ex});const _x=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};var Nx=Object.freeze({__proto__:null,first:_x});function eo(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Rx(e){var t;return((t=e.constructor)===null||t===void 0?void 0:t.toString().substring(0,5))==="class"}function Tc(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!Rx(e)}function ym(e){return Tc(e)&&e instanceof vt}function Ix(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Dx(e,t=null){if(!t)return null;if(t==="start"||t===!0)return{from:0,to:0};const{size:n}=e.doc.content;return t==="end"?{from:n,to:n}:t==="all"?{from:0,to:n}:{from:t,to:t}}const Px=(e=null,t)=>({editor:n,view:r,tr:o,dispatch:i})=>{t=R({scrollIntoView:!0},t);const s=()=>{Ix()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),(t==null?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(i&&e===null&&!ym(n.state.selection))return s(),!0;const{from:a,to:l}=Dx(n.state,e)||n.state.selection,{doc:u,storedMarks:c}=o,f=rt.atStart(u).from,p=rt.atEnd(u).to,h=eo(a,f,p),d=eo(l,f,p),v=vt.create(u,h,d),m=n.state.selection.eq(v);return i&&(m||o.setSelection(v),m&&c&&o.setStoredMarks(c),s()),!0};var Lx=Object.freeze({__proto__:null,focus:Px});const Bx=(e,t)=>n=>e.every((r,o)=>t(r,Le(R({},n),{index:o})));var Fx=Object.freeze({__proto__:null,forEach:Bx});const zx=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t);var Hx=Object.freeze({__proto__:null,insertContent:zx});function bm(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function ka(e,t,n){if(n=R({slice:!0,parseOptions:{}},n),typeof e=="object"&&e!==null)try{return Array.isArray(e)?T.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),ka("",t,n)}if(typeof e=="string"){const r=bn.fromSchema(t);return n.slice?r.parseSlice(bm(e),n.parseOptions).content:r.parse(bm(e),n.parseOptions)}return ka("",t,n)}function Vx(e,t,n){const r=e.steps.length-1;if(r<t)return;const o=e.steps[r];if(!(o instanceof Gn||o instanceof He))return;const i=e.mapping.maps[r];let s=0;i.forEach((a,l,u,c)=>{s===0&&(s=c)}),e.setSelection(rt.near(e.doc.resolve(s),n))}const jx=e=>e.toString().startsWith("<"),$x=(e,t,n)=>({tr:r,dispatch:o,editor:i})=>{if(o){n=R({parseOptions:{},updateSelection:!0},n);const s=ka(t,i.schema,{parseOptions:R({preserveWhitespace:"full"},n.parseOptions)});if(s.toString()==="<>")return!0;let{from:a,to:l}=typeof e=="number"?{from:e,to:e}:e,u=!0;if((jx(s)?s:[s]).forEach(f=>{u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}r.replaceWith(a,l,s),n.updateSelection&&Vx(r,r.steps.length-1,-1)}return!0};var Wx=Object.freeze({__proto__:null,insertContentAt:$x});const Jx=()=>({state:e,dispatch:t})=>Jd(e,t);var qx=Object.freeze({__proto__:null,joinBackward:Jx});const Kx=()=>({state:e,dispatch:t})=>Ud(e,t);var Ux=Object.freeze({__proto__:null,joinForward:Kx});const Gx=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1;function Yx(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Gx?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const Xx=e=>({editor:t,view:n,tr:r,dispatch:o})=>{const i=Yx(e).split(/-(?!$)/),s=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&o&&r.maybeStep(c)}),!0};var Qx=Object.freeze({__proto__:null,keyboardShortcut:Xx});function Go(e,t,n={}){const{from:r,to:o,empty:i}=e.selection,s=t?ne(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),d=Math.min(o,p+f.nodeSize);a.push({node:f,from:h,to:d})});const l=o-r,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>xa(f.node.attrs,n,{strict:!1}));return i?!!u.length:u.reduce((f,p)=>f+p.to-p.from,0)>=l}const Zx=(e,t={})=>({state:n,dispatch:r})=>{const o=ne(e,n.schema);return Go(n,o,t)?Xd(n,r):!1};var tk=Object.freeze({__proto__:null,lift:Zx});const ek=()=>({state:e,dispatch:t})=>ev(e,t);var nk=Object.freeze({__proto__:null,liftEmptyBlock:ek});const rk=e=>({state:t,dispatch:n})=>{const r=ne(e,t.schema);return R1(r)(t,n)};var ok=Object.freeze({__proto__:null,liftListItem:rk});const ik=()=>({state:e,dispatch:t})=>Qd(e,t);var sk=Object.freeze({__proto__:null,newlineInCode:ik});function Oa(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Sm(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,o)=>(n.includes(o)||(r[o]=e[o]),r),{})}const ak=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Oa(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=ne(e,r.schema)),a==="mark"&&(s=Sr(e,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{i&&i===u.type&&n.setNodeMarkup(c,void 0,Sm(u.attrs,t)),s&&u.marks.length&&u.marks.forEach(f=>{s===f.type&&n.addMark(c,c+u.nodeSize,s.create(Sm(f.attrs,t)))})})}),!0):!1};var lk=Object.freeze({__proto__:null,resetAttributes:ak});const uk=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0);var ck=Object.freeze({__proto__:null,scrollIntoView:uk});const fk=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size});var pk=Object.freeze({__proto__:null,selectAll:fk});const hk=()=>({state:e,dispatch:t})=>qd(e,t);var dk=Object.freeze({__proto__:null,selectNodeBackward:hk});const vk=()=>({state:e,dispatch:t})=>Gd(e,t);var mk=Object.freeze({__proto__:null,selectNodeForward:vk});const gk=()=>({state:e,dispatch:t})=>O1(e,t);var yk=Object.freeze({__proto__:null,selectParentNode:gk});function wm(e,t,n={}){return ka(e,t,{slice:!1,parseOptions:n})}const bk=(e,t=!1,n={})=>({tr:r,editor:o,dispatch:i})=>{const{doc:s}=r,a=wm(e,o.schema,n),l=vt.create(s,0,s.content.size);return i&&r.setSelection(l).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0};var Sk=Object.freeze({__proto__:null,setContent:bk});function Cm(e,t){const n=Sr(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?R({},a.attrs):{}}const wk=(e,t={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Sr(e,r.schema);if(o)if(s){const u=Cm(r,l);n.addStoredMark(l.create(R(R({},u),t)))}else a.forEach(u=>{const c=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(c,f,(p,h)=>{const d=Math.max(h,c),v=Math.min(h+p.nodeSize,f);p.marks.find(b=>b.type===l)?p.marks.forEach(b=>{l===b.type&&n.addMark(d,v,l.create(R(R({},b.attrs),t)))}):n.addMark(d,v,l.create(t))})});return!0};var Ck=Object.freeze({__proto__:null,setMark:wk});const xk=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0);var kk=Object.freeze({__proto__:null,setMeta:xk});const Ok=(e,t={})=>({state:n,dispatch:r})=>{const o=ne(e,n.schema);return E1(o,t)(n,r)};var Mk=Object.freeze({__proto__:null,setNode:Ok});const Tk=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,o=rt.atStart(r).from,i=rt.atEnd(r).to,s=eo(e,o,i),a=ft.create(r,s);t.setSelection(a)}return!0};var Ek=Object.freeze({__proto__:null,setNodeSelection:Tk});const Ak=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:o,to:i}=typeof e=="number"?{from:e,to:e}:e,s=rt.atStart(r).from,a=rt.atEnd(r).to,l=eo(o,s,a),u=eo(i,s,a),c=vt.create(r,l,u);t.setSelection(c)}return!0};var _k=Object.freeze({__proto__:null,setTextSelection:Ak});const Nk=e=>({state:t,dispatch:n})=>{const r=ne(e,t.schema);return P1(r)(t,n)};var Rk=Object.freeze({__proto__:null,sinkListItem:Nk});function Ma(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=e.find(i=>i.type===t&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function Ik(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xm(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(o=>t==null?void 0:t.includes(o.type.name));e.tr.ensureMarks(r)}}const Dk=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=t,{$from:a,$to:l}=i,u=o.extensionManager.attributes,c=Ma(u,a.node().type.name,a.node().attrs);if(i instanceof ft&&i.node.isBlock)return!a.parentOffset||!Yn(s,a.pos)?!1:(r&&(e&&xm(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const f=l.parentOffset===l.parent.content.size;i instanceof vt&&t.deleteSelection();const p=a.depth===0?void 0:Ik(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&p?[{type:p,attrs:c}]:void 0,d=Yn(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!d&&Yn(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(d=!0,h=p?[{type:p,attrs:c}]:void 0),d&&(t.split(t.mapping.map(a.pos),1,h),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const v=t.mapping.map(a.before()),m=t.doc.resolve(v);a.node(-1).canReplaceWith(m.index(),m.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&xm(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return!0};var Pk=Object.freeze({__proto__:null,splitBlock:Dk});const Lk=e=>({tr:t,state:n,dispatch:r,editor:o})=>{var i;const s=ne(e,n.schema),{$from:a,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(l))return!1;const c=a.node(-1);if(c.type!==s)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==s||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let m=T.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-b;E>=a.depth-3;E-=1)m=T.from(a.node(E).copy(m));const y=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,C=Ma(f,a.node().type.name,a.node().attrs),g=((i=s.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(C))||void 0;m=m.append(T.from(s.createAndFill(null,g)||void 0));const O=a.before(a.depth-(b-1));t.replace(O,a.after(-y),new $(m,4-b,0));let x=-1;t.doc.nodesBetween(O,t.doc.content.size,(E,H)=>{if(x>-1)return!1;E.isTextblock&&E.content.size===0&&(x=H+1)}),x>-1&&t.setSelection(vt.near(t.doc.resolve(x))),t.scrollIntoView()}return!0}const p=l.pos===a.end()?c.contentMatchAt(0).defaultType:null,h=Ma(f,c.type.name,c.attrs),d=Ma(f,a.node().type.name,a.node().attrs);t.delete(a.pos,l.pos);const v=p?[{type:s,attrs:h},{type:p,attrs:d}]:[{type:s,attrs:h}];return Yn(t.doc,a.pos,2)?(r&&t.split(a.pos,2,v).scrollIntoView(),!0):!1};var Bk=Object.freeze({__proto__:null,splitListItem:Lk});function km(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Fk(e){return t=>km(t.$from,e)}function Ta(e){const t=e.filter(o=>o.type==="extension"),n=e.filter(o=>o.type==="node"),r=e.filter(o=>o.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Om(e,t){const{nodeExtensions:n}=Ta(t),r=n.find(s=>s.name===e);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=pt(G(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}const zk=(e,t)=>({editor:n,tr:r,state:o,dispatch:i,chain:s,commands:a,can:l})=>{const{extensions:u}=n.extensionManager,c=ne(e,o.schema),f=ne(t,o.schema),{selection:p}=o,{$from:h,$to:d}=p,v=h.blockRange(d);if(!v)return!1;const m=Fk(y=>Om(y.type.name,u))(p);if(v.depth>=1&&m&&v.depth-m.depth<=1){if(m.node.type===c)return a.liftListItem(f);if(Om(m.node.type.name,u)&&c.validContent(m.node.content)&&i)return r.setNodeMarkup(m.pos,c),!0}return l().wrapInList(c)?a.wrapInList(c):s().clearNodes().wrapInList(c).run()};var Hk=Object.freeze({__proto__:null,toggleList:zk});function Ec(e,t,n={}){const{empty:r,ranges:o}=e.selection,i=t?Sr(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>xa(f.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:f,$to:p})=>{const h=f.pos,d=p.pos;e.doc.nodesBetween(h,d,(v,m)=>{if(!v.isText&&!v.marks.length)return;const b=Math.max(h,m),y=Math.min(d,m+v.nodeSize);s+=y-b,a.push(...v.marks.map(g=>({mark:g,from:b,to:y})))})}),s===0)return!1;const l=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>xa(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),u=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+u:l)>=s}const Vk=(e,t={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Sr(e,r.schema);return Ec(r,s,t)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,t)};var jk=Object.freeze({__proto__:null,toggleMark:Vk});const $k=(e,t,n={})=>({state:r,commands:o})=>{const i=ne(e,r.schema),s=ne(t,r.schema);return Go(r,i,n)?o.setNode(s):o.setNode(i,n)};var Wk=Object.freeze({__proto__:null,toggleNode:$k});const Jk=(e,t={})=>({state:n,dispatch:r})=>{const o=ne(e,n.schema);return Go(n,o,t)?Xd(n,r):rv(o,t)(n,r)};var qk=Object.freeze({__proto__:null,toggleWrap:Jk});const Kk=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){const s=e.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,e.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1};var Uk=Object.freeze({__proto__:null,undoInputRule:Kk});const Gk=()=>({tr:e,state:t,dispatch:n})=>{const{selection:r}=e,{empty:o,ranges:i}=r;return o||n&&Object.entries(t.schema.marks).forEach(([,s])=>{i.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos,s)})}),!0};var Yk=Object.freeze({__proto__:null,unsetAllMarks:Gk});const Xk=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=Sr(e,r.schema),{$from:u,empty:c,ranges:f}=a;if(!o)return!0;if(c&&s){let{from:p,to:h}=a;const d=(i=u.marks().find(m=>m.type===l))===null||i===void 0?void 0:i.attrs,v=gm(u,l,d);v&&(p=v.from,h=v.to),n.removeMark(p,h,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0};var Qk=Object.freeze({__proto__:null,unsetMark:Xk});const Zk=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Oa(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(i=ne(e,r.schema)),a==="mark"&&(s=Sr(e,r.schema)),o&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(f,p)=>{i&&i===f.type&&n.setNodeMarkup(p,void 0,R(R({},f.attrs),t)),s&&f.marks.length&&f.marks.forEach(h=>{if(s===h.type){const d=Math.max(p,u),v=Math.min(p+f.nodeSize,c);n.addMark(d,v,s.create(R(R({},h.attrs),t)))}})})}),!0):!1};var tO=Object.freeze({__proto__:null,updateAttributes:Zk});const eO=(e,t={})=>({state:n,dispatch:r})=>{const o=ne(e,n.schema);return Go(n,o,t)?!1:rv(o,t)(n,r)};var nO=Object.freeze({__proto__:null,wrapIn:eO});const rO=(e,t={})=>({state:n,dispatch:r})=>{const o=ne(e,n.schema);return _1(o,t)(n,r)};var oO=Object.freeze({__proto__:null,wrapInList:rO});const iO=Ne.create({name:"commands",addCommands(){return R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R(R({},lx),cx),px),dx),mx),yx),Sx),Cx),kx),Mx),Ax),Nx),Lx),Fx),Hx),Wx),qx),Ux),Qx),tk),nk),ok),sk),lk),ck),pk),dk),mk),yk),Sk),Ck),kk),Mk),Ek),_k),Rk),Pk),Bk),Hk),jk),Wk),qk),Uk),Yk),Qk),tO),nO),oO)}}),sO=Ne.create({name:"editable",addProseMirrorPlugins(){return[new Ce({key:new Ve("editable"),props:{editable:()=>this.editor.options.editable}})]}}),aO=Ne.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ce({key:new Ve("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),lO=Ne.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:n})=>[()=>n.undoInputRule(),()=>n.deleteSelection(),()=>n.joinBackward(),()=>n.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:n})=>[()=>n.deleteSelection(),()=>n.joinForward(),()=>n.selectNodeForward()]);return{Enter:()=>this.editor.commands.first(({commands:n})=>[()=>n.newlineInCode(),()=>n.createParagraphNear(),()=>n.liftEmptyBlock(),()=>n.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()}}}),uO=Ne.create({name:"tabindex",addProseMirrorPlugins(){return[new Ce({key:new Ve("tabindex"),props:{attributes:{tabindex:"0"}}})]}});var cO=Object.freeze({__proto__:null,ClipboardTextSerializer:sx,Commands:iO,Editable:sO,FocusEvents:aO,Keymap:lO,Tabindex:uO});function fO(e,t){const n=ne(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?R({},s.attrs):{}}function pO(e,t){const n=Oa(typeof t=="string"?t:t.name,e.schema);return n==="node"?fO(e,t):n==="mark"?Cm(e,t):{}}function hO(e,t,n={}){if(!t)return Go(e,null,n)||Ec(e,null,n);const r=Oa(t,e.schema);return r==="node"?Go(e,t,n):r==="mark"?Ec(e,t,n):!1}function dO(e,t){const n=ce.fromSchema(t).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function vO(e,t){const n={from:0,to:e.content.size};return vm(e,n,t)}function mO(e){var t;const n=(t=e.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function gO(e){const t=document.querySelector("style[data-tiptap-style]");if(t!==null)return t;const n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n),n}function Ac(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return Le(R({},t),{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}class _c{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...c)=>{const f=l(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!t,u=t||i.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(p=>p===!0)),f=Le(R({},Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...v)=>{const m=this.buildProps(u,n),b=h(...v)(m);return a.push(b),f}]))),{run:c});return f}createCan(t){const{rawCommands:n,state:r}=this,o=void 0,i=t||r.tr,s=this.buildProps(i,o),a=Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)(Le(R({},s),{dispatch:o}))]));return Le(R({},a),{chain:()=>this.createChain(i,o)})}buildProps(t,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o;i.storedMarks&&t.setStoredMarks(i.storedMarks);const a={tr:t,editor:o,view:s,state:Ac({state:i,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(a)]))}};return a}}class Ea{constructor(t){this.find=t.find,this.handler=t.handler}}const yO=(e,t)=>{if(Oc(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[];return r.push(n.text),r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nc(e){var t;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!!((t=u.nodeBefore||u.nodeAfter)===null||t===void 0?void 0:t.marks.find(h=>h.type.spec.code)))return!1;let c=!1;const f=500,p=u.parent.textBetween(Math.max(0,u.parentOffset-f),u.parentOffset,void 0,"\uFFFC")+i;return s.forEach(h=>{if(c)return;const d=yO(p,h.find);if(!d)return;const v=l.state.tr,m=Ac({state:l.state,transaction:v}),b={from:r-(d[0].length-i.length),to:o},{commands:y,chain:C,can:g}=new _c({editor:n,state:m});h.handler({state:m,range:b,match:d,commands:y,chain:C,can:g}),!!v.steps.length&&(v.setMeta(a,{transform:v,from:r,to:o,text:i}),l.dispatch(v),c=!0)}),c}function bO(e){const{editor:t,rules:n}=e,r=new Ce({state:{init(){return null},apply(o,i){const s=o.getMeta(this);return s||(o.selectionSet||o.docChanged?null:i)}},props:{handleTextInput(o,i,s,a){return Nc({editor:t,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&Nc({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?Nc({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function SO(e){return typeof e=="number"}class wO{constructor(t){this.find=t.find,this.handler=t.handler}}const CO=(e,t)=>{if(Oc(t))return[...e.matchAll(t)];const n=t(e);return n?n.map(r=>{const o=[];return o.push(r.text),o.index=r.index,o.input=e,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function xO(e){const{editor:t,state:n,from:r,to:o,rules:i}=e,{commands:s,chain:a,can:l}=new _c({editor:t,state:n});n.doc.nodesBetween(r,o,(u,c)=>{if(!u.isTextblock||u.type.spec.code)return;const f=Math.max(r,c),p=Math.min(o,c+u.content.size),h=u.textBetween(f-c,p-c,void 0,"\uFFFC");i.forEach(d=>{CO(h,d.find).forEach(m=>{if(m.index===void 0)return;const b=f+m.index+1,y=b+m[0].length,C={from:n.tr.mapping.map(b),to:n.tr.mapping.map(y)};d.handler({state:n,range:C,match:m,commands:s,chain:a,can:l})})})})}function kO(e){const{editor:t,rules:n}=e;let r=!1;const o=new Ce({props:{handlePaste:(i,s)=>{var a;const l=(a=s.clipboardData)===null||a===void 0?void 0:a.getData("text/html");return r=!!(l==null?void 0:l.includes("data-pm-slice")),!1}},appendTransaction:(i,s,a)=>{const l=i[0];if(!l.getMeta("paste")||r)return;const{doc:u,before:c}=l,f=c.content.findDiffStart(u.content),p=c.content.findDiffEnd(u.content);if(!SO(f)||!p||f===p.b)return;const h=a.tr,d=Ac({state:a,transaction:h});if(xO({editor:t,state:d,from:Math.max(f-1,0),to:p.b,rules:n,plugin:o}),!!h.steps.length)return h},isPasteRules:!0});return o}function Mm(e){const t=[],{nodeExtensions:n,markExtensions:r}=Ta(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return e.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=G(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([p,h])=>{t.push({type:f,name:p,attribute:R(R({},i),h)})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=G(s,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,f])=>{t.push({type:s.name,name:c,attribute:R(R({},i),f)})})}),t}function re(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r=R({},t);return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}o==="class"?r[o]=[r[o],i].join(" "):o==="style"?r[o]=[r[o],i].join("; "):r[o]=i}),r},{})}function Rc(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>re(n,r),{})}function OO(e={}){return Object.keys(e).length===0&&e.constructor===Object}function MO(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function Tm(e,t){return e.style?e:Le(R({},e),{getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const o=t.filter(i=>i.attribute.rendered).reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):MO(n.getAttribute(s.name));return Tc(a)&&console.warn(`[tiptap warn]: BREAKING CHANGE: "parseHTML" for your attribute "${s.name}" returns an object but should return the value itself. If this is expected you can ignore this message. This warning will be removed in one of the next releases. Further information: https://github.com/ueberdosis/tiptap/issues/1863`),a==null?i:Le(R({},i),{[s.name]:a})},{});return R(R({},r),o)}})}function Em(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&OO(n)?!1:n!=null))}function TO(e){var t;const n=Mm(e),{nodeExtensions:r,markExtensions:o}=Ta(e),i=(t=r.find(l=>G(l,"topNode")))===null||t===void 0?void 0:t.name,s=Object.fromEntries(r.map(l=>{const u=n.filter(m=>m.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=e.reduce((m,b)=>{const y=G(b,"extendNodeSchema",c);return R(R({},m),y?y(l):{})},{}),p=Em(Le(R({},f),{content:pt(G(l,"content",c)),marks:pt(G(l,"marks",c)),group:pt(G(l,"group",c)),inline:pt(G(l,"inline",c)),atom:pt(G(l,"atom",c)),selectable:pt(G(l,"selectable",c)),draggable:pt(G(l,"draggable",c)),code:pt(G(l,"code",c)),defining:pt(G(l,"defining",c)),isolating:pt(G(l,"isolating",c)),attrs:Object.fromEntries(u.map(m=>{var b;return[m.name,{default:(b=m==null?void 0:m.attribute)===null||b===void 0?void 0:b.default}]}))})),h=pt(G(l,"parseHTML",c));h&&(p.parseDOM=h.map(m=>Tm(m,u)));const d=G(l,"renderHTML",c);d&&(p.toDOM=m=>d({node:m,HTMLAttributes:Rc(m,u)}));const v=G(l,"renderText",c);return v&&(p.toText=v),[l.name,p]})),a=Object.fromEntries(o.map(l=>{const u=n.filter(v=>v.type===l.name),c={name:l.name,options:l.options,storage:l.storage},f=e.reduce((v,m)=>{const b=G(m,"extendMarkSchema",c);return R(R({},v),b?b(l):{})},{}),p=Em(Le(R({},f),{inclusive:pt(G(l,"inclusive",c)),excludes:pt(G(l,"excludes",c)),group:pt(G(l,"group",c)),spanning:pt(G(l,"spanning",c)),code:pt(G(l,"code",c)),attrs:Object.fromEntries(u.map(v=>{var m;return[v.name,{default:(m=v==null?void 0:v.attribute)===null||m===void 0?void 0:m.default}]}))})),h=pt(G(l,"parseHTML",c));h&&(p.parseDOM=h.map(v=>Tm(v,u)));const d=G(l,"renderHTML",c);return d&&(p.toDOM=v=>d({mark:v,HTMLAttributes:Rc(v,u)})),[l.name,p]}));return new Gr({topNode:i,nodes:s,marks:a})}function Ic(e,t){return t.nodes[e]||t.marks[e]||null}function Am(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function EO(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return[...new Set(t)]}class Yo{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=Yo.resolve(t),this.schema=TO(this.extensions),this.extensions.forEach(r=>{var o;this.editor.extensionStorage[r.name]=r.storage;const i={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Ic(r.name,this.schema)};r.type==="mark"&&((o=pt(G(r,"keepOnSplit",i)))!==null&&o!==void 0?o:!0)&&this.splittableMarks.push(r.name);const s=G(r,"onBeforeCreate",i);s&&this.editor.on("beforeCreate",s);const a=G(r,"onCreate",i);a&&this.editor.on("create",a);const l=G(r,"onUpdate",i);l&&this.editor.on("update",l);const u=G(r,"onSelectionUpdate",i);u&&this.editor.on("selectionUpdate",u);const c=G(r,"onTransaction",i);c&&this.editor.on("transaction",c);const f=G(r,"onFocus",i);f&&this.editor.on("focus",f);const p=G(r,"onBlur",i);p&&this.editor.on("blur",p);const h=G(r,"onDestroy",i);h&&this.editor.on("destroy",h)})}static resolve(t){const n=Yo.sort(Yo.flatten(t)),r=EO(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=G(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(t){const n=100;return t.sort((r,o)=>{const i=G(r,"priority")||n,s=G(o,"priority")||n;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Ic(n.name,this.schema)},o=G(n,"addCommands",r);return o?R(R({},t),o()):t},{})}get plugins(){const{editor:t}=this,n=Yo.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:t,type:Ic(s.name,this.schema)},l=[],u=G(s,"addKeyboardShortcuts",a);if(u){const h=Object.fromEntries(Object.entries(u()).map(([v,m])=>[v,()=>m({editor:t})])),d=ox(h);l.push(d)}const c=G(s,"addInputRules",a);Am(s,t.options.enableInputRules)&&c&&r.push(...c());const f=G(s,"addPasteRules",a);Am(s,t.options.enablePasteRules)&&f&&o.push(...f());const p=G(s,"addProseMirrorPlugins",a);if(p){const h=p();l.push(...h)}return l}).flat();return[bO({editor:t,rules:r}),kO({editor:t,rules:o}),...i]}get attributes(){return Mm(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=Ta(this.extensions);return Object.fromEntries(n.filter(r=>!!G(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:t,type:ne(r.name,this.schema)},s=G(r,"addNodeView",i);if(!s)return[];const a=(l,u,c,f)=>{const p=Rc(l,o);return s()({editor:t,node:l,getPos:c,decorations:f,HTMLAttributes:p,extension:r})};return[r.name,a]}))}}class AO{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(o=>o.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(o=>o!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}const _O=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class NO extends AO{constructor(t={}){super();this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=gO(_O))}setOptions(t={}){this.options=R(R({},this.options),t),!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t){this.setOptions({editable:t})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=dm(n)?n(t,this.state.plugins):[...this.state.plugins,t],o=this.state.reconfigure({plugins:r});this.view.updateState(o)}unregisterPlugin(t){if(this.isDestroyed)return;const n=typeof t=="string"?`${t}$`:t.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(o=>!o.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(cO):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Yo(n,this)}createCommandManager(){this.commandManager=new _c({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new Xt(this.options.element,Le(R({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:we.create({doc:wm(this.options.content,this.schema,this.options.parseOptions)})}));const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=t.getMeta("focus"),i=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return pO(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,o=typeof t=="string"?n:t;return hO(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return dO(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return vO(this.state.doc,{blockSeparator:n,textSerializers:R(R({},r),mm(this.schema))})}get isEmpty(){return mO(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!((t=this.view)===null||t===void 0?void 0:t.docView)}}class oe{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=R(R({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(G(this,"addOptions",{name:this.name}))),this.storage=pt(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new oe(t)}configure(t={}){const n=this.extend();return n.options=Ca(this.options,t),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new oe(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=t.defaultOptions?t.defaultOptions:n.parent.options,t.addOptions&&(n.options=pt(G(n,"addOptions",{name:n.name}))),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}}class no{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=R(R({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pt(G(this,"addOptions",{name:this.name}))),this.storage=pt(G(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new no(t)}configure(t={}){const n=this.extend();return n.options=Ca(this.options,t),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new no(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=t.defaultOptions?t.defaultOptions:n.parent.options,t.addOptions&&(n.options=pt(G(n,"addOptions",{name:n.name}))),n.storage=pt(G(n,"addStorage",{name:n.name,options:n.options})),n}}function RO(e){return new Ea({find:e.find,handler:({state:t,range:n,match:r})=>{const o=pt(e.getAttributes,void 0,r)||{},{tr:i}=t,s=n.from;let a=n.to;if(r[1]){const l=r[0].lastIndexOf(r[1]);let u=s+l;u>a?u=a:a=u+r[1].length;const c=r[0][r[0].length-1];i.insertText(c,s+r[0].length-1),i.replaceWith(u,a,e.type.create(o))}else r[0]&&i.replaceWith(s,a,e.type.create(o))}})}function _m(e,t,n){const r=[];return n.doc.nodesBetween(e,t,(o,i)=>{r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function Xo(e){return new Ea({find:e.find,handler:({state:t,range:n,match:r})=>{const o=pt(e.getAttributes,void 0,r);if(o===!1||o===null)return;const{tr:i}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const u=a.search(/\S/),c=n.from+a.indexOf(s),f=c+s.length;if(_m(n.from,n.to,t).filter(h=>h.mark.type.excluded.find(v=>v===e.type&&v!==h.mark.type)).filter(h=>h.to>c).length)return null;f<n.to&&i.delete(f,n.to),c>n.from&&i.delete(n.from+u,c),l=n.from+u+s.length,i.addMark(n.from+u,l,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function Dc(e){return new Ea({find:e.find,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=pt(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)}})}function Pc(e){return new Ea({find:e.find,handler:({state:t,range:n,match:r})=>{const o=pt(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),a=i.doc.resolve(n.from).blockRange(),l=a&&Ru(a,e.type,o);if(!l)return null;i.wrap(a,l);const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&Iu(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&i.join(n.from-1)}})}function Qo(e){return new wO({find:e.find,handler:({state:t,range:n,match:r})=>{const o=pt(e.getAttributes,void 0,r);if(o===!1||o===null)return;const{tr:i}=t,s=r[r.length-1],a=r[0];let l=n.to;if(s){const u=a.search(/\S/),c=n.from+a.indexOf(s),f=c+s.length;if(_m(n.from,n.to,t).filter(h=>h.mark.type.excluded.find(v=>v===e.type&&v!==h.mark.type)).filter(h=>h.to>c).length)return null;f<n.to&&i.delete(f,n.to),c>n.from&&i.delete(n.from+u,c),l=n.from+u+s.length,i.addMark(n.from+u,l,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function IO(e){return Tc(e)&&e instanceof ft}function Nm(e,t,n){const r=0,o=e.state.doc.content.size,i=eo(t,r,o),s=eo(n,r,o),a=e.coordsAtPos(i),l=e.coordsAtPos(s,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),p=Math.max(a.right,l.right),h=p-f,d=c-u,b={top:u,bottom:c,left:f,right:p,width:h,height:d,x:f,y:u};return Le(R({},b),{toJSON:()=>b})}var $e="top",cn="bottom",fn="right",We="left",Lc="auto",Gi=[$e,cn,fn,We],Zo="start",Yi="end",DO="clippingParents",Rm="viewport",Xi="popper",PO="reference",Im=Gi.reduce(function(e,t){return e.concat([t+"-"+Zo,t+"-"+Yi])},[]),Dm=[].concat(Gi,[Lc]).reduce(function(e,t){return e.concat([t,t+"-"+Zo,t+"-"+Yi])},[]),LO="beforeRead",BO="read",FO="afterRead",zO="beforeMain",HO="main",VO="afterMain",jO="beforeWrite",$O="write",WO="afterWrite",JO=[LO,BO,FO,zO,HO,VO,jO,$O,WO];function Pn(e){return e?(e.nodeName||"").toLowerCase():null}function Cn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ti(e){var t=Cn(e).Element;return e instanceof t||e instanceof Element}function pn(e){var t=Cn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Pm(e){if(typeof ShadowRoot=="undefined")return!1;var t=Cn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function qO(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!pn(i)||!Pn(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(s){var a=o[s];a===!1?i.removeAttribute(s):i.setAttribute(s,a===!0?"":a)}))})}function KO(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),a=s.reduce(function(l,u){return l[u]="",l},{});!pn(o)||!Pn(o)||(Object.assign(o.style,a),Object.keys(i).forEach(function(l){o.removeAttribute(l)}))})}}var Lm={name:"applyStyles",enabled:!0,phase:"write",fn:qO,effect:KO,requires:["computeStyles"]};function Ln(e){return e.split("-")[0]}var ro=Math.max,Aa=Math.min,ei=Math.round;function ni(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),r=1,o=1;if(pn(e)&&t){var i=e.offsetHeight,s=e.offsetWidth;s>0&&(r=ei(n.width)/s||1),i>0&&(o=ei(n.height)/i||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function Bc(e){var t=ni(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Bm(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Pm(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Bn(e){return Cn(e).getComputedStyle(e)}function UO(e){return["table","td","th"].indexOf(Pn(e))>=0}function wr(e){return((ti(e)?e.ownerDocument:e.document)||window.document).documentElement}function _a(e){return Pn(e)==="html"?e:e.assignedSlot||e.parentNode||(Pm(e)?e.host:null)||wr(e)}function Fm(e){return!pn(e)||Bn(e).position==="fixed"?null:e.offsetParent}function GO(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&pn(e)){var r=Bn(e);if(r.position==="fixed")return null}for(var o=_a(e);pn(o)&&["html","body"].indexOf(Pn(o))<0;){var i=Bn(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function Qi(e){for(var t=Cn(e),n=Fm(e);n&&UO(n)&&Bn(n).position==="static";)n=Fm(n);return n&&(Pn(n)==="html"||Pn(n)==="body"&&Bn(n).position==="static")?t:n||GO(e)||t}function Fc(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zi(e,t,n){return ro(e,Aa(t,n))}function YO(e,t,n){var r=Zi(e,t,n);return r>n?n:r}function zm(){return{top:0,right:0,bottom:0,left:0}}function Hm(e){return Object.assign({},zm(),e)}function Vm(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var XO=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Hm(typeof t!="number"?t:Vm(t,Gi))};function QO(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Ln(n.placement),l=Fc(a),u=[We,fn].indexOf(a)>=0,c=u?"height":"width";if(!(!i||!s)){var f=XO(o.padding,n),p=Bc(i),h=l==="y"?$e:We,d=l==="y"?cn:fn,v=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],b=Qi(i),y=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,C=v/2-m/2,g=f[h],O=y-p[c]-f[d],x=y/2-p[c]/2+C,E=Zi(g,x,O),H=l;n.modifiersData[r]=(t={},t[H]=E,t.centerOffset=E-x,t)}}function ZO(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!Bm(t.elements.popper,o)||(t.elements.arrow=o))}var tM={name:"arrow",enabled:!0,phase:"main",fn:QO,effect:ZO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ri(e){return e.split("-")[1]}var eM={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nM(e){var t=e.x,n=e.y,r=window,o=r.devicePixelRatio||1;return{x:ei(t*o)/o||0,y:ei(n*o)/o||0}}function jm(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,f=e.isFixed,p=c===!0?nM(s):typeof c=="function"?c(s):s,h=p.x,d=h===void 0?0:h,v=p.y,m=v===void 0?0:v,b=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),C=We,g=$e,O=window;if(u){var x=Qi(n),E="clientHeight",H="clientWidth";if(x===Cn(n)&&(x=wr(n),Bn(x).position!=="static"&&a==="absolute"&&(E="scrollHeight",H="scrollWidth")),x=x,o===$e||(o===We||o===fn)&&i===Yi){g=cn;var j=f&&O.visualViewport?O.visualViewport.height:x[E];m-=j-r.height,m*=l?1:-1}if(o===We||(o===$e||o===cn)&&i===Yi){C=fn;var q=f&&O.visualViewport?O.visualViewport.width:x[H];d-=q-r.width,d*=l?1:-1}}var et=Object.assign({position:a},u&&eM);if(l){var D;return Object.assign({},et,(D={},D[g]=y?"0":"",D[C]=b?"0":"",D.transform=(O.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",D))}return Object.assign({},et,(t={},t[g]=y?m+"px":"",t[C]=b?d+"px":"",t.transform="",t))}function rM(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,s=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Ln(t.placement),variation:ri(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,jm(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,jm(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var oM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rM,data:{}},Na={passive:!0};function iM(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,s=r.resize,a=s===void 0?!0:s,l=Cn(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(c){c.addEventListener("scroll",n.update,Na)}),a&&l.addEventListener("resize",n.update,Na),function(){i&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Na)}),a&&l.removeEventListener("resize",n.update,Na)}}var sM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:iM,data:{}},aM={left:"right",right:"left",bottom:"top",top:"bottom"};function Ra(e){return e.replace(/left|right|bottom|top/g,function(t){return aM[t]})}var lM={start:"end",end:"start"};function $m(e){return e.replace(/start|end/g,function(t){return lM[t]})}function zc(e){var t=Cn(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Hc(e){return ni(wr(e)).left+zc(e).scrollLeft}function uM(e){var t=Cn(e),n=wr(e),r=t.visualViewport,o=n.clientWidth,i=n.clientHeight,s=0,a=0;return r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:o,height:i,x:s+Hc(e),y:a}}function cM(e){var t,n=wr(e),r=zc(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=ro(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=ro(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-r.scrollLeft+Hc(e),l=-r.scrollTop;return Bn(o||n).direction==="rtl"&&(a+=ro(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:a,y:l}}function Vc(e){var t=Bn(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Wm(e){return["html","body","#document"].indexOf(Pn(e))>=0?e.ownerDocument.body:pn(e)&&Vc(e)?e:Wm(_a(e))}function ts(e,t){var n;t===void 0&&(t=[]);var r=Wm(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=Cn(r),s=o?[i].concat(i.visualViewport||[],Vc(r)?r:[]):r,a=t.concat(s);return o?a:a.concat(ts(_a(s)))}function jc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function fM(e){var t=ni(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Jm(e,t){return t===Rm?jc(uM(e)):ti(t)?fM(t):jc(cM(wr(e)))}function pM(e){var t=ts(_a(e)),n=["absolute","fixed"].indexOf(Bn(e).position)>=0,r=n&&pn(e)?Qi(e):e;return ti(r)?t.filter(function(o){return ti(o)&&Bm(o,r)&&Pn(o)!=="body"&&(n?Bn(o).position!=="static":!0)}):[]}function hM(e,t,n){var r=t==="clippingParents"?pM(e):[].concat(t),o=[].concat(r,[n]),i=o[0],s=o.reduce(function(a,l){var u=Jm(e,l);return a.top=ro(u.top,a.top),a.right=Aa(u.right,a.right),a.bottom=Aa(u.bottom,a.bottom),a.left=ro(u.left,a.left),a},Jm(e,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function qm(e){var t=e.reference,n=e.element,r=e.placement,o=r?Ln(r):null,i=r?ri(r):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case $e:l={x:s,y:t.y-n.height};break;case cn:l={x:s,y:t.y+t.height};break;case fn:l={x:t.x+t.width,y:a};break;case We:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=o?Fc(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(i){case Zo:l[u]=l[u]-(t[c]/2-n[c]/2);break;case Yi:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function es(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.boundary,s=i===void 0?DO:i,a=n.rootBoundary,l=a===void 0?Rm:a,u=n.elementContext,c=u===void 0?Xi:u,f=n.altBoundary,p=f===void 0?!1:f,h=n.padding,d=h===void 0?0:h,v=Hm(typeof d!="number"?d:Vm(d,Gi)),m=c===Xi?PO:Xi,b=e.rects.popper,y=e.elements[p?m:c],C=hM(ti(y)?y:y.contextElement||wr(e.elements.popper),s,l),g=ni(e.elements.reference),O=qm({reference:g,element:b,strategy:"absolute",placement:o}),x=jc(Object.assign({},b,O)),E=c===Xi?x:g,H={top:C.top-E.top+v.top,bottom:E.bottom-C.bottom+v.bottom,left:C.left-E.left+v.left,right:E.right-C.right+v.right},j=e.modifiersData.offset;if(c===Xi&&j){var q=j[o];Object.keys(H).forEach(function(et){var D=[fn,cn].indexOf(et)>=0?1:-1,at=[$e,cn].indexOf(et)>=0?"y":"x";H[et]+=q[at]*D})}return H}function dM(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Dm:l,c=ri(r),f=c?a?Im:Im.filter(function(d){return ri(d)===c}):Gi,p=f.filter(function(d){return u.indexOf(d)>=0});p.length===0&&(p=f);var h=p.reduce(function(d,v){return d[v]=es(e,{placement:v,boundary:o,rootBoundary:i,padding:s})[Ln(v)],d},{});return Object.keys(h).sort(function(d,v){return h[d]-h[v]})}function vM(e){if(Ln(e)===Lc)return[];var t=Ra(e);return[$m(e),t,$m(t)]}function mM(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,d=h===void 0?!0:h,v=n.allowedAutoPlacements,m=t.options.placement,b=Ln(m),y=b===m,C=l||(y||!d?[Ra(m)]:vM(m)),g=[m].concat(C).reduce(function(Je,A){return Je.concat(Ln(A)===Lc?dM(t,{placement:A,boundary:c,rootBoundary:f,padding:u,flipVariations:d,allowedAutoPlacements:v}):A)},[]),O=t.rects.reference,x=t.rects.popper,E=new Map,H=!0,j=g[0],q=0;q<g.length;q++){var et=g[q],D=Ln(et),at=ri(et)===Zo,Tt=[$e,cn].indexOf(D)>=0,gt=Tt?"width":"height",Z=es(t,{placement:et,boundary:c,rootBoundary:f,altBoundary:p,padding:u}),st=Tt?at?fn:We:at?cn:$e;O[gt]>x[gt]&&(st=Ra(st));var lt=Ra(st),Vt=[];if(i&&Vt.push(Z[D]<=0),a&&Vt.push(Z[st]<=0,Z[lt]<=0),Vt.every(function(Je){return Je})){j=et,H=!1;break}E.set(et,Vt)}if(H)for(var se=d?3:1,ae=function(A){var J=g.find(function(z){var U=E.get(z);if(U)return U.slice(0,A).every(function(Ct){return Ct})});if(J)return j=J,"break"},Jt=se;Jt>0;Jt--){var Gt=ae(Jt);if(Gt==="break")break}t.placement!==j&&(t.modifiersData[r]._skip=!0,t.placement=j,t.reset=!0)}}var gM={name:"flip",enabled:!0,phase:"main",fn:mM,requiresIfExists:["offset"],data:{_skip:!1}};function Km(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Um(e){return[$e,fn,cn,We].some(function(t){return e[t]>=0})}function yM(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=es(t,{elementContext:"reference"}),a=es(t,{altBoundary:!0}),l=Km(s,r),u=Km(a,o,i),c=Um(l),f=Um(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var bM={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:yM};function SM(e,t,n){var r=Ln(e),o=[We,$e].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=i[0],a=i[1];return s=s||0,a=(a||0)*o,[We,fn].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function wM(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,s=Dm.reduce(function(c,f){return c[f]=SM(f,t.rects,i),c},{}),a=s[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=s}var CM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:wM};function xM(e){var t=e.state,n=e.name;t.modifiersData[n]=qm({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var kM={name:"popperOffsets",enabled:!0,phase:"read",fn:xM,data:{}};function OM(e){return e==="x"?"y":"x"}function MM(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,p=n.tether,h=p===void 0?!0:p,d=n.tetherOffset,v=d===void 0?0:d,m=es(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),b=Ln(t.placement),y=ri(t.placement),C=!y,g=Fc(b),O=OM(g),x=t.modifiersData.popperOffsets,E=t.rects.reference,H=t.rects.popper,j=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,q=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),et=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(!!x){if(i){var at,Tt=g==="y"?$e:We,gt=g==="y"?cn:fn,Z=g==="y"?"height":"width",st=x[g],lt=st+m[Tt],Vt=st-m[gt],se=h?-H[Z]/2:0,ae=y===Zo?E[Z]:H[Z],Jt=y===Zo?-H[Z]:-E[Z],Gt=t.elements.arrow,Je=h&&Gt?Bc(Gt):{width:0,height:0},A=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:zm(),J=A[Tt],z=A[gt],U=Zi(0,E[Z],Je[Z]),Ct=C?E[Z]/2-se-U-J-q.mainAxis:ae-U-J-q.mainAxis,St=C?-E[Z]/2+se+U+z+q.mainAxis:Jt+U+z+q.mainAxis,ct=t.elements.arrow&&Qi(t.elements.arrow),ut=ct?g==="y"?ct.clientTop||0:ct.clientLeft||0:0,S=(at=et==null?void 0:et[g])!=null?at:0,w=st+Ct-S-ut,k=st+St-S,N=Zi(h?Aa(lt,w):lt,st,h?ro(Vt,k):Vt);x[g]=N,D[g]=N-st}if(a){var _,F=g==="x"?$e:We,W=g==="x"?cn:fn,P=x[O],B=O==="y"?"height":"width",I=P+m[F],X=P-m[W],K=[$e,We].indexOf(b)!==-1,tt=(_=et==null?void 0:et[O])!=null?_:0,ot=K?I:P-E[B]-H[B]-tt+q.altAxis,mt=K?P+E[B]+H[B]-tt-q.altAxis:X,At=h&&K?YO(ot,P,mt):Zi(h?ot:I,P,h?mt:X);x[O]=At,D[O]=At-P}t.modifiersData[r]=D}}var TM={name:"preventOverflow",enabled:!0,phase:"main",fn:MM,requiresIfExists:["offset"]};function EM(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function AM(e){return e===Cn(e)||!pn(e)?zc(e):EM(e)}function _M(e){var t=e.getBoundingClientRect(),n=ei(t.width)/e.offsetWidth||1,r=ei(t.height)/e.offsetHeight||1;return n!==1||r!==1}function NM(e,t,n){n===void 0&&(n=!1);var r=pn(t),o=pn(t)&&_M(t),i=wr(t),s=ni(e,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Pn(t)!=="body"||Vc(i))&&(a=AM(t)),pn(t)?(l=ni(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=Hc(i))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function RM(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function IM(e){var t=RM(e);return JO.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function DM(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function PM(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Gm={placement:"bottom",modifiers:[],strategy:"absolute"};function Ym(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function LM(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?Gm:o;return function(a,l,u){u===void 0&&(u=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Gm,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],p=!1,h={state:c,setOptions:function(b){var y=typeof b=="function"?b(c.options):b;v(),c.options=Object.assign({},i,c.options,y),c.scrollParents={reference:ti(a)?ts(a):a.contextElement?ts(a.contextElement):[],popper:ts(l)};var C=IM(PM([].concat(r,c.options.modifiers)));return c.orderedModifiers=C.filter(function(g){return g.enabled}),d(),h.update()},forceUpdate:function(){if(!p){var b=c.elements,y=b.reference,C=b.popper;if(!!Ym(y,C)){c.rects={reference:NM(y,Qi(C),c.options.strategy==="fixed"),popper:Bc(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(q){return c.modifiersData[q.name]=Object.assign({},q.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var O=c.orderedModifiers[g],x=O.fn,E=O.options,H=E===void 0?{}:E,j=O.name;typeof x=="function"&&(c=x({state:c,options:H,name:j,instance:h})||c)}}}},update:DM(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){v(),p=!0}};if(!Ym(a,l))return h;h.setOptions(u).then(function(m){!p&&u.onFirstUpdate&&u.onFirstUpdate(m)});function d(){c.orderedModifiers.forEach(function(m){var b=m.name,y=m.options,C=y===void 0?{}:y,g=m.effect;if(typeof g=="function"){var O=g({state:c,name:b,instance:h,options:C}),x=function(){};f.push(O||x)}})}function v(){f.forEach(function(m){return m()}),f=[]}return h}}var BM=[sM,kM,oM,Lm,CM,gM,TM,tM,bM],FM=LM({defaultModifiers:BM}),zM="tippy-box",Xm="tippy-content",HM="tippy-backdrop",Qm="tippy-arrow",Zm="tippy-svg-arrow",oo={passive:!0,capture:!0},tg=function(){return document.body};function $c(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function Wc(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function eg(e,t){return typeof e=="function"?e.apply(void 0,t):e}function ng(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function VM(e){return e.split(/\s+/).filter(Boolean)}function oi(e){return[].concat(e)}function rg(e,t){e.indexOf(t)===-1&&e.push(t)}function jM(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function $M(e){return e.split("-")[0]}function Ia(e){return[].slice.call(e)}function og(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function ns(){return document.createElement("div")}function Da(e){return["Element","Fragment"].some(function(t){return Wc(e,t)})}function WM(e){return Wc(e,"NodeList")}function JM(e){return Wc(e,"MouseEvent")}function qM(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function KM(e){return Da(e)?[e]:WM(e)?Ia(e):Array.isArray(e)?e:Ia(document.querySelectorAll(e))}function Jc(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function ig(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function UM(e){var t,n=oi(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function GM(e,t){var n=t.clientX,r=t.clientY;return e.every(function(o){var i=o.popperRect,s=o.popperState,a=o.props,l=a.interactiveBorder,u=$M(s.placement),c=s.modifiersData.offset;if(!c)return!0;var f=u==="bottom"?c.top.y:0,p=u==="top"?c.bottom.y:0,h=u==="right"?c.left.x:0,d=u==="left"?c.right.x:0,v=i.top-r+f>l,m=r-i.bottom-p>l,b=i.left-n+h>l,y=n-i.right-d>l;return v||m||b||y})}function qc(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[r](o,n)})}function sg(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Fn={isTouch:!1},ag=0;function YM(){Fn.isTouch||(Fn.isTouch=!0,window.performance&&document.addEventListener("mousemove",lg))}function lg(){var e=performance.now();e-ag<20&&(Fn.isTouch=!1,document.removeEventListener("mousemove",lg)),ag=e}function XM(){var e=document.activeElement;if(qM(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function QM(){document.addEventListener("touchstart",YM,oo),window.addEventListener("blur",XM)}var ZM=typeof window!="undefined"&&typeof document!="undefined",tT=ZM?!!window.msCrypto:!1,eT={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},nT={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},xn=Object.assign({appendTo:tg,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},eT,nT),rT=Object.keys(xn),oT=function(t){var n=Object.keys(t);n.forEach(function(r){xn[r]=t[r]})};function ug(e){var t=e.plugins||[],n=t.reduce(function(r,o){var i=o.name,s=o.defaultValue;if(i){var a;r[i]=e[i]!==void 0?e[i]:(a=xn[i])!=null?a:s}return r},{});return Object.assign({},e,n)}function iT(e,t){var n=t?Object.keys(ug(Object.assign({},xn,{plugins:t}))):rT,r=n.reduce(function(o,i){var s=(e.getAttribute("data-tippy-"+i)||"").trim();if(!s)return o;if(i==="content")o[i]=s;else try{o[i]=JSON.parse(s)}catch{o[i]=s}return o},{});return r}function cg(e,t){var n=Object.assign({},t,{content:eg(t.content,[e])},t.ignoreAttributes?{}:iT(e,t.plugins));return n.aria=Object.assign({},xn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var sT=function(){return"innerHTML"};function Kc(e,t){e[sT()]=t}function fg(e){var t=ns();return e===!0?t.className=Qm:(t.className=Zm,Da(e)?t.appendChild(e):Kc(t,e)),t}function pg(e,t){Da(t.content)?(Kc(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Kc(e,t.content):e.textContent=t.content)}function Uc(e){var t=e.firstElementChild,n=Ia(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(Xm)}),arrow:n.find(function(r){return r.classList.contains(Qm)||r.classList.contains(Zm)}),backdrop:n.find(function(r){return r.classList.contains(HM)})}}function hg(e){var t=ns(),n=ns();n.className=zM,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ns();r.className=Xm,r.setAttribute("data-state","hidden"),pg(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props);function o(i,s){var a=Uc(t),l=a.box,u=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(i.content!==s.content||i.allowHTML!==s.allowHTML)&&pg(u,e.props),s.arrow?c?i.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(fg(s.arrow))):l.appendChild(fg(s.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:o}}hg.$$tippy=!0;var aT=1,Pa=[],Gc=[];function lT(e,t){var n=cg(e,Object.assign({},xn,ug(og(t)))),r,o,i,s=!1,a=!1,l=!1,u=!1,c,f,p,h=[],d=ng(w,n.interactiveDebounce),v,m=aT++,b=null,y=jM(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},g={id:m,reference:e,popper:ns(),popperInstance:b,props:n,state:C,plugins:y,clearDelayTimeouts:ot,setProps:mt,setContent:At,show:_t,hide:Rt,hideWithInteractivity:qe,enable:K,disable:tt,unmount:tr,destroy:ms};if(!n.render)return g;var O=n.render(g),x=O.popper,E=O.onUpdate;x.setAttribute("data-tippy-root",""),x.id="tippy-"+g.id,g.popper=x,e._tippy=g,x._tippy=g;var H=y.map(function(M){return M.fn(g)}),j=e.hasAttribute("aria-expanded");return ct(),se(),st(),lt("onCreate",[g]),n.showOnCreate&&I(),x.addEventListener("mouseenter",function(){g.props.interactive&&g.state.isVisible&&g.clearDelayTimeouts()}),x.addEventListener("mouseleave",function(){g.props.interactive&&g.props.trigger.indexOf("mouseenter")>=0&&Tt().addEventListener("mousemove",d)}),g;function q(){var M=g.props.touch;return Array.isArray(M)?M:[M,0]}function et(){return q()[0]==="hold"}function D(){var M;return!!((M=g.props.render)!=null&&M.$$tippy)}function at(){return v||e}function Tt(){var M=at().parentNode;return M?UM(M):document}function gt(){return Uc(x)}function Z(M){return g.state.isMounted&&!g.state.isVisible||Fn.isTouch||c&&c.type==="focus"?0:$c(g.props.delay,M?0:1,xn.delay)}function st(M){M===void 0&&(M=!1),x.style.pointerEvents=g.props.interactive&&!M?"":"none",x.style.zIndex=""+g.props.zIndex}function lt(M,Y,Q){if(Q===void 0&&(Q=!0),H.forEach(function(yt){yt[M]&&yt[M].apply(yt,Y)}),Q){var ht;(ht=g.props)[M].apply(ht,Y)}}function Vt(){var M=g.props.aria;if(!!M.content){var Y="aria-"+M.content,Q=x.id,ht=oi(g.props.triggerTarget||e);ht.forEach(function(yt){var Oe=yt.getAttribute(Y);if(g.state.isVisible)yt.setAttribute(Y,Oe?Oe+" "+Q:Q);else{var nn=Oe&&Oe.replace(Q,"").trim();nn?yt.setAttribute(Y,nn):yt.removeAttribute(Y)}})}}function se(){if(!(j||!g.props.aria.expanded)){var M=oi(g.props.triggerTarget||e);M.forEach(function(Y){g.props.interactive?Y.setAttribute("aria-expanded",g.state.isVisible&&Y===at()?"true":"false"):Y.removeAttribute("aria-expanded")})}}function ae(){Tt().removeEventListener("mousemove",d),Pa=Pa.filter(function(M){return M!==d})}function Jt(M){if(!(Fn.isTouch&&(l||M.type==="mousedown"))){var Y=M.composedPath&&M.composedPath()[0]||M.target;if(!(g.props.interactive&&sg(x,Y))){if(oi(g.props.triggerTarget||e).some(function(Q){return sg(Q,Y)})){if(Fn.isTouch||g.state.isVisible&&g.props.trigger.indexOf("click")>=0)return}else lt("onClickOutside",[g,M]);g.props.hideOnClick===!0&&(g.clearDelayTimeouts(),g.hide(),a=!0,setTimeout(function(){a=!1}),g.state.isMounted||J())}}}function Gt(){l=!0}function Je(){l=!1}function A(){var M=Tt();M.addEventListener("mousedown",Jt,!0),M.addEventListener("touchend",Jt,oo),M.addEventListener("touchstart",Je,oo),M.addEventListener("touchmove",Gt,oo)}function J(){var M=Tt();M.removeEventListener("mousedown",Jt,!0),M.removeEventListener("touchend",Jt,oo),M.removeEventListener("touchstart",Je,oo),M.removeEventListener("touchmove",Gt,oo)}function z(M,Y){Ct(M,function(){!g.state.isVisible&&x.parentNode&&x.parentNode.contains(x)&&Y()})}function U(M,Y){Ct(M,Y)}function Ct(M,Y){var Q=gt().box;function ht(yt){yt.target===Q&&(qc(Q,"remove",ht),Y())}if(M===0)return Y();qc(Q,"remove",f),qc(Q,"add",ht),f=ht}function St(M,Y,Q){Q===void 0&&(Q=!1);var ht=oi(g.props.triggerTarget||e);ht.forEach(function(yt){yt.addEventListener(M,Y,Q),h.push({node:yt,eventType:M,handler:Y,options:Q})})}function ct(){et()&&(St("touchstart",S,{passive:!0}),St("touchend",k,{passive:!0})),VM(g.props.trigger).forEach(function(M){if(M!=="manual")switch(St(M,S),M){case"mouseenter":St("mouseleave",k);break;case"focus":St(tT?"focusout":"blur",N);break;case"focusin":St("focusout",N);break}})}function ut(){h.forEach(function(M){var Y=M.node,Q=M.eventType,ht=M.handler,yt=M.options;Y.removeEventListener(Q,ht,yt)}),h=[]}function S(M){var Y,Q=!1;if(!(!g.state.isEnabled||_(M)||a)){var ht=((Y=c)==null?void 0:Y.type)==="focus";c=M,v=M.currentTarget,se(),!g.state.isVisible&&JM(M)&&Pa.forEach(function(yt){return yt(M)}),M.type==="click"&&(g.props.trigger.indexOf("mouseenter")<0||s)&&g.props.hideOnClick!==!1&&g.state.isVisible?Q=!0:I(M),M.type==="click"&&(s=!Q),Q&&!ht&&X(M)}}function w(M){var Y=M.target,Q=at().contains(Y)||x.contains(Y);if(!(M.type==="mousemove"&&Q)){var ht=B().concat(x).map(function(yt){var Oe,nn=yt._tippy,co=(Oe=nn.popperInstance)==null?void 0:Oe.state;return co?{popperRect:yt.getBoundingClientRect(),popperState:co,props:n}:null}).filter(Boolean);GM(ht,M)&&(ae(),X(M))}}function k(M){var Y=_(M)||g.props.trigger.indexOf("click")>=0&&s;if(!Y){if(g.props.interactive){g.hideWithInteractivity(M);return}X(M)}}function N(M){g.props.trigger.indexOf("focusin")<0&&M.target!==at()||g.props.interactive&&M.relatedTarget&&x.contains(M.relatedTarget)||X(M)}function _(M){return Fn.isTouch?et()!==M.type.indexOf("touch")>=0:!1}function F(){W();var M=g.props,Y=M.popperOptions,Q=M.placement,ht=M.offset,yt=M.getReferenceClientRect,Oe=M.moveTransition,nn=D()?Uc(x).arrow:null,co=yt?{getBoundingClientRect:yt,contextElement:yt.contextElement||at()}:e,Mf={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(gs){var fo=gs.state;if(D()){var Oy=gt(),il=Oy.box;["placement","reference-hidden","escaped"].forEach(function(ys){ys==="placement"?il.setAttribute("data-placement",fo.placement):fo.attributes.popper["data-popper-"+ys]?il.setAttribute("data-"+ys,""):il.removeAttribute("data-"+ys)}),fo.attributes.popper={}}}},Tr=[{name:"offset",options:{offset:ht}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Oe}},Mf];D()&&nn&&Tr.push({name:"arrow",options:{element:nn,padding:3}}),Tr.push.apply(Tr,(Y==null?void 0:Y.modifiers)||[]),g.popperInstance=FM(co,x,Object.assign({},Y,{placement:Q,onFirstUpdate:p,modifiers:Tr}))}function W(){g.popperInstance&&(g.popperInstance.destroy(),g.popperInstance=null)}function P(){var M=g.props.appendTo,Y,Q=at();g.props.interactive&&M===tg||M==="parent"?Y=Q.parentNode:Y=eg(M,[Q]),Y.contains(x)||Y.appendChild(x),g.state.isMounted=!0,F()}function B(){return Ia(x.querySelectorAll("[data-tippy-root]"))}function I(M){g.clearDelayTimeouts(),M&&lt("onTrigger",[g,M]),A();var Y=Z(!0),Q=q(),ht=Q[0],yt=Q[1];Fn.isTouch&&ht==="hold"&&yt&&(Y=yt),Y?r=setTimeout(function(){g.show()},Y):g.show()}function X(M){if(g.clearDelayTimeouts(),lt("onUntrigger",[g,M]),!g.state.isVisible){J();return}if(!(g.props.trigger.indexOf("mouseenter")>=0&&g.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(M.type)>=0&&s)){var Y=Z(!1);Y?o=setTimeout(function(){g.state.isVisible&&g.hide()},Y):i=requestAnimationFrame(function(){g.hide()})}}function K(){g.state.isEnabled=!0}function tt(){g.hide(),g.state.isEnabled=!1}function ot(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(i)}function mt(M){if(!g.state.isDestroyed){lt("onBeforeUpdate",[g,M]),ut();var Y=g.props,Q=cg(e,Object.assign({},Y,og(M),{ignoreAttributes:!0}));g.props=Q,ct(),Y.interactiveDebounce!==Q.interactiveDebounce&&(ae(),d=ng(w,Q.interactiveDebounce)),Y.triggerTarget&&!Q.triggerTarget?oi(Y.triggerTarget).forEach(function(ht){ht.removeAttribute("aria-expanded")}):Q.triggerTarget&&e.removeAttribute("aria-expanded"),se(),st(),E&&E(Y,Q),g.popperInstance&&(F(),B().forEach(function(ht){requestAnimationFrame(ht._tippy.popperInstance.forceUpdate)})),lt("onAfterUpdate",[g,M])}}function At(M){g.setProps({content:M})}function _t(){var M=g.state.isVisible,Y=g.state.isDestroyed,Q=!g.state.isEnabled,ht=Fn.isTouch&&!g.props.touch,yt=$c(g.props.duration,0,xn.duration);if(!(M||Y||Q||ht)&&!at().hasAttribute("disabled")&&(lt("onShow",[g],!1),g.props.onShow(g)!==!1)){if(g.state.isVisible=!0,D()&&(x.style.visibility="visible"),st(),A(),g.state.isMounted||(x.style.transition="none"),D()){var Oe=gt(),nn=Oe.box,co=Oe.content;Jc([nn,co],0)}p=function(){var Tr;if(!(!g.state.isVisible||u)){if(u=!0,x.offsetHeight,x.style.transition=g.props.moveTransition,D()&&g.props.animation){var ol=gt(),gs=ol.box,fo=ol.content;Jc([gs,fo],yt),ig([gs,fo],"visible")}Vt(),se(),rg(Gc,g),(Tr=g.popperInstance)==null||Tr.forceUpdate(),lt("onMount",[g]),g.props.animation&&D()&&U(yt,function(){g.state.isShown=!0,lt("onShown",[g])})}},P()}}function Rt(){var M=!g.state.isVisible,Y=g.state.isDestroyed,Q=!g.state.isEnabled,ht=$c(g.props.duration,1,xn.duration);if(!(M||Y||Q)&&(lt("onHide",[g],!1),g.props.onHide(g)!==!1)){if(g.state.isVisible=!1,g.state.isShown=!1,u=!1,s=!1,D()&&(x.style.visibility="hidden"),ae(),J(),st(!0),D()){var yt=gt(),Oe=yt.box,nn=yt.content;g.props.animation&&(Jc([Oe,nn],ht),ig([Oe,nn],"hidden"))}Vt(),se(),g.props.animation?D()&&z(ht,g.unmount):g.unmount()}}function qe(M){Tt().addEventListener("mousemove",d),rg(Pa,d),d(M)}function tr(){g.state.isVisible&&g.hide(),!!g.state.isMounted&&(W(),B().forEach(function(M){M._tippy.unmount()}),x.parentNode&&x.parentNode.removeChild(x),Gc=Gc.filter(function(M){return M!==g}),g.state.isMounted=!1,lt("onHidden",[g]))}function ms(){g.state.isDestroyed||(g.clearDelayTimeouts(),g.unmount(),ut(),delete e._tippy,g.state.isDestroyed=!0,lt("onDestroy",[g]))}}function ii(e,t){t===void 0&&(t={});var n=xn.plugins.concat(t.plugins||[]);QM();var r=Object.assign({},t,{plugins:n}),o=KM(e),i=o.reduce(function(s,a){var l=a&&lT(a,r);return l&&s.push(l),s},[]);return Da(e)?i[0]:i}ii.defaultProps=xn;ii.setDefaultProps=oT;ii.currentInput=Fn;Object.assign({},Lm,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});ii.setDefaultProps({render:hg});class uT{constructor({editor:t,element:n,view:r,tippyOptions:o={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({state:s,from:a,to:l})=>{const{doc:u,selection:c}=s,{empty:f}=c,p=!u.textBetween(a,l).length&&ym(s.selection);return!(f||p)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}(s==null?void 0:s.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(s.relatedTarget))||this.hide()},this.editor=t,this.element=n,this.view=r,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=ii(t,R({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle"},this.tippyOptions)))}update(t,n){var r,o;const{state:i,composing:s}=t,{doc:a,selection:l}=i,u=n&&n.doc.eq(a)&&n.selection.eq(l);if(s||u)return;this.createTooltip();const{ranges:c}=l,f=Math.min(...c.map(d=>d.$from.pos)),p=Math.max(...c.map(d=>d.$to.pos));if(!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:t,state:i,oldState:n,from:f,to:p}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:()=>{if(IO(i.selection)){const d=t.nodeDOM(f);if(d)return d.getBoundingClientRect()}return Nm(t,f,p)}}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t;(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const dg=e=>new Ce({key:typeof e.pluginKey=="string"?new Ve(e.pluginKey):e.pluginKey,view:t=>new uT(R({view:t},e))});Ne.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[dg({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});class cT{constructor({editor:t,element:n,view:r,tippyOptions:o={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({state:s})=>{const{selection:a}=s,{$anchor:l,empty:u}=a,c=l.depth===1,f=l.parent.isTextblock&&!l.parent.type.spec.code&&!l.parent.textContent;return!(!u||!c||!f)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}(s==null?void 0:s.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(s.relatedTarget))||this.hide()},this.editor=t,this.element=n,this.view=r,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,n=!!t.parentElement;this.tippy||!n||(this.tippy=ii(t,R({duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle"},this.tippyOptions)))}update(t,n){var r,o;const{state:i}=t,{doc:s,selection:a}=i,{from:l,to:u}=a;if(n&&n.doc.eq(s)&&n.selection.eq(a))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:t,state:i,oldState:n}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:()=>Nm(t,l,u)}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t;(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const vg=e=>new Ce({key:typeof e.pluginKey=="string"?new Ve(e.pluginKey):e.pluginKey,view:t=>new cT(R({view:t},e))});Ne.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[vg({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});mn({name:"BubbleMenu",props:{pluginKey:{type:null,default:"bubbleMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=Fe(null);return Jn(()=>{const{pluginKey:r,editor:o,tippyOptions:i,shouldShow:s}=e;o.registerPlugin(dg({pluginKey:r,editor:o,element:n.value,tippyOptions:i,shouldShow:s}))}),Co(()=>{const{pluginKey:r,editor:o}=e;o.unregisterPlugin(r)}),()=>{var r;return gn("div",{ref:n},(r=t.default)===null||r===void 0?void 0:r.call(t))}}});function mg(e){return Sb((t,n)=>({get(){return t(),e},set(r){e=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class fT extends NO{constructor(t={}){super(t);return this.vueRenderers=Ir(new Map),this.contentComponent=null,this.reactiveState=mg(this.view.state),this.reactiveExtensionStorage=mg(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),Ml(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){super.registerPlugin(t,n),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const r_=mn({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=Fe(),n=Pp();return qs(()=>{const r=e.editor;r&&r.options.element&&t.value&&Nn(()=>{if(!t.value||!r.options.element.firstChild)return;const o=So(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:o}),r.createNodeViews()})}),Co(()=>{const r=e.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const o=document.createElement("div");o.append(...r.options.element.childNodes),r.setOptions({element:o})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const n=gn(s0,{to:t.teleportElement,key:t.id},gn(t.component,R({ref:t.id},t.props)));e.push(n)}),gn("div",{ref:t=>{this.rootEl=t}},...e)}});mn({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const n=Fe(null);return Jn(()=>{const{pluginKey:r,editor:o,tippyOptions:i,shouldShow:s}=e;o.registerPlugin(vg({pluginKey:r,editor:o,element:n.value,tippyOptions:i,shouldShow:s}))}),Co(()=>{const{pluginKey:r,editor:o}=e;o.unregisterPlugin(r)}),()=>{var r;return gn("div",{ref:n},(r=t.default)===null||r===void 0?void 0:r.call(t))}}});const o_=(e={})=>{const t=rp();return Jn(()=>{t.value=new fT(e)}),Co(()=>{var n;(n=t.value)===null||n===void 0||n.destroy()}),t};mn({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var e,t;return gn(this.as,{class:this.decorationClasses.value,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e))}});mn({props:{as:{type:String,default:"div"}},render(){return gn(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});const pT=/^\s*>\s$/,hT=oe.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn("blockquote"),toggleBlockquote:()=>({commands:e})=>e.toggleWrap("blockquote"),unsetBlockquote:()=>({commands:e})=>e.lift("blockquote")}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Pc({find:pT,type:this.type})]}}),dT=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,vT=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,mT=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,gT=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,yT=no.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark("bold"),toggleBold:()=>({commands:e})=>e.toggleMark("bold"),unsetBold:()=>({commands:e})=>e.unsetMark("bold")}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Xo({find:dT,type:this.type}),Xo({find:mT,type:this.type})]},addPasteRules(){return[Qo({find:vT,type:this.type}),Qo({find:gT,type:this.type})]}}),bT=/^\s*([-+*])\s$/,ST=oe.create({name:"bulletList",addOptions(){return{HTMLAttributes:{}}},group:"block list",content:"listItem+",parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",re(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList("bulletList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Pc({find:bT,type:this.type})]}}),wT=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,CT=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,xT=no.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark("code"),toggleCode:()=>({commands:e})=>e.toggleMark("code"),unsetCode:()=>({commands:e})=>e.unsetMark("code")}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Xo({find:wT,type:this.type})]},addPasteRules(){return[Qo({find:CT,type:this.type})]}}),kT=/^```(?<language>[a-z]*)?[\s\n]$/,OT=/^~~~(?<language>[a-z]*)?[\s\n]$/,MT=oe.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,i=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},renderHTML:e=>e.language?{class:this.options.languageClassPrefix+e.language}:null}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:e}){return["pre",this.options.HTMLAttributes,["code",e,0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode("codeBlock",e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode("codeBlock","paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1}}},addInputRules(){return[Dc({find:kT,type:this.type,getAttributes:({groups:e})=>e}),Dc({find:OT,type:this.type,getAttributes:({groups:e})=>e})]},addProseMirrorPlugins(){return[new Ce({key:new Ve("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:i})),s.setSelection(vt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),TT=oe.create({name:"doc",topNode:!0,content:"block+"});function ET(e){return e===void 0&&(e={}),new Ce({view:function(n){return new zn(n,e)}})}var zn=function(t,n){var r=this;this.editorView=t,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(o){var i=function(s){return r[o](s)};return t.dom.addEventListener(o,i),{name:o,handler:i}})};zn.prototype.destroy=function(){var t=this;this.handlers.forEach(function(n){var r=n.name,o=n.handler;return t.editorView.dom.removeEventListener(r,o)})};zn.prototype.update=function(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())};zn.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())};zn.prototype.updateOverlay=function(){var t=this.editorView.state.doc.resolve(this.cursorPos),n;if(!t.parent.inlineContent){var r=t.nodeBefore,o=t.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),s=r?i.bottom:i.top;r&&o&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:i.left,right:i.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!n){var a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{var f=l.getBoundingClientRect();u=f.left-l.scrollLeft,c=f.top-l.scrollTop}this.element.style.left=n.left-u+"px",this.element.style.top=n.top-c+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"};zn.prototype.scheduleRemoval=function(t){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.setCursor(null)},t)};zn.prototype.dragover=function(t){if(!!this.editorView.editable){var n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n):o;if(n&&!i){var s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&(s=Rd(this.editorView.state.doc,s,this.editorView.dragging.slice),s==null))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}};zn.prototype.dragend=function(){this.scheduleRemoval(20)};zn.prototype.drop=function(){this.scheduleRemoval(20)};zn.prototype.dragleave=function(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)};const AT=Ne.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:null}},addProseMirrorPlugins(){return[ET(this.options)]}});var kn=function(e){function t(n){e.call(this,n,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,o){var i=r.resolve(o.map(this.head));return t.valid(i)?new t(i):e.near(i)},t.prototype.content=function(){return $.empty},t.prototype.eq=function(r){return r instanceof t&&r.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(r,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(r.resolve(o.pos))},t.prototype.getBookmark=function(){return new La(this.anchor)},t.valid=function(r){var o=r.parent;if(o.isTextblock||!_T(r)||!NT(r))return!1;var i=o.type.spec.allowGapCursor;if(i!=null)return i;var s=o.contentMatchAt(r.index()).defaultType;return s&&s.isTextblock},t.findFrom=function(r,o,i){t:for(;;){if(!i&&t.valid(r))return r;for(var s=r.pos,a=null,l=r.depth;;l--){var u=r.node(l);if(o>0?r.indexAfter(l)<u.childCount:r.index(l)>0){a=u.child(o>0?r.indexAfter(l):r.index(l)-1);break}else if(l==0)return null;s+=o;var c=r.doc.resolve(s);if(t.valid(c))return c}for(;;){var f=o>0?a.firstChild:a.lastChild;if(!f){if(a.isAtom&&!a.isText&&!ft.isSelectable(a)){r=r.doc.resolve(s+a.nodeSize*o),i=!1;continue t}break}a=f,s+=o;var p=r.doc.resolve(s);if(t.valid(p))return p}return null}},t}(rt);kn.prototype.visible=!1;rt.jsonID("gapcursor",kn);var La=function(t){this.pos=t};La.prototype.map=function(t){return new La(t.map(this.pos))};La.prototype.resolve=function(t){var n=t.resolve(this.pos);return kn.valid(n)?new kn(n):rt.near(n)};function _T(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(n!=0)for(var r=e.node(t).child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function NT(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}var RT=function(){return new Ce({props:{decorations:PT,createSelectionBetween:function(t,n,r){if(n.pos==r.pos&&kn.valid(r))return new kn(r)},handleClick:DT,handleKeyDown:IT}})},IT=xc({ArrowLeft:Ba("horiz",-1),ArrowRight:Ba("horiz",1),ArrowUp:Ba("vert",-1),ArrowDown:Ba("vert",1)});function Ba(e,t){var n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,o,i){var s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof vt){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}var u=kn.findFrom(a,t,l);return u?(o&&o(r.tr.setSelection(new kn(u))),!0):!1}}function DT(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!kn.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}),i=o.inside;return i>-1&&ft.isSelectable(e.state.doc.nodeAt(i))?!1:(e.dispatch(e.state.tr.setSelection(new kn(r))),!0)}function PT(e){if(!(e.selection instanceof kn))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Et.create(e.doc,[Yt.widget(e.selection.head,t,{key:"gapcursor"})])}const LT=Ne.create({name:"gapCursor",addProseMirrorPlugins(){return[RT()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=pt(G(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),BT=oe.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",re(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const f=l.filter(p=>a.includes(p.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),FT=oe.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,re(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode("heading",e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode("heading","paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>Le(R({},e),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Dc({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var Fa=200,de=function(){};de.prototype.append=function(t){return t.length?(t=de.from(t),!this.length&&t||t.length<Fa&&this.leafAppend(t)||this.length<Fa&&t.leafPrepend(this)||this.appendInner(t)):this};de.prototype.prepend=function(t){return t.length?de.from(t).append(this):this};de.prototype.appendInner=function(t){return new zT(this,t)};de.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?de.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};de.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};de.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};de.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(t(i,s))},n,r),o};de.from=function(t){return t instanceof de?t:t&&t.length?new gg(t):de.empty};var gg=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new t(this.values.slice(o,i))},t.prototype.getInner=function(o){return this.values[o]},t.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(o){if(this.length+o.length<=Fa)return new t(this.values.concat(o.flatten()))},t.prototype.leafPrepend=function(o){if(this.length+o.length<=Fa)return new t(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(de);de.empty=new gg([]);var zT=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},t.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},t.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new t(this.left,o)},t.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new t(o,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(de),yg=de,HT=500,ve=function(t,n){this.items=t,this.eventCount=n};ve.prototype.popEvent=function(t,n){var r=this;if(this.eventCount==0)return null;for(var o=this.items.length;;o--){var i=this.items.get(o-1);if(i.selection){--o;break}}var s,a;n&&(s=this.remapping(o,this.items.length),a=s.maps.length);var l=t.tr,u,c,f=[],p=[];return this.items.forEach(function(h,d){if(!h.step){s||(s=r.remapping(o,d+1),a=s.maps.length),a--,p.push(h);return}if(s){p.push(new Hn(h.map));var v=h.step.map(s.slice(a)),m;v&&l.maybeStep(v).doc&&(m=l.mapping.maps[l.mapping.maps.length-1],f.push(new Hn(m,null,null,f.length+p.length))),a--,m&&s.appendMap(m,a)}else l.maybeStep(h.step);if(h.selection)return u=s?h.selection.map(s.slice(a)):h.selection,c=new ve(r.items.slice(0,o).append(p.reverse().concat(f)),r.eventCount-1),!1},this.items.length,0),{remaining:c,transform:l,selection:u}};ve.prototype.addTransform=function(t,n,r,o){for(var i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null,u=0;u<t.steps.length;u++){var c=t.steps[u].invert(t.docs[u]),f=new Hn(t.mapping.maps[u],c,n),p=void 0;(p=l&&l.merge(f))&&(f=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(s++,n=null),o||(l=f)}var h=s-r.depth;return h>jT&&(a=VT(a,h),s-=h),new ve(a.append(i),s)};ve.prototype.remapping=function(t,n){var r=new be;return this.items.forEach(function(o,i){var s=o.mirrorOffset!=null&&i-o.mirrorOffset>=t?r.maps.length-o.mirrorOffset:null;r.appendMap(o.map,s)},t,n),r};ve.prototype.addMaps=function(t){return this.eventCount==0?this:new ve(this.items.append(t.map(function(n){return new Hn(n)})),this.eventCount)};ve.prototype.rebased=function(t,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(function(h){h.selection&&a--},o);var l=n;this.items.forEach(function(h){var d=i.getMirror(--l);if(d!=null){s=Math.min(s,d);var v=i.maps[d];if(h.step){var m=t.steps[d].invert(t.docs[d]),b=h.selection&&h.selection.map(i.slice(l+1,d));b&&a++,r.push(new Hn(v,m,b))}else r.push(new Hn(v))}},o);for(var u=[],c=n;c<s;c++)u.push(new Hn(i.maps[c]));var f=this.items.slice(0,o).append(u).append(r),p=new ve(f,a);return p.emptyItemCount()>HT&&(p=p.compress(this.items.length-r.length)),p};ve.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t};ve.prototype.compress=function(t){t===void 0&&(t=this.items.length);var n=this.remapping(0,t),r=n.maps.length,o=[],i=0;return this.items.forEach(function(s,a){if(a>=t)o.push(s),s.selection&&i++;else if(s.step){var l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){var c=s.selection&&s.selection.map(n.slice(r));c&&i++;var f=new Hn(u.invert(),l,c),p,h=o.length-1;(p=o.length&&o[h].merge(f))?o[h]=p:o.push(f)}}else s.map&&r--},this.items.length,0),new ve(yg.from(o.reverse()),i)};ve.empty=new ve(yg.empty,0);function VT(e,t){var n;return e.forEach(function(r,o){if(r.selection&&t--==0)return n=o,!1}),e.slice(n)}var Hn=function(t,n,r,o){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=o};Hn.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new Hn(n.getMap().invert(),n,this.selection)}};var Cr=function(t,n,r,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=o},jT=20;function $T(e,t,n,r){var o=n.getMeta(xr),i;if(o)return o.historyState;n.getMeta(JT)&&(e=new Cr(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(xr))return s.getMeta(xr).redo?new Cr(e.done.addTransform(n,null,r,za(t)),e.undone,bg(n.mapping.maps[n.steps.length-1]),e.prevTime):new Cr(e.done,e.undone.addTransform(n,null,r,za(t)),null,e.prevTime);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){var a=e.prevTime==0||!s&&(e.prevTime<(n.time||0)-r.newGroupDelay||!WT(n,e.prevRanges)),l=s?Yc(e.prevRanges,n.mapping):bg(n.mapping.maps[n.steps.length-1]);return new Cr(e.done.addTransform(n,a?t.selection.getBookmark():null,r,za(t)),ve.empty,l,n.time)}else return(i=n.getMeta("rebased"))?new Cr(e.done.rebased(n,i),e.undone.rebased(n,i),Yc(e.prevRanges,n.mapping),e.prevTime):new Cr(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Yc(e.prevRanges,n.mapping),e.prevTime)}function WT(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,o){for(var i=0;i<t.length;i+=2)r<=t[i+1]&&o>=t[i]&&(n=!0)}),n}function bg(e){var t=[];return e.forEach(function(n,r,o,i){return t.push(o,i)}),t}function Yc(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function Sg(e,t,n,r){var o=za(t),i=xr.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!!s){var a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),u=new Cr(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(xr,{redo:r,historyState:u}).scrollIntoView())}}var Xc=!1,wg=null;function za(e){var t=e.plugins;if(wg!=t){Xc=!1,wg=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Xc=!0;break}}return Xc}var xr=new Ve("history"),JT=new Ve("closeHistory");function qT(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Ce({key:xr,state:{init:function(){return new Cr(ve.empty,ve.empty,null,0)},apply:function(n,r,o){return $T(r,o,n,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(n,r){var o=r.inputType=="historyUndo"?Cg(n.state,n.dispatch):r.inputType=="historyRedo"?xg(n.state,n.dispatch):!1;return o&&r.preventDefault(),o}}}})}function Cg(e,t){var n=xr.getState(e);return!n||n.done.eventCount==0?!1:(t&&Sg(n,e,t,!1),!0)}function xg(e,t){var n=xr.getState(e);return!n||n.undone.eventCount==0?!1:(t&&Sg(n,e,t,!0),!0)}const KT=Ne.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Cg(e,t),redo:()=>({state:e,dispatch:t})=>xg(e,t)}},addProseMirrorPlugins(){return[qT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),UT=oe.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",re(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:t,dispatch:n})=>{var r;if(n){const{parent:o,pos:i}=t.selection.$from,s=i+1;if(t.doc.nodeAt(s))t.setSelection(vt.create(t.doc,s));else{const l=(r=o.type.contentMatch.defaultType)===null||r===void 0?void 0:r.create();l&&(t.insert(s,l),t.setSelection(vt.create(t.doc,s)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[RO({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),GT=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,YT=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,XT=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,QT=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,ZT=no.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark("italic"),toggleItalic:()=>({commands:e})=>e.toggleMark("italic"),unsetItalic:()=>({commands:e})=>e.unsetMark("italic")}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Xo({find:GT,type:this.type}),Xo({find:XT,type:this.type})]},addPasteRules(){return[Qo({find:YT,type:this.type}),Qo({find:QT,type:this.type})]}}),tE=oe.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",re(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}}),eE=/^(\d+)\.\s$/,nE=oe.create({name:"orderedList",addOptions(){return{HTMLAttributes:{}}},group:"block list",content:"listItem+",addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const r=e,{start:t}=r,n=_f(r,["start"]);return t===1?["ol",re(this.options.HTMLAttributes,n),0]:["ol",re(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList("orderedList","listItem")}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Pc({find:eE,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),rE=oe.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode("paragraph")}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),oE=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,iE=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,sE=no.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",re(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark("strike"),toggleStrike:()=>({commands:e})=>e.toggleMark("strike"),unsetStrike:()=>({commands:e})=>e.unsetMark("strike")}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Xo({find:oE,type:this.type})]},addPasteRules(){return[Qo({find:iE,type:this.type})]}}),aE=oe.create({name:"text",group:"inline"}),i_=Ne.create({name:"starterKit",addExtensions(){var e,t,n,r,o,i,s,a,l,u,c,f,p,h,d,v,m,b;const y=[];return this.options.blockquote!==!1&&y.push(hT.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bold!==!1&&y.push(yT.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&y.push(ST.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&y.push(xT.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&y.push(MT.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&y.push(TT.configure((i=this.options)===null||i===void 0?void 0:i.document)),this.options.dropcursor!==!1&&y.push(AT.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&y.push(LT.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&y.push(BT.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&y.push(FT.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&y.push(KT.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&y.push(UT.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&y.push(ZT.configure((p=this.options)===null||p===void 0?void 0:p.italic)),this.options.listItem!==!1&&y.push(tE.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&y.push(nE.configure((d=this.options)===null||d===void 0?void 0:d.orderedList)),this.options.paragraph!==!1&&y.push(rE.configure((v=this.options)===null||v===void 0?void 0:v.paragraph)),this.options.strike!==!1&&y.push(sE.configure((m=this.options)===null||m===void 0?void 0:m.strike)),this.options.text!==!1&&y.push(aE.configure((b=this.options)===null||b===void 0?void 0:b.text)),y}});var Qc,Zc;if(typeof WeakMap!="undefined"){var kg=new WeakMap;Qc=function(e){return kg.get(e)},Zc=function(e,t){return kg.set(e,t),t}}else{var rs=[],lE=10,Ha=0;Qc=function(e){for(var t=0;t<rs.length;t+=2)if(rs[t]==e)return rs[t+1]},Zc=function(e,t){return Ha==lE&&(Ha=0),rs[Ha++]=e,rs[Ha++]=t}}var si=function(t,n,r,o){this.left=t,this.top=n,this.right=r,this.bottom=o},Nt=function(t,n,r,o){this.width=t,this.height=n,this.map=r,this.problems=o};Nt.prototype.findCell=function(t){for(var n=0;n<this.map.length;n++){var r=this.map[n];if(r==t){for(var o=n%this.width,i=n/this.width|0,s=o+1,a=i+1,l=1;s<this.width&&this.map[n+l]==r;l++)s++;for(var u=1;a<this.height&&this.map[n+this.width*u]==r;u++)a++;return new si(o,i,s,a)}}throw new RangeError("No cell with offset "+t+" found")};Nt.prototype.colCount=function(t){for(var n=0;n<this.map.length;n++)if(this.map[n]==t)return n%this.width;throw new RangeError("No cell with offset "+t+" found")};Nt.prototype.nextCell=function(t,n,r){var o=this.findCell(t),i=o.left,s=o.right,a=o.top,l=o.bottom;return n=="horiz"?(r<0?i==0:s==this.width)?null:this.map[a*this.width+(r<0?i-1:s)]:(r<0?a==0:l==this.height)?null:this.map[i+this.width*(r<0?a-1:l)]};Nt.prototype.rectBetween=function(t,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom,l=this.findCell(n),u=l.left,c=l.right,f=l.top,p=l.bottom;return new si(Math.min(o,u),Math.min(s,f),Math.max(i,c),Math.max(a,p))};Nt.prototype.cellsInRect=function(t){for(var n=[],r={},o=t.top;o<t.bottom;o++)for(var i=t.left;i<t.right;i++){var s=o*this.width+i,a=this.map[s];r[a]||(r[a]=!0,(i!=t.left||!i||this.map[s-1]!=a)&&(o!=t.top||!o||this.map[s-this.width]!=a)&&n.push(a))}return n};Nt.prototype.positionAt=function(t,n,r){for(var o=0,i=0;;o++){var s=i+r.child(o).nodeSize;if(o==t){for(var a=n+t*this.width,l=(t+1)*this.width;a<l&&this.map[a]<i;)a++;return a==l?s-1:this.map[a]}i=s}};Nt.get=function(t){return Qc(t)||Zc(t,uE(t))};function uE(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);for(var t=cE(e),n=e.childCount,r=[],o=0,i=null,s=[],a=0,l=t*n;a<l;a++)r[a]=0;for(var u=0,c=0;u<n;u++){var f=e.child(u);c++;for(var p=0;;p++){for(;o<r.length&&r[o]!=0;)o++;if(p==f.childCount)break;for(var h=f.child(p),d=h.attrs,v=d.colspan,m=d.rowspan,b=d.colwidth,y=0;y<m;y++){if(y+u>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:c,n:m-y});break}for(var C=o+y*t,g=0;g<v;g++){r[C+g]==0?r[C+g]=c:(i||(i=[])).push({type:"collision",row:u,pos:c,n:v-g});var O=b&&b[g];if(O){var x=(C+g)%t*2,E=s[x];E==null||E!=O&&s[x+1]==1?(s[x]=O,s[x+1]=1):E==O&&s[x+1]++}}}o+=v,c+=h.nodeSize}for(var H=(u+1)*t,j=0;o<H;)r[o++]==0&&j++;j&&(i||(i=[])).push({type:"missing",row:u,n:j}),c++}for(var q=new Nt(t,n,r,i),et=!1,D=0;!et&&D<s.length;D+=2)s[D]!=null&&s[D+1]<n&&(et=!0);return et&&fE(q,s,e),q}function cE(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=e.child(s),l=0;l<a.childCount;l++){var u=a.child(l);s+u.attrs.rowspan>r&&(i+=u.attrs.colspan)}for(var c=0;c<o.childCount;c++){var f=o.child(c);i+=f.attrs.colspan,f.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function fE(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,l=0;l<s.attrs.colspan;l++){var u=(r+l)%e.width,c=t[u*2];c!=null&&(!s.attrs.colwidth||s.attrs.colwidth[l]!=c)&&((a||(a=pE(s.attrs)))[l]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}function pE(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}function xe(e){var t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(var n in e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var kr=new Ve("selectingCells");function ai(e){for(var t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function hE(e){for(var t=e.depth;t>0;t--){var n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function On(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function Va(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&t.node.type.spec.tableRole=="cell"?t.$anchor:ai(t.$head)||dE(t.$head)}function dE(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if(s=="cell"||s=="header_cell")return e.doc.resolve(i-o.nodeSize)}}function tf(e){return e.parent.type.spec.tableRole=="row"&&e.nodeAfter}function vE(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function ef(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Og(e,t,n){var r=e.start(-1),o=Nt.get(e.node(-1)),i=o.nextCell(e.pos-r,t,n);return i==null?null:e.node(0).resolve(r+i)}function ie(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function io(e,t,n){n===void 0&&(n=1);var r=ie(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(o){return o>0})||(r.colwidth=null)),r}function Mg(e,t,n){n===void 0&&(n=1);var r=ie(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}function mE(e,t,n){for(var r=xe(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var Bt=function(e){function t(n,r){r===void 0&&(r=n);var o=n.node(-1),i=Nt.get(o),s=n.start(-1),a=i.rectBetween(n.pos-s,r.pos-s),l=n.node(0),u=i.cellsInRect(a).filter(function(f){return f!=r.pos-s});u.unshift(r.pos-s);var c=u.map(function(f){var p=o.nodeAt(f),h=f+s+1;return new Fd(l.resolve(h),l.resolve(h+p.content.size))});e.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=n,this.$headCell=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,o){var i=r.resolve(o.map(this.$anchorCell.pos)),s=r.resolve(o.map(this.$headCell.pos));if(tf(i)&&tf(s)&&ef(i,s)){var a=this.$anchorCell.node(-1)!=i.node(-1);return a&&this.isRowSelection()?t.rowSelection(i,s):a&&this.isColSelection()?t.colSelection(i,s):new t(i,s)}return vt.between(i,s)},t.prototype.content=function(){for(var r=this.$anchorCell.node(-1),o=Nt.get(r),i=this.$anchorCell.start(-1),s=o.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),a={},l=[],u=s.top;u<s.bottom;u++){for(var c=[],f=u*o.width+s.left,p=s.left;p<s.right;p++,f++){var h=o.map[f];if(!a[h]){a[h]=!0;var d=o.findCell(h),v=r.nodeAt(h),m=s.left-d.left,b=d.right-s.right;if(m>0||b>0){var y=v.attrs;m>0&&(y=io(y,0,m)),b>0&&(y=io(y,y.colspan-b,b)),d.left<s.left?v=v.type.createAndFill(y):v=v.type.create(y,v.content)}if(d.top<s.top||d.bottom>s.bottom){var C=ie(v.attrs,"rowspan",Math.min(d.bottom,s.bottom)-Math.max(d.top,s.top));d.top<s.top?v=v.type.createAndFill(C):v=v.type.create(C,v.content)}c.push(v)}}l.push(r.child(u).copy(T.from(c)))}var g=this.isColSelection()&&this.isRowSelection()?r:l;return new $(T.from(g),1,1)},t.prototype.replace=function(r,o){o===void 0&&(o=$.empty);for(var i=r.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],u=l.$from,c=l.$to,f=r.mapping.slice(i);r.replace(f.map(u.pos),f.map(c.pos),a?$.empty:o)}var p=e.findFrom(r.doc.resolve(r.mapping.slice(i).map(this.to)),-1);p&&r.setSelection(p)},t.prototype.replaceWith=function(r,o){this.replace(r,new $(T.from(o),0,0))},t.prototype.forEachCell=function(r){for(var o=this.$anchorCell.node(-1),i=Nt.get(o),s=this.$anchorCell.start(-1),a=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s)),l=0;l<a.length;l++)r(o.nodeAt(a[l]),s+a[l])},t.prototype.isColSelection=function(){var r=this.$anchorCell.index(-1),o=this.$headCell.index(-1);if(Math.min(r,o)>0)return!1;var i=r+this.$anchorCell.nodeAfter.attrs.rowspan,s=o+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,s)==this.$headCell.node(-1).childCount},t.colSelection=function(r,o){o===void 0&&(o=r);var i=Nt.get(r.node(-1)),s=r.start(-1),a=i.findCell(r.pos-s),l=i.findCell(o.pos-s),u=r.node(0);return a.top<=l.top?(a.top>0&&(r=u.resolve(s+i.map[a.left])),l.bottom<i.height&&(o=u.resolve(s+i.map[i.width*(i.height-1)+l.right-1]))):(l.top>0&&(o=u.resolve(s+i.map[l.left])),a.bottom<i.height&&(r=u.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))),new t(r,o)},t.prototype.isRowSelection=function(){var r=Nt.get(this.$anchorCell.node(-1)),o=this.$anchorCell.start(-1),i=r.colCount(this.$anchorCell.pos-o),s=r.colCount(this.$headCell.pos-o);if(Math.min(i,s)>0)return!1;var a=i+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,l)==r.width},t.prototype.eq=function(r){return r instanceof t&&r.$anchorCell.pos==this.$anchorCell.pos&&r.$headCell.pos==this.$headCell.pos},t.rowSelection=function(r,o){o===void 0&&(o=r);var i=Nt.get(r.node(-1)),s=r.start(-1),a=i.findCell(r.pos-s),l=i.findCell(o.pos-s),u=r.node(0);return a.left<=l.left?(a.left>0&&(r=u.resolve(s+i.map[a.top*i.width])),l.right<i.width&&(o=u.resolve(s+i.map[i.width*(l.top+1)-1]))):(l.left>0&&(o=u.resolve(s+i.map[l.top*i.width])),a.right<i.width&&(r=u.resolve(s+i.map[i.width*(a.top+1)-1]))),new t(r,o)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(r,o){return new t(r.resolve(o.anchor),r.resolve(o.head))},t.create=function(r,o,i){return i===void 0&&(i=o),new t(r.resolve(o),r.resolve(i))},t.prototype.getBookmark=function(){return new ja(this.$anchorCell.pos,this.$headCell.pos)},t}(rt);Bt.prototype.visible=!1;rt.jsonID("cell",Bt);var ja=function(t,n){this.anchor=t,this.head=n};ja.prototype.map=function(t){return new ja(t.map(this.anchor),t.map(this.head))};ja.prototype.resolve=function(t){var n=t.resolve(this.anchor),r=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&ef(n,r)?new Bt(n,r):rt.near(r,1)};function gE(e){if(!(e.selection instanceof Bt))return null;var t=[];return e.selection.forEachCell(function(n,r){t.push(Yt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Et.create(e.doc,t)}function yE(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}function bE(e){for(var t=e.$from,n=e.$to,r,o,i=t.depth;i>0;i--){var s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}for(var a=n.depth;a>0;a--){var l=n.node(a);if(l.type.spec.tableRole==="cell"||l.type.spec.tableRole==="header_cell"){o=l;break}}return r!==o&&n.parentOffset===0}function SE(e,t,n){var r=(t||e).selection,o=(t||e).doc,i,s;if(r instanceof ft&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=Bt.create(o,r.from);else if(s=="row"){var a=o.resolve(r.from+1);i=Bt.rowSelection(a,a)}else if(!n){var l=Nt.get(r.node),u=r.from+1,c=u+l.map[l.width*l.height-1];i=Bt.create(o,u+1,c)}}else r instanceof vt&&yE(r)?i=vt.create(o,r.from):r instanceof vt&&bE(r)&&(i=vt.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}function wE(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;t.childCount==1&&(n>0&&r>0||t.firstChild.type.spec.tableRole=="table");)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(var l=0;l<t.childCount;l++){var u=t.child(l).content,c=l?0:Math.max(0,n-1),f=l<t.childCount-1?0:Math.max(0,r-1);(c||f)&&(u=nf(xe(s).row,new $(u,c,f)).content),a.push(u)}else if(i=="cell"||i=="header_cell")a.push(n||r?nf(xe(s).row,new $(t,n,r)).content:t);else return null;return CE(s,a)}function CE(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,a=s.rowspan,l=s.colspan,u=r;u<r+a;u++)n[u]=(n[u]||0)+l;for(var c=0,f=0;f<n.length;f++)c=Math.max(c,n[f]);for(var p=0;p<n.length;p++)if(p>=t.length&&t.push(T.empty),n[p]<c){for(var h=xe(e).cell.createAndFill(),d=[],v=n[p];v<c;v++)d.push(h);t[p]=t[p].append(T.from(d))}return{height:t.length,width:c,rows:t}}function nf(e,t){var n=e.createAndFill(),r=new Wt(n).replace(0,n.content.size,t);return r.doc}function xE(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var s=[],a=[],l=0;l<i.length;l++){for(var u=i[l],c=[],f=s[l]||0,p=0;f<t;p++){var h=u.child(p%u.childCount);f+h.attrs.colspan>t&&(h=h.type.create(io(h.attrs,h.attrs.colspan,f+h.attrs.colspan-t),h.content)),c.push(h),f+=h.attrs.colspan;for(var d=1;d<h.attrs.rowspan;d++)s[l+d]=(s[l+d]||0)+h.attrs.colspan}a.push(T.from(c))}i=a,r=t}if(o!=n){for(var v=[],m=0,b=0;m<n;m++,b++){for(var y=[],C=i[b%o],g=0;g<C.childCount;g++){var O=C.child(g);m+O.attrs.rowspan>n&&(O=O.type.create(ie(O.attrs,"rowspan",Math.max(1,n-O.attrs.rowspan)),O.content)),y.push(O)}v.push(T.from(y))}i=v,o=n}return{width:r,height:o,rows:i}}function kE(e,t,n,r,o,i,s){var a=e.doc.type.schema,l=xe(a),u,c;if(o>t.width)for(var f=0,p=0;f<t.height;f++){var h=n.child(f);p+=h.nodeSize;var d=[],v=void 0;h.lastChild==null||h.lastChild.type==l.cell?v=u||(u=l.cell.createAndFill()):v=c||(c=l.header_cell.createAndFill());for(var m=t.width;m<o;m++)d.push(v);e.insert(e.mapping.slice(s).map(p-1+r),d)}if(i>t.height){for(var b=[],y=0,C=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var g=y>=t.width?!1:n.nodeAt(t.map[C+y]).type==l.header_cell;b.push(g?c||(c=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}for(var O=l.row.create(null,T.from(b)),x=[],E=t.height;E<i;E++)x.push(O);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),x)}return!!(u||c)}function Tg(e,t,n,r,o,i,s,a){if(s==0||s==t.height)return!1;for(var l=!1,u=o;u<i;u++){var c=s*t.width+u,f=t.map[c];if(t.map[c-t.width]==f){l=!0;var p=n.nodeAt(f),h=t.findCell(f),d=h.top,v=h.left;e.setNodeMarkup(e.mapping.slice(a).map(f+r),null,ie(p.attrs,"rowspan",s-d)),e.insert(e.mapping.slice(a).map(t.positionAt(s,v,n)),p.type.createAndFill(ie(p.attrs,"rowspan",d+p.attrs.rowspan-s))),u+=p.attrs.colspan-1}}return l}function Eg(e,t,n,r,o,i,s,a){if(s==0||s==t.width)return!1;for(var l=!1,u=o;u<i;u++){var c=u*t.width+s,f=t.map[c];if(t.map[c-1]==f){l=!0;var p=n.nodeAt(f),h=t.colCount(f),d=e.mapping.slice(a).map(f+r);e.setNodeMarkup(d,null,io(p.attrs,s-h,p.attrs.colspan-(s-h))),e.insert(d+p.nodeSize,p.type.createAndFill(io(p.attrs,0,s-h))),u+=p.attrs.rowspan-1}}return l}function Ag(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,s=Nt.get(i),a=r.top,l=r.left,u=l+o.width,c=a+o.height,f=e.tr,p=0;function h(){i=n?f.doc.nodeAt(n-1):f.doc,s=Nt.get(i),p=f.mapping.maps.length}kE(f,s,i,n,u,c,p)&&h(),Tg(f,s,i,n,l,u,a,p)&&h(),Tg(f,s,i,n,l,u,c,p)&&h(),Eg(f,s,i,n,a,c,l,p)&&h(),Eg(f,s,i,n,a,c,u,p)&&h();for(var d=a;d<c;d++){var v=s.positionAt(d,l,i),m=s.positionAt(d,u,i);f.replace(f.mapping.slice(p).map(v+n),f.mapping.slice(p).map(m+n),new $(o.rows[d-a],0,0))}h(),f.setSelection(new Bt(f.doc.resolve(n+s.positionAt(a,l,i)),f.doc.resolve(n+s.positionAt(c-1,u-1,i)))),t(f)}var OE=xc({ArrowLeft:Wa("horiz",-1),ArrowRight:Wa("horiz",1),ArrowUp:Wa("vert",-1),ArrowDown:Wa("vert",1),"Shift-ArrowLeft":Ja("horiz",-1),"Shift-ArrowRight":Ja("horiz",1),"Shift-ArrowUp":Ja("vert",-1),"Shift-ArrowDown":Ja("vert",1),Backspace:qa,"Mod-Backspace":qa,Delete:qa,"Mod-Delete":qa});function $a(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function Wa(e,t){return function(n,r,o){var i=n.selection;if(i instanceof Bt)return $a(n,r,rt.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;var s=_g(o,e,t);if(s==null)return!1;if(e=="horiz")return $a(n,r,rt.near(n.doc.resolve(i.head+t),t));var a=n.doc.resolve(s),l=Og(a,e,t),u;return l?u=rt.near(l,1):t<0?u=rt.near(n.doc.resolve(a.before(-1)),-1):u=rt.near(n.doc.resolve(a.after(-1)),1),$a(n,r,u)}}function Ja(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof Bt)){var s=_g(o,e,t);if(s==null)return!1;i=new Bt(n.doc.resolve(s))}var a=Og(i.$headCell,e,t);return a?$a(n,r,new Bt(i.$anchorCell,a)):!1}}function qa(e,t){var n=e.selection;if(!(n instanceof Bt))return!1;if(t){var r=e.tr,o=xe(e.schema).cell.createAndFill().content;n.forEachCell(function(i,s){i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new $(o,0,0))}),r.docChanged&&t(r)}return!0}function ME(e,t){var n=e.state.doc,r=ai(n.resolve(t));return r?(e.dispatch(e.state.tr.setSelection(new Bt(r))),!0):!1}function TE(e,t,n){if(!On(e.state))return!1;var r=wE(n),o=e.state.selection;if(o instanceof Bt){r||(r={width:1,height:1,rows:[T.from(nf(xe(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Nt.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=xE(r,a.right-a.left,a.bottom-a.top),Ag(e.state,e.dispatch,s,a,r),!0}else if(r){var l=Va(e.state),u=l.start(-1);return Ag(e.state,e.dispatch,u,Nt.get(l.node(-1)).findCell(l.pos-u),r),!0}else return!1}function EE(e,t){if(t.ctrlKey||t.metaKey)return;var n=Ng(e,t.target),r;if(t.shiftKey&&e.state.selection instanceof Bt)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&n&&(r=ai(e.state.selection.$anchor))!=null&&rf(e,t).pos!=r.pos)o(r,t),t.preventDefault();else if(!n)return;function o(a,l){var u=rf(e,l),c=kr.getState(e.state)==null;if(!u||!ef(a,u))if(c)u=a;else return;var f=new Bt(a,u);if(c||!e.state.selection.eq(f)){var p=e.state.tr.setSelection(f);c&&p.setMeta(kr,a.pos),e.dispatch(p)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),kr.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta(kr,-1))}function s(a){var l=kr.getState(e.state),u;if(l!=null)u=e.state.doc.resolve(l);else if(Ng(e,a.target)!=n&&(u=rf(e,t),!u))return i();u&&o(u,a)}e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function _g(e,t,n){if(!(e.state.selection instanceof vt))return null;for(var r=e.state.selection,o=r.$head,i=o.depth-1;i>=0;i--){var s=o.node(i),a=n<0?o.index(i):o.indexAfter(i);if(a!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){var l=o.before(i),u=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(u)?l:null}}return null}function Ng(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t}function rf(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?ai(e.state.doc.resolve(n.pos)):null}var AE=new Ve("fix-tables");function Rg(e,t,n,r){var o=e.childCount,i=t.childCount;t:for(var s=0,a=0;s<i;s++){for(var l=t.child(s),u=a,c=Math.min(o,s+3);u<c;u++)if(e.child(u)==l){a=u+1,n+=l.nodeSize;continue t}r(l,n),a<o&&e.child(a).sameMarkup(l)?Rg(e.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Ig(e,t){var n,r=function(o,i){o.type.spec.tableRole=="table"&&(n=_E(e,o,i,n))};return t?t.doc!=e.doc&&Rg(t.doc,e.doc,0,r):e.doc.descendants(r),n}function _E(e,t,n,r){var o=Nt.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i=[],s=0;s<o.height;s++)i.push(0);for(var a=0;a<o.problems.length;a++){var l=o.problems[a];if(l.type=="collision"){for(var u=t.nodeAt(l.pos),c=0;c<u.attrs.rowspan;c++)i[l.row+c]+=l.n;r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,io(u.attrs,u.attrs.colspan-l.n,l.n))}else if(l.type=="missing")i[l.row]+=l.n;else if(l.type=="overlong_rowspan"){var f=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,ie(f.attrs,"rowspan",f.attrs.rowspan-l.n))}else if(l.type=="colwidth mismatch"){var p=t.nodeAt(l.pos);r.setNodeMarkup(r.mapping.map(n+1+l.pos),null,ie(p.attrs,"colwidth",l.colwidth))}}for(var h,d,v=0;v<i.length;v++)i[v]&&(h==null&&(h=v),d=v);for(var m=0,b=n+1;m<o.height;m++){var y=t.child(m),C=b+y.nodeSize,g=i[m];if(g>0){var O="cell";y.firstChild&&(O=y.firstChild.type.spec.tableRole);for(var x=[],E=0;E<g;E++)x.push(xe(e.schema)[O].createAndFill());var H=(m==0||h==m-1)&&d==m?b+1:C-1;r.insert(r.mapping.map(H),x)}b=C}return r.setMeta(AE,{fixTables:!0})}function Vn(e){var t=e.selection,n=Va(e),r=n.node(-1),o=n.start(-1),i=Nt.get(r),s;return t instanceof Bt?s=i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):s=i.findCell(n.pos-o),s.tableStart=o,s.map=i,s.table=r,s}function Dg(e,t,n){var r=t.map,o=t.tableStart,i=t.table,s=n>0?-1:0;mE(r,i,n+s)&&(s=n==0||n==r.width?null:0);for(var a=0;a<r.height;a++){var l=a*r.width+n;if(n>0&&n<r.width&&r.map[l-1]==r.map[l]){var u=r.map[l],c=i.nodeAt(u);e.setNodeMarkup(e.mapping.map(o+u),null,Mg(c.attrs,n-r.colCount(u))),a+=c.attrs.rowspan-1}else{var f=s==null?xe(i.type.schema).cell:i.nodeAt(r.map[l+s]).type,p=r.positionAt(a,n,i);e.insert(e.mapping.map(o+p),f.createAndFill())}}return e}function NE(e,t){if(!On(e))return!1;if(t){var n=Vn(e);t(Dg(e.tr,n,n.left))}return!0}function RE(e,t){if(!On(e))return!1;if(t){var n=Vn(e);t(Dg(e.tr,n,n.right))}return!0}function IE(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=e.mapping.maps.length,a=0;a<r.height;){var l=a*r.width+n,u=r.map[l],c=o.nodeAt(u);if(n>0&&r.map[l-1]==u||n<r.width-1&&r.map[l+1]==u)e.setNodeMarkup(e.mapping.slice(s).map(i+u),null,io(c.attrs,n-r.colCount(u)));else{var f=e.mapping.slice(s).map(i+u);e.delete(f,f+c.nodeSize)}a+=c.attrs.rowspan}}function DE(e,t){if(!On(e))return!1;if(t){var n=Vn(e),r=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(var o=n.right-1;IE(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Nt.get(n.table);t(r)}return!0}function PE(e,t,n){for(var r=xe(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0}function Pg(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=[],u=n>0?-1:0;PE(r,i,n+u)&&(u=n==0||n==r.height?null:0);for(var c=0,f=r.width*n;c<r.width;c++,f++)if(n>0&&n<r.height&&r.map[f]==r.map[f-r.width]){var p=r.map[f],h=i.nodeAt(p).attrs;e.setNodeMarkup(o+p,null,ie(h,"rowspan",h.rowspan+1)),c+=h.colspan-1}else{var d=u==null?xe(i.type.schema).cell:i.nodeAt(r.map[f+u*r.width]).type;l.push(d.createAndFill())}return e.insert(s,xe(i.type.schema).row.create(null,l)),e}function LE(e,t){if(!On(e))return!1;if(t){var n=Vn(e);t(Pg(e.tr,n,n.top))}return!0}function BE(e,t){if(!On(e))return!1;if(t){var n=Vn(e);t(Pg(e.tr,n,n.bottom))}return!0}function FE(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var l=s+o.child(n).nodeSize,u=e.mapping.maps.length;e.delete(s+i,l+i);for(var c=0,f=n*r.width;c<r.width;c++,f++){var p=r.map[f];if(n>0&&p==r.map[f-r.width]){var h=o.nodeAt(p).attrs;e.setNodeMarkup(e.mapping.slice(u).map(p+i),null,ie(h,"rowspan",h.rowspan-1)),c+=h.colspan-1}else if(n<r.width&&p==r.map[f+r.width]){var d=o.nodeAt(p),v=d.type.create(ie(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),m=r.positionAt(n+1,c,o);e.insert(e.mapping.slice(u).map(i+m),v),c+=d.attrs.colspan-1}}}function zE(e,t){if(!On(e))return!1;if(t){var n=Vn(e),r=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;FE(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Nt.get(n.table);t(r)}return!0}function Lg(e){var t=e.content;return t.childCount==1&&t.firstChild.isTextblock&&t.firstChild.childCount==0}function HE(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,s=i,a=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),u=t.top;u<t.bottom;u++){if(t.left>0&&o[s]==o[s-1]||t.right<n&&o[l]==o[l+1])return!0;s+=n,l+=n}for(var c=t.left;c<t.right;c++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}function Bg(e,t){var n=e.selection;if(!(n instanceof Bt)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=Vn(e),o=r.map;if(HE(o,r))return!1;if(t){for(var i=e.tr,s={},a=T.empty,l,u,c=r.top;c<r.bottom;c++)for(var f=r.left;f<r.right;f++){var p=o.map[c*o.width+f],h=r.table.nodeAt(p);if(!s[p])if(s[p]=!0,l==null)l=p,u=h;else{Lg(h)||(a=a.append(h.content));var d=i.mapping.map(p+r.tableStart);i.delete(d,d+h.nodeSize)}}if(i.setNodeMarkup(l+r.tableStart,null,ie(Mg(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),"rowspan",r.bottom-r.top)),a.size){var v=l+1+u.content.size,m=Lg(u)?l+1:v;i.replaceWith(m+r.tableStart,v+r.tableStart,a)}i.setSelection(new Bt(i.doc.resolve(l+r.tableStart))),t(i)}return!0}function Fg(e,t){var n=xe(e.schema);return VE(function(r){var o=r.node;return n[o.type.spec.tableRole]})(e,t)}function VE(e){return function(t,n){var r=t.selection,o,i;if(r instanceof Bt){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(o=hE(r.$from),!o)return!1;i=ai(r.$from).pos}if(o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(n){var s=o.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=ie(s,"rowspan",1)),s.colspan>1&&(s=ie(s,"colspan",1));for(var u=Vn(t),c=t.tr,f=0;f<u.right-u.left;f++)a.push(l?ie(s,"colwidth",l&&l[f]?[l[f]]:null):s);for(var p,h=u.top;h<u.bottom;h++){var d=u.map.positionAt(h,u.left,u.table);h==u.top&&(d+=o.nodeSize);for(var v=u.left,m=0;v<u.right;v++,m++)v==u.left&&h==u.top||c.insert(p=c.mapping.map(d+u.tableStart,1),e({node:o,row:h,col:v}).createAndFill(a[m]))}c.setNodeMarkup(i,e({node:o,row:u.top,col:u.left}),a[0]),r instanceof Bt&&c.setSelection(new Bt(c.doc.resolve(r.$anchorCell.pos),p&&c.doc.resolve(p))),n(c)}return!0}}function jE(e,t){return function(n,r){if(!On(n))return!1;var o=Va(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof Bt?n.selection.forEachCell(function(s,a){s.attrs[e]!==t&&i.setNodeMarkup(a,null,ie(s.attrs,e,t))}):i.setNodeMarkup(o.pos,null,ie(o.nodeAfter.attrs,e,t)),r(i)}return!0}}function $E(e){return function(t,n){if(!On(t))return!1;if(n){for(var r=xe(t.schema),o=Vn(t),i=t.tr,s=o.map.cellsInRect(e=="column"?new si(o.left,0,o.right,o.map.height):e=="row"?new si(0,o.top,o.map.width,o.bottom):o),a=s.map(function(c){return o.table.nodeAt(c)}),l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(var u=0;u<s.length;u++)i.setNodeMarkup(o.tableStart+s[u],r.header_cell,a[u].attrs);n(i)}return!0}}function zg(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function of(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?$E(e):function(n,r){if(!On(n))return!1;if(r){var o=xe(n.schema),i=Vn(n),s=n.tr,a=zg("row",i,o),l=zg("column",i,o),u=e==="column"?a:e==="row"?l:!1,c=u?1:0,f=e=="column"?new si(0,c,1,i.map.height):e=="row"?new si(c,0,i.map.width,1):i,p=e=="column"?l?o.cell:o.header_cell:e=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(f).forEach(function(h){var d=h+i.tableStart,v=s.doc.nodeAt(d);v&&s.setNodeMarkup(d,p,v.attrs)}),r(s)}return!0}}var WE=of("row",{useDeprecatedLogic:!0}),JE=of("column",{useDeprecatedLogic:!0}),qE=of("cell",{useDeprecatedLogic:!0});function KE(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),l=e.after();a<s.childCount;a++){var u=s.child(a);if(u.childCount)return l+1;l+=u.nodeSize}}}function Hg(e){return function(t,n){if(!On(t))return!1;var r=KE(Va(t),e);if(r!=null){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(vt.between(o,vE(o))).scrollIntoView())}return!0}}}function UE(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){var o=n.node(r);if(o.type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var sf=function(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),af(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};sf.prototype.update=function(t){return t.type!=this.node.type?!1:(this.node=t,af(t,this.colgroup,this.table,this.cellMinWidth),!0)};sf.prototype.ignoreMutation=function(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))};function af(e,t,n,r,o,i){for(var s=0,a=!0,l=t.firstChild,u=e.firstChild,c=0,f=0;c<u.childCount;c++)for(var p=u.child(c).attrs,h=p.colspan,d=p.colwidth,v=0;v<h;v++,f++){var m=o==f?i:d&&d[v],b=m?m+"px":"";s+=m||r,m||(a=!1),l?(l.style.width!=b&&(l.style.width=b),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=b}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}var hn=new Ve("tableColumnResizing");function GE(e){e===void 0&&(e={});var t=e.handleWidth;t===void 0&&(t=5);var n=e.cellMinWidth;n===void 0&&(n=25);var r=e.View;r===void 0&&(r=sf);var o=e.lastColumnResizable;o===void 0&&(o=!0);var i=new Ce({key:hn,state:{init:function(a,l){return this.spec.props.nodeViews[xe(l.schema).table.name]=function(u,c){return new r(u,n,c)},new is(-1,!1)},apply:function(a,l){return l.apply(a)}},props:{attributes:function(a){var l=hn.getState(a);return l.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(a,l){YE(a,l,t,n,o)},mouseleave:function(a){XE(a)},mousedown:function(a,l){QE(a,l,n)}},decorations:function(a){var l=hn.getState(a);if(l.activeHandle>-1)return oA(a,l.activeHandle)},nodeViews:{}}});return i}var is=function(t,n){this.activeHandle=t,this.dragging=n};is.prototype.apply=function(t){var n=this,r=t.getMeta(hn);if(r&&r.setHandle!=null)return new is(r.setHandle,null);if(r&&r.setDragging!==void 0)return new is(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&t.docChanged){var o=t.mapping.map(n.activeHandle,-1);tf(t.doc.resolve(o))||(o=null),n=new is(o,n.dragging)}return n};function YE(e,t,n,r,o){var i=hn.getState(e.state);if(!i.dragging){var s=tA(t.target),a=-1;if(s){var l=s.getBoundingClientRect(),u=l.left,c=l.right;t.clientX-u<=n?a=Vg(e,t,"left"):c-t.clientX<=n&&(a=Vg(e,t,"right"))}if(a!=i.activeHandle){if(!o&&a!==-1){var f=e.state.doc.resolve(a),p=f.node(-1),h=Nt.get(p),d=f.start(-1),v=h.colCount(f.pos-d)+f.nodeAfter.attrs.colspan-1;if(v==h.width-1)return}$g(e,a)}}}function XE(e){var t=hn.getState(e.state);t.activeHandle>-1&&!t.dragging&&$g(e,-1)}function QE(e,t,n){var r=hn.getState(e.state);if(r.activeHandle==-1||r.dragging)return!1;var o=e.state.doc.nodeAt(r.activeHandle),i=ZE(e,r.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(hn,{setDragging:{startX:t.clientX,startWidth:i}}));function s(l){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var u=hn.getState(e.state);u.dragging&&(eA(e,u.activeHandle,jg(u.dragging,l,n)),e.dispatch(e.state.tr.setMeta(hn,{setDragging:null})))}function a(l){if(!l.which)return s(l);var u=hn.getState(e.state),c=jg(u.dragging,l,n);nA(e,u.activeHandle,c,n)}return window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function ZE(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=e.domAtPos(t),a=s.node.childNodes[s.offset],l=a.offsetWidth,u=r;if(o)for(var c=0;c<r;c++)o[c]&&(l-=o[c],u--);return l/u}function tA(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Vg(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return-1;var o=r.pos,i=ai(e.state.doc.resolve(o));if(!i)return-1;if(n=="right")return i.pos;var s=Nt.get(i.node(-1)),a=i.start(-1),l=s.map.indexOf(i.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function jg(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function $g(e,t){e.dispatch(e.state.tr.setMeta(hn,{setHandle:t}))}function eA(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=Nt.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr,u=0;u<i.height;u++){var c=u*i.width+a;if(!(u&&i.map[c]==i.map[c-i.width])){var f=i.map[c],p=o.nodeAt(f),h=p.attrs,d=h.colspan==1?0:a-i.colCount(f);if(!(h.colwidth&&h.colwidth[d]==n)){var v=h.colwidth?h.colwidth.slice():rA(h.colspan);v[d]=n,l.setNodeMarkup(s+f,null,ie(h,"colwidth",v))}}}l.docChanged&&e.dispatch(l)}function nA(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=Nt.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=e.domAtPos(o.start(-1)).node;l.nodeName!="TABLE";)l=l.parentNode;af(i,l.firstChild,l,r,a,n)}function rA(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function oA(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=Nt.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=a+l*i.width-1;if((a==i.width||i.map[u]!=i.map[u+1])&&(l==0||i.map[u-1]!=i.map[u-1-i.width])){var c=i.map[u],f=s+c+o.nodeAt(c).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(Yt.widget(f,p))}}return Et.create(e.doc,n)}function iA(e){e===void 0&&(e={});var t=e.allowTableNodeSelection;return t===void 0&&(t=!1),new Ce({key:kr,state:{init:function(){return null},apply:function(r,o){var i=r.getMeta(kr);if(i!=null)return i==-1?null:i;if(o==null||!r.docChanged)return o;var s=r.mapping.mapResult(o),a=s.deleted,l=s.pos;return a?null:l}},props:{decorations:gE,handleDOMEvents:{mousedown:EE},createSelectionBetween:function(r){if(kr.getState(r.state)!=null)return r.state.selection},handleTripleClick:ME,handleKeyDown:OE,handlePaste:TE},appendTransaction:function(r,o,i){return SE(i,Ig(i,o),t)}})}function Wg(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=Wg(o.content,i.content,n+1);if(a!=null)return a}n+=o.nodeSize}}function Jg(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};var s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var u=0,c=Math.min(s.text.length,a.text.length);u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var f=Jg(s.content,a.content,n-1,r-1);if(f)return f}n-=l,r-=l}}var V=function(t,n){if(this.content=t,this.size=n||0,n==null)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize},Ka={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};V.prototype.nodesBetween=function(t,n,r,o,i){o===void 0&&(o=0);for(var s=0,a=0;a<n;s++){var l=this.content[s],u=a+l.nodeSize;if(u>t&&r(l,o+a,i,s)!==!1&&l.content.size){var c=a+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,o+c)}a=u}};V.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)};V.prototype.textBetween=function(t,n,r,o){var i="",s=!0;return this.nodesBetween(t,n,function(a,l){a.isText?(i+=a.text.slice(Math.max(t,l)-l,n-l),s=!r):a.isLeaf&&o?(i+=typeof o=="function"?o(a):o,s=!r):!s&&a.isBlock&&(i+=r,s=!0)},0),i};V.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new V(o,this.size+t.size)};V.prototype.cut=function(t,n){if(n==null&&(n=this.size),t==0&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,s=0;s<n;i++){var a=this.content[i],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new V(r,o)};V.prototype.cutByIndex=function(t,n){return t==n?V.empty:t==0&&n==this.content.length?this:new V(this.content.slice(t,n))};V.prototype.replaceChild=function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new V(o,i)};V.prototype.addToStart=function(t){return new V([t].concat(this.content),this.size+t.nodeSize)};V.prototype.addToEnd=function(t){return new V(this.content.concat(t),this.size+t.nodeSize)};V.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0};Ka.firstChild.get=function(){return this.content.length?this.content[0]:null};Ka.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};Ka.childCount.get=function(){return this.content.length};V.prototype.child=function(t){var n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n};V.prototype.maybeChild=function(t){return this.content[t]};V.prototype.forEach=function(t){for(var n=0,r=0;n<this.content.length;n++){var o=this.content[n];t(o,r,n),r+=o.nodeSize}};V.prototype.findDiffStart=function(t,n){return n===void 0&&(n=0),Wg(this,t,n)};V.prototype.findDiffEnd=function(t,n,r){return n===void 0&&(n=this.size),r===void 0&&(r=t.size),Jg(this,t,n,r)};V.prototype.findIndex=function(t,n){if(n===void 0&&(n=-1),t==0)return Ua(0,t);if(t==this.size)return Ua(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var r=0,o=0;;r++){var i=this.child(r),s=o+i.nodeSize;if(s>=t)return s==t||n>0?Ua(r+1,s):Ua(r,o);o=s}};V.prototype.toString=function(){return"<"+this.toStringInner()+">"};V.prototype.toStringInner=function(){return this.content.join(", ")};V.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null};V.fromJSON=function(t,n){if(!n)return V.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new V(n.map(t.nodeFromJSON))};V.fromArray=function(t){if(!t.length)return V.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new V(n||t,r)};V.from=function(t){if(!t)return V.empty;if(t instanceof V)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new V([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))};Object.defineProperties(V.prototype,Ka);var lf={index:0,offset:0};function Ua(e,t){return lf.index=e,lf.offset=t,lf}V.empty=new V([],0);function Ga(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!Ga(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!Ga(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var kt=function(t,n){this.type=t,this.attrs=n};kt.prototype.addToSet=function(t){for(var n,r=!1,o=0;o<t.length;o++){var i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n};kt.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t};kt.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1};kt.prototype.eq=function(t){return this==t||this.type==t.type&&Ga(this.attrs,t.attrs)};kt.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return t};kt.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var r=t.marks[n.type];if(!r)throw new RangeError("There is no mark type "+n.type+" in this schema");return r.create(n.attrs)};kt.sameSet=function(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0};kt.setFrom=function(t){if(!t||t.length==0)return kt.none;if(t instanceof kt)return[t];var n=t.slice();return n.sort(function(r,o){return r.type.rank-o.type.rank}),n};kt.none=[];function jn(e){var t=Error.call(this,e);return t.__proto__=jn.prototype,t}jn.prototype=Object.create(Error.prototype);jn.prototype.constructor=jn;jn.prototype.name="ReplaceError";var nt=function(t,n,r){this.content=t,this.openStart=n,this.openEnd=r},qg={size:{configurable:!0}};qg.size.get=function(){return this.content.size-this.openStart-this.openEnd};nt.prototype.insertAt=function(t,n){var r=Ug(this.content,t+this.openStart,n,null);return r&&new nt(r,this.openStart,this.openEnd)};nt.prototype.removeBetween=function(t,n){return new nt(Kg(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)};nt.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd};nt.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"};nt.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t};nt.fromJSON=function(t,n){if(!n)return nt.empty;var r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new nt(V.fromJSON(t,n.content),r,o)};nt.maxOpen=function(t,n){n===void 0&&(n=!0);for(var r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new nt(t,r,o)};Object.defineProperties(nt.prototype,qg);function Kg(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,s=e.maybeChild(o),a=e.findIndex(n),l=a.index,u=a.offset;if(i==t||s.isText){if(u!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy(Kg(s.content,t-i-1,n-i-1)))}function Ug(e,t,n,r){var o=e.findIndex(t),i=o.index,s=o.offset,a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=Ug(a.content,t-s-1,n);return l&&e.replaceChild(i,a.copy(l))}nt.empty=new nt(V.empty,0,0);function sA(e,t,n){if(n.openStart>e.depth)throw new jn("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new jn("Inconsistent open depths");return Gg(e,t,n,0)}function Gg(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var s=Gg(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){var a=e.parent,l=a.content;return ao(a,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{var u=aA(n,e),c=u.start,f=u.end;return ao(i,Xg(e,c,f,t,r))}else return ao(i,Ya(e,t,r))}function Yg(e,t){if(!t.type.compatibleContent(e.type))throw new jn("Cannot join "+t.type.name+" onto "+e.type.name)}function uf(e,t,n){var r=e.node(n);return Yg(r,t.node(n)),r}function so(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function ss(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(so(e.nodeAfter,r),i++));for(var a=i;a<s;a++)so(o.child(a),r);t&&t.depth==n&&t.textOffset&&so(t.nodeBefore,r)}function ao(e,t){if(!e.type.validContent(t))throw new jn("Invalid content for node "+e.type.name);return e.copy(t)}function Xg(e,t,n,r,o){var i=e.depth>o&&uf(e,t,o+1),s=r.depth>o&&uf(n,r,o+1),a=[];return ss(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(Yg(i,s),so(ao(i,Xg(e,t,n,r,o+1)),a)):(i&&so(ao(i,Ya(e,t,o+1)),a),ss(t,n,o,a),s&&so(ao(s,Ya(n,r,o+1)),a)),ss(r,null,o,a),new V(a)}function Ya(e,t,n){var r=[];if(ss(null,e,n,r),e.depth>n){var o=uf(e,t,n+1);so(ao(o,Ya(e,t,n+1)),r)}return ss(t,null,n,r),new V(r)}function aA(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(V.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}var zt=function(t,n,r){this.pos=t,this.path=n,this.depth=n.length/3-1,this.parentOffset=r},li={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};zt.prototype.resolveDepth=function(t){return t==null?this.depth:t<0?this.depth+t:t};li.parent.get=function(){return this.node(this.depth)};li.doc.get=function(){return this.node(0)};zt.prototype.node=function(t){return this.path[this.resolveDepth(t)*3]};zt.prototype.index=function(t){return this.path[this.resolveDepth(t)*3+1]};zt.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)};zt.prototype.start=function(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1};zt.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size};zt.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]};zt.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize};li.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};li.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r};li.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)};zt.prototype.posAtIndex=function(t,n){n=this.resolveDepth(n);for(var r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1,i=0;i<t;i++)o+=r.child(i).nodeSize;return o};zt.prototype.marks=function(){var t=this.parent,n=this.index();if(t.content.size==0)return kt.none;if(this.textOffset)return t.child(n).marks;var r=t.maybeChild(n-1),o=t.maybeChild(n);if(!r){var i=r;r=o,o=i}for(var s=r.marks,a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s};zt.prototype.marksAcross=function(t){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var r=n.marks,o=t.parent.maybeChild(t.index()),i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r};zt.prototype.sharedDepth=function(t){for(var n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0};zt.prototype.blockRange=function(t,n){if(t===void 0&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Qg(this,t,r)};zt.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset};zt.prototype.max=function(t){return t.pos>this.pos?t:this};zt.prototype.min=function(t){return t.pos<this.pos?t:this};zt.prototype.toString=function(){for(var t="",n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset};zt.resolve=function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=t;;){var a=s.content.findIndex(i),l=a.index,u=a.offset,c=i-u;if(r.push(s,l,o+u),!c||(s=s.child(l),s.isText))break;i=c-1,o+=u+1}return new zt(n,r,i)};zt.resolveCached=function(t,n){for(var r=0;r<cf.length;r++){var o=cf[r];if(o.pos==n&&o.doc==t)return o}var i=cf[ff]=zt.resolve(t,n);return ff=(ff+1)%lA,i};Object.defineProperties(zt.prototype,li);var cf=[],ff=0,lA=12,Qg=function(t,n,r){this.$from=t,this.$to=n,this.depth=r},ui={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};ui.start.get=function(){return this.$from.before(this.depth+1)};ui.end.get=function(){return this.$to.after(this.depth+1)};ui.parent.get=function(){return this.$from.node(this.depth)};ui.startIndex.get=function(){return this.$from.index(this.depth)};ui.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(Qg.prototype,ui);var uA=Object.create(null),Ot=function(t,n,r,o){this.type=t,this.attrs=n,this.content=r||V.empty,this.marks=o||kt.none},tn={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};tn.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};tn.childCount.get=function(){return this.content.childCount};Ot.prototype.child=function(t){return this.content.child(t)};Ot.prototype.maybeChild=function(t){return this.content.maybeChild(t)};Ot.prototype.forEach=function(t){this.content.forEach(t)};Ot.prototype.nodesBetween=function(t,n,r,o){o===void 0&&(o=0),this.content.nodesBetween(t,n,r,o,this)};Ot.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)};tn.textContent.get=function(){return this.textBetween(0,this.content.size,"")};Ot.prototype.textBetween=function(t,n,r,o){return this.content.textBetween(t,n,r,o)};tn.firstChild.get=function(){return this.content.firstChild};tn.lastChild.get=function(){return this.content.lastChild};Ot.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)};Ot.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)};Ot.prototype.hasMarkup=function(t,n,r){return this.type==t&&Ga(this.attrs,n||t.defaultAttrs||uA)&&kt.sameSet(this.marks,r||kt.none)};Ot.prototype.copy=function(t){return t===void 0&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)};Ot.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)};Ot.prototype.cut=function(t,n){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))};Ot.prototype.slice=function(t,n,r){if(n===void 0&&(n=this.content.size),r===void 0&&(r=!1),t==n)return nt.empty;var o=this.resolve(t),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),l=o.node(s),u=l.content.cut(o.pos-a,i.pos-a);return new nt(u,o.depth-s,i.depth-s)};Ot.prototype.replace=function(t,n,r){return sA(this.resolve(t),this.resolve(n),r)};Ot.prototype.nodeAt=function(t){for(var n=this;;){var r=n.content.findIndex(t),o=r.index,i=r.offset;if(n=n.maybeChild(o),!n)return null;if(i==t||n.isText)return n;t-=i+1}};Ot.prototype.childAfter=function(t){var n=this.content.findIndex(t),r=n.index,o=n.offset;return{node:this.content.maybeChild(r),index:r,offset:o}};Ot.prototype.childBefore=function(t){if(t==0)return{node:null,index:0,offset:0};var n=this.content.findIndex(t),r=n.index,o=n.offset;if(o<t)return{node:this.content.child(r),index:r,offset:o};var i=this.content.child(r-1);return{node:i,index:r-1,offset:o-i.nodeSize}};Ot.prototype.resolve=function(t){return zt.resolveCached(this,t)};Ot.prototype.resolveNoCache=function(t){return zt.resolve(this,t)};Ot.prototype.rangeHasMark=function(t,n,r){var o=!1;return n>t&&this.nodesBetween(t,n,function(i){return r.isInSet(i.marks)&&(o=!0),!o}),o};tn.isBlock.get=function(){return this.type.isBlock};tn.isTextblock.get=function(){return this.type.isTextblock};tn.inlineContent.get=function(){return this.type.inlineContent};tn.isInline.get=function(){return this.type.isInline};tn.isText.get=function(){return this.type.isText};tn.isLeaf.get=function(){return this.type.isLeaf};tn.isAtom.get=function(){return this.type.isAtom};Ot.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),cA(this.marks,t)};Ot.prototype.contentMatchAt=function(t){var n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n};Ot.prototype.canReplace=function(t,n,r,o,i){r===void 0&&(r=V.empty),o===void 0&&(o=0),i===void 0&&(i=r.childCount);var s=this.contentMatchAt(t).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(var l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0};Ot.prototype.canReplaceWith=function(t,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;var i=this.contentMatchAt(t).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1};Ot.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)};Ot.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=kt.none,n=0;n<this.marks.length;n++)t=this.marks[n].addToSet(t);if(!kt.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map(function(r){return r.type.name}));this.content.forEach(function(r){return r.check()})};Ot.prototype.toJSON=function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(r){return r.toJSON()})),t};Ot.fromJSON=function(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}var o=V.fromJSON(t,n.content);return t.nodeType(n.type).create(n.attrs,o,r)};Object.defineProperties(Ot.prototype,tn);function cA(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var Re=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Xa={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Re.parse=function(t,n){var r=new Qa(t,n);if(r.next==null)return Re.empty;var o=ty(r);r.next&&r.err("Unexpected trailing text");var i=gA(mA(o));return yA(i,r),i};Re.prototype.matchType=function(t){for(var n=0;n<this.next.length;n+=2)if(this.next[n]==t)return this.next[n+1];return null};Re.prototype.matchFragment=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=t.childCount);for(var o=this,i=n;o&&i<r;i++)o=o.matchType(t.child(i).type);return o};Xa.inlineContent.get=function(){var e=this.next[0];return e?e.isInline:!1};Xa.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}};Re.prototype.compatible=function(t){for(var n=0;n<this.next.length;n+=2)for(var r=0;r<t.next.length;r+=2)if(this.next[n]==t.next[r])return!0;return!1};Re.prototype.fillBefore=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=0);var o=[this];function i(s,a){var l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return V.from(a.map(function(h){return h.createAndFill()}));for(var u=0;u<s.next.length;u+=2){var c=s.next[u],f=s.next[u+1];if(!(c.isText||c.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);var p=i(f,a.concat(c));if(p)return p}}}return i(this,[])};Re.prototype.findWrapping=function(t){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];var r=this.computeWrapping(t);return this.wrapCache.push(t,r),r};Re.prototype.computeWrapping=function(t){for(var n=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var o=r.shift(),i=o.match;if(i.matchType(t)){for(var s=[],a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(var l=0;l<i.next.length;l+=2){var u=i.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!o.type||i.next[l+1].validEnd)&&(r.push({match:u.contentMatch,type:u,via:o}),n[u.name]=!0)}}};Xa.edgeCount.get=function(){return this.next.length>>1};Re.prototype.edge=function(t){var n=t<<1;if(n>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[n],next:this.next[n+1]}};Re.prototype.toString=function(){var t=[];function n(r){t.push(r);for(var o=1;o<r.next.length;o+=2)t.indexOf(r.next[o])==-1&&n(r.next[o])}return n(this),t.map(function(r,o){for(var i=o+(r.validEnd?"*":" ")+" ",s=0;s<r.next.length;s+=2)i+=(s?", ":"")+r.next[s].name+"->"+t.indexOf(r.next[s+1]);return i}).join(`
`)};Object.defineProperties(Re.prototype,Xa);Re.empty=new Re(!0);var Qa=function(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()},Zg={next:{configurable:!0}};Zg.next.get=function(){return this.tokens[this.pos]};Qa.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)};Qa.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")};Object.defineProperties(Qa.prototype,Zg);function ty(e){var t=[];do t.push(fA(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function fA(e){var t=[];do t.push(pA(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function pA(e){for(var t=vA(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=hA(e,t);else break;return t}function ey(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function hA(e,t){var n=ey(e),r=n;return e.eat(",")&&(e.next!="}"?r=ey(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function dA(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}return o.length==0&&e.err("No node type or group '"+t+"' found"),o}function vA(e){if(e.eat("(")){var t=ty(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{var n=dA(e,e.next).map(function(r){return e.inline==null?e.inline=r.isInline:e.inline!=r.isInline&&e.err("Mixing inline and block content"),{type:"name",value:r}});return e.pos++,n.length==1?n[0]:{type:"choice",exprs:n}}}function mA(e){var t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(s,a,l){var u={term:l,to:a};return t[s].push(u),u}function o(s,a){s.forEach(function(l){return l.to=a})}function i(s,a){if(s.type=="choice")return s.exprs.reduce(function(b,y){return b.concat(i(y,a))},[]);if(s.type=="seq")for(var l=0;;l++){var u=i(s.exprs[l],a);if(l==s.exprs.length-1)return u;o(u,a=n())}else if(s.type=="star"){var c=n();return r(a,c),o(i(s.expr,c),c),[r(c)]}else if(s.type=="plus"){var f=n();return o(i(s.expr,a),f),o(i(s.expr,f),f),[r(f)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){for(var p=a,h=0;h<s.min;h++){var d=n();o(i(s.expr,p),d),p=d}if(s.max==-1)o(i(s.expr,p),p);else for(var v=s.min;v<s.max;v++){var m=n();r(p,m),o(i(s.expr,p),m),p=m}return[r(p)]}else if(s.type=="name")return[r(a,null,s.value)]}}}function ny(e,t){return t-e}function ry(e,t){var n=[];return r(t),n.sort(ny);function r(o){var i=e[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(var s=0;s<i.length;s++){var a=i[s],l=a.term,u=a.to;!l&&n.indexOf(u)==-1&&r(u)}}}function gA(e){var t=Object.create(null);return n(ry(e,0));function n(r){var o=[];r.forEach(function(l){e[l].forEach(function(u){var c=u.term,f=u.to;if(!!c){var p=o.indexOf(c),h=p>-1&&o[p+1];ry(e,f).forEach(function(d){h||o.push(c,h=[]),h.indexOf(d)==-1&&h.push(d)})}})});for(var i=t[r.join(",")]=new Re(r.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(ny);i.next.push(o[s],t[a.join(",")]||n(a))}return i}}function yA(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var l=o.next[a],u=o.next[a+1];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(u)==-1&&r.push(u)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function oy(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function iy(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(o===void 0){var i=e[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function sy(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new ay(e[n]);return t}var en=function(t,n,r){this.name=t,this.schema=n,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=sy(r.attrs),this.defaultAttrs=oy(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"},as={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};as.isInline.get=function(){return!this.isBlock};as.isTextblock.get=function(){return this.isBlock&&this.inlineContent};as.isLeaf.get=function(){return this.contentMatch==Re.empty};as.isAtom.get=function(){return this.isLeaf||this.spec.atom};en.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1};en.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)};en.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:iy(this.attrs,t)};en.prototype.create=function(t,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ot(this,this.computeAttrs(t),V.from(n),kt.setFrom(r))};en.prototype.createChecked=function(t,n,r){if(n=V.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new Ot(this,this.computeAttrs(t),n,kt.setFrom(r))};en.prototype.createAndFill=function(t,n,r){if(t=this.computeAttrs(t),n=V.from(n),n.size){var o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}var i=this.contentMatch.matchFragment(n).fillBefore(V.empty,!0);return i?new Ot(this,t,n.append(i),kt.setFrom(r)):null};en.prototype.validContent=function(t){var n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(var r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0};en.prototype.allowsMarkType=function(t){return this.markSet==null||this.markSet.indexOf(t)>-1};en.prototype.allowsMarks=function(t){if(this.markSet==null)return!0;for(var n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0};en.prototype.allowedMarks=function(t){if(this.markSet==null)return t;for(var n,r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:kt.empty:t};en.compile=function(t,n){var r=Object.create(null);t.forEach(function(s,a){return r[s]=new en(s,n,a)});var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r};Object.defineProperties(en.prototype,as);var ay=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ly={isRequired:{configurable:!0}};ly.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(ay.prototype,ly);var lo=function(t,n,r,o){this.name=t,this.schema=r,this.spec=o,this.attrs=sy(o.attrs),this.rank=n,this.excluded=null;var i=oy(this.attrs);this.instance=i&&new kt(this,i)};lo.prototype.create=function(t){return!t&&this.instance?this.instance:new kt(this,iy(this.attrs,t))};lo.compile=function(t,n){var r=Object.create(null),o=0;return t.forEach(function(i,s){return r[i]=new lo(i,o++,n,s)}),r};lo.prototype.removeFromSet=function(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t};lo.prototype.isInSet=function(t){for(var n=0;n<t.length;n++)if(t[n].type==this)return t[n]};lo.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var pf={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bA={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uy={ol:!0,ul:!0},hf=1,df=2,ls=4;function cy(e){return(e?hf:0)|(e==="full"?df:0)}var Zn=function(t,n,r,o,i,s,a){this.type=t,this.attrs=n,this.solid=i,this.match=s||(a&ls?null:t.contentMatch),this.options=a,this.content=[],this.marks=r,this.activeMarks=kt.none,this.pendingMarks=o,this.stashMarks=[]};Zn.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(V.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{var r=this.type.contentMatch,o;return(o=r.findWrapping(t.type))?(this.match=r,o):null}}return this.match.findWrapping(t.type)};Zn.prototype.finish=function(t){if(!(this.options&hf)){var n=this.content[this.content.length-1],r;n&&n.isText&&(r=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-r[0].length)))}var o=V.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(V.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o};Zn.prototype.popFromStashMark=function(t){for(var n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]};Zn.prototype.applyPending=function(t){for(var n=0,r=this.pendingMarks;n<r.length;n++){var o=r[n];(this.type?this.type.allowsMarkType(o.type):CA(o.type,t))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}};Zn.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!pf.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var Ht=function(t,n,r){this.parser=t,this.options=n,this.isOpen=r;var o=n.topNode,i,s=cy(n.preserveWhitespace)|(r?ls:0);o?i=new Zn(o.type,o.attrs,kt.none,kt.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Zn(null,null,kt.none,kt.none,!0,null,s):i=new Zn(t.schema.topNodeType,null,kt.none,kt.none,!0,null,s),this.nodes=[i],this.open=0,this.find=n.findPositions,this.needsBlock=!1},vf={top:{configurable:!0},currentPos:{configurable:!0}};vf.top.get=function(){return this.nodes[this.open]};Ht.prototype.addDOM=function(t){if(t.nodeType==3)this.addTextNode(t);else if(t.nodeType==1){var n=t.getAttribute("style"),r=n?this.readStyles(wA(n)):null,o=this.top;if(r!=null)for(var i=0;i<r.length;i++)this.addPendingMark(r[i]);if(this.addElement(t),r!=null)for(var s=0;s<r.length;s++)this.removePendingMark(r[s],o)}};Ht.prototype.addTextNode=function(t){var n=t.nodeValue,r=this.top;if(r.options&df||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&hf)r.options&df?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var o=r.content[r.content.length-1],i=t.previousSibling;(!o||i&&i.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)};Ht.prototype.addElement=function(t,n){var r=t.nodeName.toLowerCase(),o;uy.hasOwnProperty(r)&&this.parser.normalizeLists&&SA(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(o=this.parser.matchTag(t,this,n));if(i?i.ignore:bA.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var s,a=this.top,l=this.needsBlock;if(pf.hasOwnProperty(r))s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}this.addAll(t),s&&this.sync(a),this.needsBlock=l}else this.addElementByRule(t,i,i.consuming===!1?o:null)};Ht.prototype.leafFallback=function(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))};Ht.prototype.ignoreFallback=function(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))};Ht.prototype.readStyles=function(t){var n=kt.none;t:for(var r=0;r<t.length;r+=2)for(var o=null;;){var i=this.parser.matchStyle(t[r],t[r+1],this,o);if(!i)continue t;if(i.ignore)return null;if(n=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(n),i.consuming===!1)o=i;else break}return n};Ht.prototype.addElementByRule=function(t,n,r){var o=this,i,s,a,l;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(t):i=this.enter(s,n.attrs,n.preserveWhitespace)):(a=this.parser.schema.marks[n.mark],l=a.create(n.attrs),this.addPendingMark(l));var u=this.top;if(s&&s.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(function(f){return o.insertNode(f)});else{var c=n.contentElement;typeof c=="string"?c=t.querySelector(c):typeof c=="function"&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,i)}i&&(this.sync(u),this.open--),l&&this.removePendingMark(l,u)};Ht.prototype.addAll=function(t,n,r,o){for(var i=r||0,s=r?t.childNodes[r]:t.firstChild,a=o==null?null:t.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(s),n&&pf.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(n);this.findAtPoint(t,i)};Ht.prototype.findPlace=function(t){for(var n,r,o=this.open;o>=0;o--){var i=this.nodes[o],s=i.findWrapping(t);if(s&&(!n||n.length>s.length)&&(n=s,r=i,!s.length)||i.solid)break}if(!n)return!1;this.sync(r);for(var a=0;a<n.length;a++)this.enterInner(n[a],null,!1);return!0};Ht.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();var r=this.top;r.applyPending(t.type),r.match&&(r.match=r.match.matchType(t.type));for(var o=r.activeMarks,i=0;i<t.marks.length;i++)(!r.type||r.type.allowsMarkType(t.marks[i].type))&&(o=t.marks[i].addToSet(o));return r.content.push(t.mark(o)),!0}return!1};Ht.prototype.enter=function(t,n,r){var o=this.findPlace(t.create(n));return o&&this.enterInner(t,n,!0,r),o};Ht.prototype.enterInner=function(t,n,r,o){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,n);var s=o==null?i.options&~ls:cy(o);i.options&ls&&i.content.length==0&&(s|=ls),this.nodes.push(new Zn(t,n,i.activeMarks,i.pendingMarks,r,null,s)),this.open++};Ht.prototype.closeExtra=function(t){var n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}};Ht.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)};Ht.prototype.sync=function(t){for(var n=this.open;n>=0;n--)if(this.nodes[n]==t){this.open=n;return}};vf.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e};Ht.prototype.findAtPoint=function(t,n){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)};Ht.prototype.findInside=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)};Ht.prototype.findAround=function(t,n,r){if(t!=n&&this.find){for(var o=0;o<this.find.length;o++)if(this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)){var i=n.compareDocumentPosition(this.find[o].node);i&(r?2:4)&&(this.find[o].pos=this.currentPos)}}};Ht.prototype.findInText=function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))};Ht.prototype.matchesContext=function(t){var n=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var r=t.split("/"),o=this.options.context,i=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),s=-(o?o.depth+1:0)+(i?0:1),a=function(l,u){for(;l>=0;l--){var c=r[l];if(c==""){if(l==r.length-1||l==0)continue;for(;u>=s;u--)if(a(l-1,u))return!0;return!1}else{var f=u>0||u==0&&i?n.nodes[u].type:o&&u>=s?o.node(u-s).type:null;if(!f||f.name!=c&&f.groups.indexOf(c)==-1)return!1;u--}}return!0};return a(r.length-1,this.open)};Ht.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var n=t.depth;n>=0;n--){var r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var o in this.parser.schema.nodes){var i=this.parser.schema.nodes[o];if(i.isTextblock&&i.defaultAttrs)return i}};Ht.prototype.addPendingMark=function(t){var n=xA(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)};Ht.prototype.removePendingMark=function(t,n){for(var r=this.open;r>=0;r--){var o=this.nodes[r],i=o.pendingMarks.lastIndexOf(t);if(i>-1)o.pendingMarks=t.removeFromSet(o.pendingMarks);else{o.activeMarks=t.removeFromSet(o.activeMarks);var s=o.popFromStashMark(t);s&&o.type&&o.type.allowsMarkType(s.type)&&(o.activeMarks=s.addToSet(o.activeMarks))}if(o==n)break}};Object.defineProperties(Ht.prototype,vf);function SA(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&uy.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function wA(e){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];n=t.exec(e);)r.push(n[1],n[2].trim());return r}function CA(e,t){var n=t.schema.nodes,r=function(s){var a=n[s];if(!!a.allowsMarkType(e)){var l=[],u=function(c){l.push(c);for(var f=0;f<c.edgeCount;f++){var p=c.edge(f),h=p.type,d=p.next;if(h==t||l.indexOf(d)<0&&u(d))return!0}};if(u(a.contentMatch))return{v:!0}}};for(var o in n){var i=r(o);if(i)return i.v}}function xA(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}var fy=65535,py=Math.pow(2,16);function kA(e,t){return e+t*py}function hy(e){return e&fy}function OA(e){return(e-(e&fy))/py}var mf=function(t,n,r){n===void 0&&(n=!1),r===void 0&&(r=null),this.pos=t,this.deleted=n,this.recover=r},me=function(t,n){n===void 0&&(n=!1),this.ranges=t,this.inverted=n};me.prototype.recover=function(t){var n=0,r=hy(t);if(!this.inverted)for(var o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+OA(t)};me.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};me.prototype.map=function(t,n){return n===void 0&&(n=1),this._map(t,n,!0)};me.prototype._map=function(t,n,r){for(var o=0,i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?o:0);if(l>t)break;var u=this.ranges[a+i],c=this.ranges[a+s],f=l+u;if(t<=f){var p=u?t==l?-1:t==f?1:n:n,h=l+o+(p<0?0:c);if(r)return h;var d=t==(n<0?l:f)?null:kA(a/3,t-l);return new mf(h,n<0?t!=l:t!=f,d)}o+=c-u}return r?t+o:new mf(t+o)};me.prototype.touches=function(t,n){for(var r=0,o=hy(n),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[a+i],c=l+u;if(t<=c&&a==o*3)return!0;r+=this.ranges[a+s]-u}return!1};me.prototype.forEach=function(t){for(var n=this.inverted?2:1,r=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),u=this.ranges[o+n],c=this.ranges[o+r];t(a,a+u,l,l+c),i+=c-u}};me.prototype.invert=function(){return new me(this.ranges,!this.inverted)};me.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};me.offset=function(t){return t==0?me.empty:new me(t<0?[0,-t,0]:[0,0,t])};me.empty=new me([]);var Ie=function(t,n,r,o){this.maps=t||[],this.from=r||0,this.to=o==null?this.maps.length:o,this.mirror=n};Ie.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.maps.length),new Ie(this.maps,this.mirror,t,n)};Ie.prototype.copy=function(){return new Ie(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};Ie.prototype.appendMap=function(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)};Ie.prototype.appendMapping=function(t){for(var n=0,r=this.maps.length;n<t.maps.length;n++){var o=t.getMirror(n);this.appendMap(t.maps[n],o!=null&&o<n?r+o:null)}};Ie.prototype.getMirror=function(t){if(this.mirror){for(var n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}};Ie.prototype.setMirror=function(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)};Ie.prototype.appendMappingInverted=function(t){for(var n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){var o=t.getMirror(n);this.appendMap(t.maps[n].invert(),o!=null&&o>n?r-o-1:null)}};Ie.prototype.invert=function(){var t=new Ie;return t.appendMappingInverted(this),t};Ie.prototype.map=function(t,n){if(n===void 0&&(n=1),this.mirror)return this._map(t,n,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t};Ie.prototype.mapResult=function(t,n){return n===void 0&&(n=1),this._map(t,n,!1)};Ie.prototype._map=function(t,n,r){for(var o=!1,i=this.from;i<this.to;i++){var s=this.maps[i],a=s.mapResult(t,n);if(a.recover!=null){var l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,t=this.maps[l].recover(a.recover);continue}}a.deleted&&(o=!0),t=a.pos}return r?t:new mf(t,o)};function ci(e){var t=Error.call(this,e);return t.__proto__=ci.prototype,t}ci.prototype=Object.create(Error.prototype);ci.prototype.constructor=ci;ci.prototype.name="TransformError";var Ut=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ie},gf={before:{configurable:!0},docChanged:{configurable:!0}};gf.before.get=function(){return this.docs.length?this.docs[0]:this.doc};Ut.prototype.step=function(t){var n=this.maybeStep(t);if(n.failed)throw new ci(n.failed);return this};Ut.prototype.maybeStep=function(t){var n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n};gf.docChanged.get=function(){return this.steps.length>0};Ut.prototype.addStep=function(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n};Object.defineProperties(Ut.prototype,gf);function Za(){throw new Error("Override me")}var yf=Object.create(null),ke=function(){};ke.prototype.apply=function(t){return Za()};ke.prototype.getMap=function(){return me.empty};ke.prototype.invert=function(t){return Za()};ke.prototype.map=function(t){return Za()};ke.prototype.merge=function(t){return null};ke.prototype.toJSON=function(){return Za()};ke.fromJSON=function(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=yf[n.stepType];if(!r)throw new RangeError("No step type "+n.stepType+" defined");return r.fromJSON(t,n)};ke.jsonID=function(t,n){if(t in yf)throw new RangeError("Duplicate use of step JSON ID "+t);return yf[t]=n,n.prototype.jsonID=t,n};var De=function(t,n){this.doc=t,this.failed=n};De.ok=function(t){return new De(t,null)};De.fail=function(t){return new De(null,t)};De.fromReplace=function(t,n,r,o){try{return De.ok(t.replace(n,r,o))}catch(i){if(i instanceof jn)return De.fail(i.message);throw i}};var Or=function(e){function t(n,r,o,i){e.call(this),this.from=n,this.to=r,this.slice=o,this.structure=!!i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){return this.structure&&bf(r,this.from,this.to)?De.fail("Structure replace would overwrite content"):De.fromReplace(r,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new me([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(r){return new t(this.from,this.from+this.slice.size,r.slice(this.from,this.to))},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted?null:new t(o.pos,Math.max(o.pos,i.pos),this.slice)},t.prototype.merge=function(r){if(!(r instanceof t)||r.structure||this.structure)return null;if(this.from+this.slice.size==r.from&&!this.slice.openEnd&&!r.slice.openStart){var o=this.slice.size+r.slice.size==0?nt.empty:new nt(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new t(this.from,this.to+(r.to-r.from),o,this.structure)}else if(r.to==this.from&&!this.slice.openStart&&!r.slice.openEnd){var i=this.slice.size+r.slice.size==0?nt.empty:new nt(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new t(r.from,this.to,i,this.structure)}else return null},t.prototype.toJSON=function(){var r={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(o.from,o.to,nt.fromJSON(r,o.slice),!!o.structure)},t}(ke);ke.jsonID("replace",Or);var uo=function(e){function t(n,r,o,i,s,a,l){e.call(this),this.from=n,this.to=r,this.gapFrom=o,this.gapTo=i,this.slice=s,this.insert=a,this.structure=!!l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){if(this.structure&&(bf(r,this.from,this.gapFrom)||bf(r,this.gapTo,this.to)))return De.fail("Structure gap-replace would overwrite content");var o=r.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return De.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,o.content);return i?De.fromReplace(r,this.from,this.to,i):De.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new me([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(r){var o=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1),s=r.map(this.gapFrom,-1),a=r.map(this.gapTo,1);return o.deleted&&i.deleted||s<o.pos||a>i.pos?null:new t(o.pos,i.pos,s,a,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var r={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number"||typeof o.gapFrom!="number"||typeof o.gapTo!="number"||typeof o.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(o.from,o.to,o.gapFrom,o.gapTo,nt.fromJSON(r,o.slice),o.insert,!!o.structure)},t}(ke);ke.jsonID("replaceAround",uo);function bf(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}Ut.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),s=r.after(o+1),a=i,l=s,u=V.empty,c=0,f=o,p=!1;f>t;f--)p||n.index(f)>0?(p=!0,u=V.from(n.node(f).copy(u)),c++):a--;for(var h=V.empty,d=0,v=o,m=!1;v>t;v--)m||r.after(v+1)<r.end(v)?(m=!0,h=V.from(r.node(v).copy(h)),d++):l++;return this.step(new uo(a,l,i,s,new nt(u.append(h),c,d),u.size-c,!0))};Ut.prototype.wrap=function(e,t){for(var n=V.empty,r=t.length-1;r>=0;r--)n=V.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new uo(o,i,o,i,new nt(n,0,0),t.length,!0))};Ut.prototype.setBlockType=function(e,t,n,r){var o=this;if(t===void 0&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,function(s,a){if(s.isTextblock&&!s.hasMarkup(n,r)&&MA(o.doc,o.mapping.slice(i).map(a),n)){o.clearIncompatible(o.mapping.slice(i).map(a,1),n);var l=o.mapping.slice(i),u=l.map(a,1),c=l.map(a+s.nodeSize,1);return o.step(new uo(u,c,u+1,c-1,new nt(V.from(n.create(r,null,s.marks)),0,0),1,!0)),!1}}),this};function MA(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}Ut.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new uo(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new nt(V.from(i),0,0),1,!0))};Ut.prototype.split=function(e,t,n){t===void 0&&(t=1);for(var r=this.doc.resolve(e),o=V.empty,i=V.empty,s=r.depth,a=r.depth-t,l=t-1;s>a;s--,l--){o=V.from(r.node(s).copy(o));var u=n&&n[l];i=V.from(u?u.type.create(u.attrs,i):r.node(s).copy(i))}return this.step(new Or(e,e,new nt(o.append(i),t,t),!0))};Ut.prototype.join=function(e,t){t===void 0&&(t=1);var n=new Or(e-t,e+t,nt.empty,!0);return this.step(n)};function TA(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function Sf(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(Sf(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return V.fromArray(r)}var wf=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var o=this,i=r.slice(this.from,this.to),s=r.resolve(this.from),a=s.node(s.sharedDepth(this.to)),l=new nt(Sf(i.content,function(u,c){return!u.isAtom||!c.type.allowsMarkType(o.mark.type)?u:u.mark(o.mark.addToSet(u.marks))},a),i.openStart,i.openEnd);return De.fromReplace(r,this.from,this.to,l)},t.prototype.invert=function(){return new us(this.from,this.to,this.mark)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted||o.pos>=i.pos?null:new t(o.pos,i.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(o.from,o.to,r.markFromJSON(o.mark))},t}(ke);ke.jsonID("addMark",wf);var us=function(e){function t(n,r,o){e.call(this),this.from=n,this.to=r,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(r){var o=this,i=r.slice(this.from,this.to),s=new nt(Sf(i.content,function(a){return a.mark(o.mark.removeFromSet(a.marks))}),i.openStart,i.openEnd);return De.fromReplace(r,this.from,this.to,s)},t.prototype.invert=function(){return new wf(this.from,this.to,this.mark)},t.prototype.map=function(r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);return o.deleted&&i.deleted||o.pos>=i.pos?null:new t(o.pos,i.pos,this.mark)},t.prototype.merge=function(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from)return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(r,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(o.from,o.to,r.markFromJSON(o.mark))},t}(ke);ke.jsonID("removeMark",us);Ut.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,function(l,u,c){if(!!l.isInline){var f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(u,e),h=Math.min(u+l.nodeSize,t),d=n.addToSet(f),v=0;v<f.length;v++)f[v].isInSet(d)||(s&&s.to==p&&s.mark.eq(f[v])?s.to=h:o.push(s=new us(p,h,f[v])));a&&a.to==p?a.to=h:i.push(a=new wf(p,h,n))}}}),o.forEach(function(l){return r.step(l)}),i.forEach(function(l){return r.step(l)}),this};Ut.prototype.removeMark=function(e,t,n){var r=this;n===void 0&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,function(s,a){if(!!s.isInline){i++;var l=null;if(n instanceof lo)for(var u=s.marks,c;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length)for(var f=Math.min(a+s.nodeSize,t),p=0;p<l.length;p++){for(var h=l[p],d=void 0,v=0;v<o.length;v++){var m=o[v];m.step==i-1&&h.eq(o[v].style)&&(d=m)}d?(d.to=f,d.step=i):o.push({style:h,from:Math.max(a,e),to:f,step:i})}}}),o.forEach(function(s){return r.step(new us(s.from,s.to,s.style))}),this};Ut.prototype.clearIncompatible=function(e,t,n){n===void 0&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,s=0;s<r.childCount;s++){var a=r.child(s),l=i+a.nodeSize,u=n.matchType(a.type,a.attrs);if(!u)o.push(new Or(i,l,nt.empty));else{n=u;for(var c=0;c<a.marks.length;c++)t.allowsMarkType(a.marks[c].type)||this.step(new us(i,l,a.marks[c]))}i=l}if(!n.validEnd){var f=n.fillBefore(V.empty,!0);this.replace(i,i,new nt(f,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this};function EA(e,t,n,r){if(n===void 0&&(n=t),r===void 0&&(r=nt.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return dy(o,i,r)?new Or(t,n,r):new dn(o,i,r).fit()}Ut.prototype.replace=function(e,t,n){t===void 0&&(t=e),n===void 0&&(n=nt.empty);var r=EA(this.doc,e,t,n);return r&&this.step(r),this};Ut.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new nt(V.from(n),0,0))};Ut.prototype.delete=function(e,t){return this.replace(e,t,nt.empty)};Ut.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};function dy(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}var dn=function(t,n,r){this.$to=n,this.$from=t,this.unplaced=r,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=V.empty;for(var s=t.depth;s>0;s--)this.placed=V.from(t.node(s).copy(this.placed))},vy={depth:{configurable:!0}};vy.depth.get=function(){return this.frontier.length-1};dn.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var n=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(n<0?this.$to:o.doc.resolve(n));if(!i)return null;for(var s=this.placed,a=o.depth,l=i.depth;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;var u=new nt(s,a,l);if(n>-1)return new uo(o.pos,n,this.$to.pos,this.$to.end(),u,r);if(u.size||o.pos!=this.$to.pos)return new Or(o.pos,i.pos,u)};dn.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var n=this.unplaced.openStart;n>=0;n--){var r=void 0,o=void 0;n?(o=Cf(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;for(var i=r.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],l=a.type,u=a.match,c=void 0,f=void 0;if(t==1&&(i?u.matchType(i.type)||(f=u.fillBefore(V.from(i),!1)):l.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:s,parent:o,inject:f};if(t==2&&i&&(c=u.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:s,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}};dn.prototype.openMore=function(){var t=this.unplaced,n=t.content,r=t.openStart,o=t.openEnd,i=Cf(n,r);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new nt(n,r+1,Math.max(o,i.size+r>=n.size-o?r+1:0)),!0)};dn.prototype.dropNode=function(){var t=this.unplaced,n=t.content,r=t.openStart,o=t.openEnd,i=Cf(n,r);if(i.childCount<=1&&r>0){var s=n.size-r<=r+i.size;this.unplaced=new nt(cs(n,r-1,1),r-1,s?r-1:o)}else this.unplaced=new nt(cs(n,r,1),r,o)};dn.prototype.placeNodes=function(t){for(var n=t.sliceDepth,r=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>r;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var l=this.unplaced,u=o?o.content:l.content,c=l.openStart-n,f=0,p=[],h=this.frontier[r],d=h.match,v=h.type;if(i){for(var m=0;m<i.childCount;m++)p.push(i.child(m));d=d.matchFragment(i)}for(var b=u.size+n-(l.content.size-l.openEnd);f<u.childCount;){var y=u.child(f),C=d.matchType(y.type);if(!C)break;f++,(f>1||c==0||y.content.size)&&(d=C,p.push(my(y.mark(v.allowedMarks(y.marks)),f==1?c:0,f==u.childCount?b:-1)))}var g=f==u.childCount;g||(b=-1),this.placed=fs(this.placed,r,V.from(p)),this.frontier[r].match=d,g&&b<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var O=0,x=u;O<b;O++){var E=x.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),x=E.content}this.unplaced=g?n==0?nt.empty:new nt(cs(l.content,n-1,1),n-1,b<0?l.openEnd:n-1):new nt(cs(l.content,n,f),l.openStart,l.openEnd)};dn.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t=this.frontier[this.depth],n;if(!t.type.isTextblock||!xf(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;for(var r=this.$to,o=r.depth,i=this.$to.after(o);o>1&&i==this.$to.end(--o);)++i;return i};dn.prototype.findCloseLevel=function(t){t:for(var n=Math.min(this.depth,t.depth);n>=0;n--){var r=this.frontier[n],o=r.match,i=r.type,s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),a=xf(t,n,i,o,s);if(!!a){for(var l=n-1;l>=0;l--){var u=this.frontier[l],c=u.match,f=u.type,p=xf(t,l,f,c,!0);if(!p||p.childCount)continue t}return{depth:n,fit:a,move:s?t.doc.resolve(t.after(n+1)):t}}}};dn.prototype.close=function(t){var n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=fs(this.placed,n.depth,n.fit)),t=n.move;for(var r=n.depth+1;r<=t.depth;r++){var o=t.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(r));this.openFrontierNode(o.type,o.attrs,i)}return t};dn.prototype.openFrontierNode=function(t,n,r){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=fs(this.placed,this.depth,V.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})};dn.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),n=t.match.fillBefore(V.empty,!0);n.childCount&&(this.placed=fs(this.placed,this.frontier.length,n))};Object.defineProperties(dn.prototype,vy);function cs(e,t,n){return t==0?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(cs(e.firstChild.content,t-1,n)))}function fs(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(fs(e.lastChild.content,t-1,n)))}function Cf(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function my(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,my(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(V.empty,!0)))),e.copy(r)}function xf(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!AA(n,i.content,s)?a:null}function AA(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}Ut.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(dy(r,o,n))return this.step(new Or(e,t,n));var i=yy(r,this.doc.resolve(t));i[i.length-1]==0&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var u=r.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==l&&i.splice(1,0,-a)}for(var c=i.indexOf(s),f=[],p=n.openStart,h=n.content,d=0;;d++){var v=h.firstChild;if(f.push(v),d==n.openStart)break;h=v.content}p>0&&f[p-1].type.spec.defining&&r.node(c).type!=f[p-1].type?p-=1:p>=2&&f[p-1].isTextblock&&f[p-2].type.spec.defining&&r.node(c).type!=f[p-2].type&&(p-=2);for(var m=n.openStart;m>=0;m--){var b=(m+p+1)%(n.openStart+1),y=f[b];if(!!y)for(var C=0;C<i.length;C++){var g=i[(C+c)%i.length],O=!0;g<0&&(O=!1,g=-g);var x=r.node(g-1),E=r.index(g-1);if(x.canReplaceWith(E,E,y.type,y.marks))return this.replace(r.before(g),O?o.after(g):t,new nt(gy(n.content,0,n.openStart,b),b,n.openEnd))}}for(var H=this.steps.length,j=i.length-1;j>=0&&(this.replace(e,t,n),!(this.steps.length>H));j--){var q=i[j];q<0||(e=r.before(q),t=o.after(q))}return this};function gy(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(gy(i.content,t+1,n,r,i)))}if(t>r){var s=o.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(V.empty,!0))}return e}Ut.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=TA(this.doc,e,n.type);r!=null&&(e=t=r)}return this.replaceRange(e,t,new nt(V.from(n),0,0))};Ut.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=yy(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&s==0||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};function yy(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}var kf=Object.create(null),jt=function(t,n,r){this.ranges=r||[new _A(t.min(n),t.max(n))],this.$anchor=t,this.$head=n},Mr={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Mr.anchor.get=function(){return this.$anchor.pos};Mr.head.get=function(){return this.$head.pos};Mr.from.get=function(){return this.$from.pos};Mr.to.get=function(){return this.$to.pos};Mr.$from.get=function(){return this.ranges[0].$from};Mr.$to.get=function(){return this.ranges[0].$to};Mr.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0};jt.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)};jt.prototype.replace=function(t,n){n===void 0&&(n=nt.empty);for(var r=n.content.lastChild,o=null,i=0;i<n.openEnd;i++)o=r,r=r.lastChild;for(var s=t.steps.length,a=this.ranges,l=0;l<a.length;l++){var u=a[l],c=u.$from,f=u.$to,p=t.mapping.slice(s);t.replaceRange(p.map(c.pos),p.map(f.pos),l?nt.empty:n),l==0&&by(t,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}};jt.prototype.replaceWith=function(t,n){for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],a=s.$from,l=s.$to,u=t.mapping.slice(r),c=u.map(a.pos),f=u.map(l.pos);i?t.deleteRange(c,f):(t.replaceRangeWith(c,f,n),by(t,r,n.isInline?-1:1))}};jt.findFrom=function(t,n,r){var o=t.parent.inlineContent?new fi(t):hi(t.node(0),t.parent,t.pos,t.index(),n,r);if(o)return o;for(var i=t.depth-1;i>=0;i--){var s=n<0?hi(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):hi(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(s)return s}};jt.near=function(t,n){return n===void 0&&(n=1),this.findFrom(t,n)||this.findFrom(t,-n)||new hs(t.node(0))};jt.atStart=function(t){return hi(t,t,0,0,1)||new hs(t)};jt.atEnd=function(t){return hi(t,t,t.content.size,t.childCount,-1)||new hs(t)};jt.fromJSON=function(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=kf[n.type];if(!r)throw new RangeError("No selection type "+n.type+" defined");return r.fromJSON(t,n)};jt.jsonID=function(t,n){if(t in kf)throw new RangeError("Duplicate use of selection JSON ID "+t);return kf[t]=n,n.prototype.jsonID=t,n};jt.prototype.getBookmark=function(){return fi.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(jt.prototype,Mr);jt.prototype.visible=!0;var _A=function(t,n){this.$from=t,this.$to=n},fi=function(e){function t(r,o){o===void 0&&(o=r),e.call(this,r,o)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(o,i){var s=o.resolve(i.map(this.head));if(!s.parent.inlineContent)return e.near(s);var a=o.resolve(i.map(this.anchor));return new t(a.parent.inlineContent?a:s,s)},t.prototype.replace=function(o,i){if(i===void 0&&(i=nt.empty),e.prototype.replace.call(this,o,i),i==nt.empty){var s=this.$from.marksAcross(this.$to);s&&o.ensureMarks(s)}},t.prototype.eq=function(o){return o instanceof t&&o.anchor==this.anchor&&o.head==this.head},t.prototype.getBookmark=function(){return new ps(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(o,i){if(typeof i.anchor!="number"||typeof i.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(o.resolve(i.anchor),o.resolve(i.head))},t.create=function(o,i,s){s===void 0&&(s=i);var a=o.resolve(i);return new this(a,s==i?a:o.resolve(s))},t.between=function(o,i,s){var a=o.pos-i.pos;if((!s||a)&&(s=a>=0?1:-1),!i.parent.inlineContent){var l=e.findFrom(i,s,!0)||e.findFrom(i,-s,!0);if(l)i=l.$head;else return e.near(i,s)}return o.parent.inlineContent||(a==0?o=i:(o=(e.findFrom(o,-s,!0)||e.findFrom(o,s,!0)).$anchor,o.pos<i.pos!=a<0&&(o=i))),new t(o,i)},Object.defineProperties(t.prototype,n),t}(jt);jt.jsonID("text",fi);var ps=function(t,n){this.anchor=t,this.head=n};ps.prototype.map=function(t){return new ps(t.map(this.anchor),t.map(this.head))};ps.prototype.resolve=function(t){return fi.between(t.resolve(this.anchor),t.resolve(this.head))};var pi=function(e){function t(n){var r=n.nodeAfter,o=n.node(0).resolve(n.pos+r.nodeSize);e.call(this,n,o),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,o){var i=o.mapResult(this.anchor),s=i.deleted,a=i.pos,l=r.resolve(a);return s?e.near(l):new t(l)},t.prototype.content=function(){return new nt(V.from(this.node),0,0)},t.prototype.eq=function(r){return r instanceof t&&r.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new tl(this.anchor)},t.fromJSON=function(r,o){if(typeof o.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(r.resolve(o.anchor))},t.create=function(r,o){return new this(r.resolve(o))},t.isSelectable=function(r){return!r.isText&&r.type.spec.selectable!==!1},t}(jt);pi.prototype.visible=!1;jt.jsonID("node",pi);var tl=function(t){this.anchor=t};tl.prototype.map=function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new ps(o,o):new tl(o)};tl.prototype.resolve=function(t){var n=t.resolve(this.anchor),r=n.nodeAfter;return r&&pi.isSelectable(r)?new pi(n):jt.near(n)};var hs=function(e){function t(n){e.call(this,n.resolve(0),n.resolve(n.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(r,o){if(o===void 0&&(o=nt.empty),o==nt.empty){r.delete(0,r.doc.content.size);var i=e.atStart(r.doc);i.eq(r.selection)||r.setSelection(i)}else e.prototype.replace.call(this,r,o)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(r){return new t(r)},t.prototype.map=function(r){return new t(r)},t.prototype.eq=function(r){return r instanceof t},t.prototype.getBookmark=function(){return NA},t}(jt);jt.jsonID("all",hs);var NA={map:function(){return this},resolve:function(t){return new hs(t)}};function hi(e,t,n,r,o,i){if(t.inlineContent)return fi.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&pi.isSelectable(a))return pi.create(e,n-(o<0?a.nodeSize:0))}else{var l=hi(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}}function by(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof Or||o instanceof uo){var i=e.mapping.maps[r],s;i.forEach(function(a,l,u,c){s==null&&(s=c)}),e.setSelection(jt.near(e.doc.resolve(s),n))}}}var Sy=1,el=2,wy=4,RA=function(e){function t(r){e.call(this,r.doc),this.time=Date.now(),this.curSelection=r.selection,this.curSelectionFor=0,this.storedMarks=r.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(o){if(o.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=o,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Sy)&~el,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&Sy)>0},t.prototype.setStoredMarks=function(o){return this.storedMarks=o,this.updated|=el,this},t.prototype.ensureMarks=function(o){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),o)||this.setStoredMarks(o),this},t.prototype.addStoredMark=function(o){return this.ensureMarks(o.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(o){return this.ensureMarks(o.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&el)>0},t.prototype.addStep=function(o,i){e.prototype.addStep.call(this,o,i),this.updated=this.updated&~el,this.storedMarks=null},t.prototype.setTime=function(o){return this.time=o,this},t.prototype.replaceSelection=function(o){return this.selection.replace(this,o),this},t.prototype.replaceSelectionWith=function(o,i){var s=this.selection;return i!==!1&&(o=o.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||kt.none))),s.replaceWith(this,o),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(o,i,s){s===void 0&&(s=i);var a=this.doc.type.schema;if(i==null)return o?this.replaceSelectionWith(a.text(o),!0):this.deleteSelection();if(!o)return this.deleteRange(i,s);var l=this.storedMarks;if(!l){var u=this.doc.resolve(i);l=s==i?u.marks():u.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(i,s,a.text(o,l)),this.selection.empty||this.setSelection(jt.near(this.selection.$to)),this},t.prototype.setMeta=function(o,i){return this.meta[typeof o=="string"?o:o.key]=i,this},t.prototype.getMeta=function(o){return this.meta[typeof o=="string"?o:o.key]},n.isGeneric.get=function(){for(var r in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=wy,this},n.scrolledIntoView.get=function(){return(this.updated&wy)>0},Object.defineProperties(t.prototype,n),t}(Ut);function Cy(e,t){return!t||!e?e:e.bind(t)}var ds=function(t,n,r){this.name=t,this.init=Cy(n.init,r),this.apply=Cy(n.apply,r)},IA=[new ds("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new ds("selection",{init:function(t,n){return t.selection||jt.atStart(n.doc)},apply:function(t){return t.selection}}),new ds("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,n,r,o){return o.selection.$cursor?t.storedMarks:null}}),new ds("scrollToSelection",{init:function(){return 0},apply:function(t,n){return t.scrolledIntoView?n+1:n}})],Of=function(t,n){var r=this;this.schema=t,this.fields=IA.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),n&&n.forEach(function(o){if(r.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");r.plugins.push(o),r.pluginsByKey[o.key]=o,o.spec.state&&r.fields.push(new ds(o.key,o.spec.state,o))})},Pe=function(t){this.config=t},nl={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};nl.schema.get=function(){return this.config.schema};nl.plugins.get=function(){return this.config.plugins};Pe.prototype.apply=function(t){return this.applyTransaction(t).state};Pe.prototype.filterTransaction=function(t,n){n===void 0&&(n=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=n){var o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0};Pe.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var n=[t],r=this.applyInner(t),o=null;;){for(var i=!1,s=0;s<this.config.plugins.length;s++){var a=this.config.plugins[s];if(a.spec.appendTransaction){var l=o?o[s].n:0,u=o?o[s].state:this,c=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!o){o=[];for(var f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}};Pe.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new Pe(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}for(var s=0;s<vs.length;s++)vs[s](this,t,n);return n};nl.tr.get=function(){return new RA(this)};Pe.create=function(t){for(var n=new Of(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Pe(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r};Pe.prototype.reconfigure=function(t){for(var n=new Of(this.schema,t.plugins),r=n.fields,o=new Pe(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(t,o)}return o};Pe.prototype.toJSON=function(t){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(function(s){return s.toJSON()})),t&&typeof t=="object")for(var r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n};Pe.fromJSON=function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new Of(t.schema,t.plugins),i=new Pe(o);return o.fields.forEach(function(s){if(s.name=="doc")i.doc=Ot.fromJSON(t.schema,n.doc);else if(s.name=="selection")i.selection=jt.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var a in r){var l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=u.fromJSON.call(l,t,n[a],i);return}}i[s.name]=s.init(t,i)}}),i};Pe.addApplyListener=function(t){vs.push(t)};Pe.removeApplyListener=function(t){var n=vs.indexOf(t);n>-1&&vs.splice(n,1)};Object.defineProperties(Pe.prototype,nl);var vs=[];function xy(e,t){return t?e.createChecked(null,t):e.createAndFill()}function DA(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}function PA(e,t,n,r,o){const i=DA(e),s=[],a=[];for(let u=0;u<n;u+=1){const c=xy(i.cell,o);if(c&&a.push(c),r){const f=xy(i.header_cell,o);f&&s.push(f)}}const l=[];for(let u=0;u<t;u+=1)l.push(i.row.createChecked(null,r&&u===0?s:a));return i.table.createChecked(null,l)}function LA(e){return e instanceof Bt}const rl=({editor:e})=>{const{selection:t}=e.state;if(!LA(t))return!1;let n=0;const r=km(t.ranges[0].$from,i=>i.type.name==="table");return r==null||r.node.descendants(i=>{if(i.type.name==="table")return!1;["tableCell","tableHeader"].includes(i.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1};function ky(e,t,n,r,o,i){let s=0,a=!0,l=t.firstChild;const u=e.firstChild;for(let c=0,f=0;c<u.childCount;c+=1){const{colspan:p,colwidth:h}=u.child(c).attrs;for(let d=0;d<p;d+=1,f+=1){const v=o===f?i:h&&h[d],m=v?`${v}px`:"";s+=v||r,v||(a=!1),l?(l.style.width!==m&&(l.style.width=m),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=m}}for(;l;){const c=l.nextSibling;l.parentNode.removeChild(l),l=c}a?(n.style.width=`${s}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${s}px`)}class BA{constructor(t,n){this.node=t,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ky(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,ky(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return t.type==="attributes"&&(t.target===this.table||this.colgroup.contains(t.target))}}const s_=oe.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:BA,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:e}){return["table",re(this.options.HTMLAttributes,e),["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:i})=>{const s=PA(i.schema,e,t,n);if(o){const a=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(fi.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>NE(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>RE(e,t),deleteColumn:()=>({state:e,dispatch:t})=>DE(e,t),addRowBefore:()=>({state:e,dispatch:t})=>LE(e,t),addRowAfter:()=>({state:e,dispatch:t})=>BE(e,t),deleteRow:()=>({state:e,dispatch:t})=>zE(e,t),deleteTable:()=>({state:e,dispatch:t})=>UE(e,t),mergeCells:()=>({state:e,dispatch:t})=>Bg(e,t),splitCell:()=>({state:e,dispatch:t})=>Fg(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>JE(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>WE(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>qE(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>Bg(e,t)?!0:Fg(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:r})=>jE(e,t)(n,r),goToNextCell:()=>({state:e,dispatch:t})=>Hg(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>Hg(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Ig(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const r=Bt.create(t.doc,e.anchorCell,e.headCell);t.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:rl,"Mod-Backspace":rl,Delete:rl,"Mod-Delete":rl}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[GE({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],iA({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:pt(G(e,"tableRole",t))}}}),a_=oe.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",re(this.options.HTMLAttributes,e),0]}}),l_=oe.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",re(this.options.HTMLAttributes,e),0]}}),u_=oe.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",re(this.options.HTMLAttributes,e),0]}});export{n_ as A,o_ as B,s_ as C,a_ as D,l_ as E,En as F,u_ as G,r_ as H,UA as I,KA as J,QA as K,ZA as L,qA as M,i_ as S,eh as T,YA as a,Dp as b,jA as c,Ge as d,$A as e,XA as f,te as g,So as h,f0 as i,d0 as j,Jn as k,WA as l,Fe as m,ll as n,u0 as o,HA as p,Be as q,VA as r,al as s,zA as t,GA as u,JA as v,Hr as w,xb as x,t_ as y,e_ as z};
